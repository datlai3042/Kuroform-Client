(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9527],{7022:function(e,t,r){Promise.resolve().then(r.bind(r,610))},9259:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(843).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8306:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(843).Z)("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]])},244:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(843).Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},7731:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(843).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},703:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var s=r(7447),i=r.n(s)},7447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return o},default:function(){return a}});let s=r(6921),i=r(8630),n=r(1749),l=s._(r(536)),o=e=>{let{props:t}=(0,i.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},a=n.Image},9564:function(e,t,r){"use strict";var s=r(7437),i=r(2265);t.Z=e=>{let{children:t,width:r,height:n,setOpenModel:l}=e,o=(0,i.useRef)(null),a=(0,i.useCallback)(e=>{o.current&&!o.current.contains(e.target)&&l(!1)},[l]);return(0,i.useEffect)(()=>(document.addEventListener("click",a),()=>{document.removeEventListener("click",a),o.current=null}),[a]),(0,s.jsx)("div",{ref:o,className:"".concat(r||""," ").concat(n||""),children:t})}},4184:function(e,t,r){"use strict";var s=r(7437);r(2265),t.Z=e=>{let{textContent:t,children:r,...i}=e;return(0,s.jsxs)("button",{...i,className:" ".concat(i.className),children:[t,r]})}},1064:function(e,t,r){"use strict";var s=r(7437),i=r(9259);r(2265),t.Z=e=>{let{message:t}=e;return(0,s.jsxs)("div",{className:"w-max min-h-[3rem] flex items-center gap-[1rem]   text-[#fff] px-[2rem] rounded-lg  bg-color-main border-[.1rem] border-[#fff]",children:[t,(0,s.jsx)(i.Z,{size:16})]})}},610:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var s=r(7437),i=r(6715),n=r(2265),l=r(8385),o=r(3494),a=r(828),u=r(244),c=r(7731),m=r(703),d=r(7907),f=r(8792),h=r(1064),x=e=>{var t,r;let{children:i,formPageMode:l,setFormPageMode:o}=e,x=(0,a.v9)(e=>e.form.formCoreOriginal),v=(0,d.useRouter)(),p=x.form_title.form_title_size?x.form_title.form_title_size/10+"rem":x.form_setting_default.form_title_size_default/10+"rem";x.form_title.form_title_color?x.form_title.form_title_color:x.form_setting_default.form_title_color_default;let b=x.form_title.form_title_style?x.form_title.form_title_style:x.form_setting_default.form_title_style_default,g=(null===(t=x.form_avatar)||void 0===t?void 0:t.form_avatar_url)||x.form_setting_default.form_avatar_default_url||"",_={linkActive:e=>e?"border-[#0bceb2] font-bold":"border-transparent"},[j,y]=(0,n.useState)(!1),w=(0,n.useRef)(null);return(0,n.useEffect)(()=>(j&&(w.current=setTimeout(()=>y(!1),3e3)),()=>{clearTimeout(w.current)}),[j]),(0,s.jsxs)("div",{className:" w-full p-[6rem]  mx-auto h-full flex  flex-col gap-[2rem] text-text-theme",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col gap-[2rem] xl:flex-row justify-between",children:[(0,s.jsx)("h1",{title:x.form_title.form_title_value,className:"line-clamp-2 w-[80%] text-text-theme",style:{fontSize:p,fontStyle:b},children:null==x?void 0:null===(r=x.form_title)||void 0===r?void 0:r.form_title_value}),(0,s.jsxs)("div",{className:"flex items-center gap-[1rem]",children:[(0,s.jsxs)("div",{className:"relative ",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),navigator.clipboard.writeText("".concat(window.location.origin,"/form/").concat(x._id)).then(()=>y(!0))},className:"hover:text-[#fff] flex items-center gap-[1rem] p-[.5rem_.7rem] hover:bg-color-main rounded-lg",children:(0,s.jsx)(u.Z,{size:16})}),j&&(0,s.jsx)("div",{className:"absolute bottom-[-4rem] left-0 text-text-theme",children:(0,s.jsx)(h.Z,{message:"Copy link chia sẽ th\xe0nh c\xf4ng"})})]}),g?(0,s.jsx)(m.default,{src:g,width:30,height:30,alt:"avatar",className:"w-[3rem] h-[3rem] rounded-full"}):(0,s.jsx)("div",{className:"animate-pulse w-[3rem] h-[3rem] rounded-full bg-slate-200 "}),(0,s.jsxs)("button",{className:"hover:text-[#fff] min-w-[12rem] flex items-center gap-[1rem] p-[.5rem_.7rem] hover:bg-color-main rounded-lg",onClick:e=>{e.preventDefault(),v.push("/form/".concat(x._id,"/edit"))},children:[(0,s.jsx)(c.Z,{size:16}),(0,s.jsx)("span",{children:"Chỉnh sửa"})]})]})]}),(0,s.jsxs)("div",{className:"w-full h-max flex items-center gap-[2rem] text-[1.4rem] border-b-[.1rem] border-slate-200 text-text-theme",children:[(0,s.jsx)(f.default,{onClick:()=>o("summary"),href:"/form/".concat(x._id,"/summary"),className:"".concat(_.linkActive("summary"===l)," border-b-[.4rem] pb-[.9rem] font-semibold  hover:border-[#0bceb2] "),children:"Bản t\xf3m tắt"}),(0,s.jsx)(f.default,{onClick:()=>o("download"),href:"/form/".concat(x._id,"/download"),className:"".concat(_.linkActive("download"===l),"  border-b-[.4rem] pb-[.9rem] font-semibold  hover:border-[#0bceb2] "),children:"Tải xuống"}),(0,s.jsx)(f.default,{onClick:()=>o("share"),href:"/form/".concat(x._id,"/share"),className:"".concat(_.linkActive("share"===l),"  border-b-[.4rem] pb-[.9rem] font-semibold  hover:border-[#0bceb2] "),children:"Chia sẽ"})]}),(0,s.jsx)("div",{className:"h-[50%] xl:h-[70%]",children:(0,s.jsx)("div",{className:"mt-[3rem] h-full",children:i})})]})},v=r(3667),p=r(5137),b=r(5292),g=r(7410),_=()=>(0,s.jsxs)("div",{className:"min-h-screen w-full flex flex-col items-center justify-center text-text-theme bg-color-section-theme",children:[(0,s.jsx)(m.default,{src:"/assets/images/icon/form_answer/form_empty_response.png",width:50,height:50,alt:"toast success",quality:100,className:"min-w-[40rem] h-[40rem]",unoptimized:!0}),(0,s.jsxs)("div",{className:"min-h-full  flex flex-col items-center    gap-[2rem]",children:[(0,s.jsx)("p",{className:"text-[6rem] font-medium",children:"Kh\xf4ng t\xecm thấy Form"}),(0,s.jsx)(f.default,{href:"/dashboard",className:"min-w-[16rem] h-[4rem] p-[1rem_2rem] flex items-center justify-center text-[1.6rem] bg-blue-600 text-[#ffffff] rounded-lg",children:"Tạo form mới"})]})]}),j=e=>{var t,r,u,c;let{children:m,params:f}=e,{modeScreen:h}=(0,n.useContext)(o.$),j=(0,d.useSelectedLayoutSegments)(),[y,w]=(0,n.useState)(j[1]),N=(0,a.I0)(),k=(0,v.a)({queryKey:["get-form",f.id],queryFn:()=>p.Z.getForm({form_id:f.id})});return(0,n.useEffect)(()=>{if(k.isSuccess){let{form:e}=k.data.metadata;e&&N((0,b.ow)({form:e}))}},[k.isSuccess,f.id,k.data,N]),(0,s.jsxs)(g.Z,{children:[(null===(t=k.data)||void 0===t?void 0:t.metadata.form)!==null&&(0,s.jsx)(i.Z,{className:"bg-color-gap-empty  min-h-screen  h-max  flex flex-col  text-[1.4rem]   max-w-full ",children:(0,s.jsxs)(i.Z,{className:" w-full min-h-screen rounded-lg h-max  ",children:["edit"!==j[0]&&(null===(r=k.data)||void 0===r?void 0:r.metadata.form)&&(0,s.jsxs)("div",{className:" h-screen flex flex-col gap-[2rem] ",children:[(0,s.jsx)(l.Z,{showHeaderAction:"edit"===j[1]}),(0,s.jsx)("div",{className:"min-h-[calc(100vh-8rem)]  layout-down ",children:(0,s.jsx)("div",{className:"h-full pb-[2rem]",children:(0,s.jsx)("div",{className:"h-full  bg-color-section-theme  ",children:(0,s.jsx)(x,{formPageMode:y,setFormPageMode:w,children:m})})})})]}),"edit"===j[0]&&(null===(u=k.data)||void 0===u?void 0:u.metadata.form)&&m]})}),k.isSuccess&&(null===(c=k.data)||void 0===c?void 0:c.metadata.form)===null&&(0,s.jsx)(_,{})]})}},7281:function(e,t,r){"use strict";r.d(t,{c:function(){return i}});var s=r(2265);function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!1},[i,n]=(0,s.useState)(e),l=(0,s.useRef)(!1),o=(0,s.useRef)(null),a=(0,s.useRef)(!1),u=()=>window.clearTimeout(o.current);return(0,s.useEffect)(()=>{l.current&&(!a.current&&r.leading?(a.current=!0,n(e)):(u(),o.current=window.setTimeout(()=>{a.current=!1,n(e)},t)))},[e,r.leading,t]),(0,s.useEffect)(()=>(l.current=!0,u),[]),[i,u]}},568:function(e,t,r){"use strict";r.d(t,{D:function(){return m}});var s=r(2265),i=r(1793),n=r(5139),l=r(4614),o=r(6063),a=class extends l.l{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#n(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#n()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){let e=this.#r?.state??(0,i.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#n(e){n.V.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r),this.#s.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r),this.#s.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#t)})})}},u=r(7082),c=r(826);function m(e,t){let r=(0,u.NL)(t),[i]=s.useState(()=>new a(r,e));s.useEffect(()=>{i.setOptions(e)},[i,e]);let l=s.useSyncExternalStore(s.useCallback(e=>i.subscribe(n.V.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=s.useCallback((e,t)=>{i.mutate(e,t).catch(c.Z)},[i]);if(l.error&&(0,c.L)(i.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:o,mutateAsync:l.mutate}}}},function(e){e.O(0,[6990,9154,1749,828,6176,8792,2325,3667,5992,7410,8385,2971,8069,1744],function(){return e(e.s=7022)}),_N_E=e.O()}]);