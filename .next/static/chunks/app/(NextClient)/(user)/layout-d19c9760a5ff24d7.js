(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4707],{780:function(t,e,r){Promise.resolve().then(r.t.bind(r,5250,23)),Promise.resolve().then(r.bind(r,1440)),Promise.resolve().then(r.bind(r,5528)),Promise.resolve().then(r.bind(r,2882)),Promise.resolve().then(r.bind(r,4903))},1440:function(t,e,r){"use strict";r.r(e);var a=r(9698),o=r(2056),n=r(2265);e.default=()=>((0,n.useEffect)(()=>{let t=setInterval(async()=>{let t=new Date,e=new Date(JSON.parse(localStorage.getItem("expireToken")||"0"));if(1>(0,o.A)(e,t))try{await a.Z.refreshTokenServer()}catch(t){await a.Z.logoutNextClient(),window.location.href="/"}},18e5);return()=>{clearInterval(t)}},[]),null)},5528:function(t,e,r){"use strict";r.r(e),r.d(e,{SocketContext:function(){return p},SocketProvider:function(){return v}});var a=r(7437),o=r(7002),n=r(8411),i=r(5984),s=r(3898),c=r(6067),u=r(7082),l=r(2265),m=r(828),f=r(6373),d=r(1231);let p=(0,l.createContext)(null),v=t=>{let{children:e}=t,[r,v]=(0,l.useState)(null),g=(0,m.I0)(),y=(0,u.NL)();return(0,l.useEffect)(()=>{if(null===r){v((0,f.io)("http://localhost:4000",{withCredentials:!0,transports:["websocket","polling","flashsocket"]}));return}function t(){r.emit("checkError",{error:"Ok"})}let e=t=>{var e;let{total_views:r,total_answers:a,notification:u,notification_item_id:l,form_origin:m,form_answer_item_id:f}=t;g((0,n.mt)({notification:u.notifications,animation:!0})),g((0,n.aZ)({notification_item_id:l})),g((0,i.sV)({toast_item:{_id:(0,d.Z)(),type:"FormAnswer",toast_title:"Phản hồi",core:{message:"Bạn nhận được 1 phản hồi từ Form [".concat((null==m?void 0:null===(e=m.form_title)||void 0===e?void 0:e.form_title_value)||"Trống","]"),url:"/form/".concat(m._id,"/summary#").concat(f)}}})),g((0,o.Ut)({total_views:r})),g((0,o.P7)({total_answers:a})),c.Z.getFormAnswer(m._id).then(t=>{let{formAnswer:e}=t.metadata;g((0,o.lB)({form_id:e.form_id,reports:e}));let{reports:r}=e,a=[...r];(0,s.Bs)(a.reverse(),e.form_id)}),y.invalidateQueries({queryKey:["get-notification-type"]})};function a(){}return r&&(r.on("connect",t),r.on("disconnect",a),r.on("add-new-reports",e),r.on("connect_error",t=>{console.error(t.message)})),()=>{r.off("connect",t),r.off("disconnect",a),r.off("add-new-notification",e)}},[r]),(0,a.jsx)(p.Provider,{value:r,children:e})}},2882:function(t,e,r){"use strict";r.r(e);var a=r(7437);r(2265);var o=r(8792),n=r(7082),i=r(568),s=r(5137),c=r(7907);e.default=t=>{let{textContent:e,urlNavigation:r,position:u="LEFT",icon:l,...m}=t,f=(0,c.useRouter)(),d=(0,n.NL)(),p=(0,i.D)({mutationKey:["create-new-form"],mutationFn:()=>s.Z.createForm(),onSuccess:t=>{let{form_id:e}=t.metadata;f.push("/form/".concat(e,"/edit")),d.invalidateQueries({queryKey:["get-form-pagination"]})}});return(0,a.jsxs)(o.default,{onClick:()=>p.mutate(),tabIndex:-1,href:r,...m,className:"".concat(m.className," w-full xl:w-[17rem] h-[4rem]  p-[1rem_2rem] flex  justify-center items-center gap-[.8rem] text-[1.8rem] text-[#ffffff] bg-color-main opacity-[.95] hover:opacity-100 transition-colors duration-200 rounded-[.4rem]"),children:["LEFT"===u&&l&&l,e,"RIGHT"===u&&l&&l]})}},4903:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var a=r(7437),o=r(9698),n=r(568),i=r(7907),s=()=>{let t=(0,i.useRouter)();return(0,n.D)({mutationKey:["logout"],mutationFn:()=>o.Z.logoutNextClient(),onSuccess:()=>{t.push("/")}})},c=r(1049);r(2265);var u=t=>{let{textContent:e="Đăng xuất",...r}=t,o=s();return(0,a.jsxs)("button",{...r,onClick:()=>o.mutate(),children:[(0,a.jsx)(c.Z,{size:18}),e]})}},5137:function(t,e,r){"use strict";var a=r(2970);class o{static async createForm(){return a.Z.post("/v1/api/form/create-form",{})}static async getAllForm(){return a.Z.get("/v1/api/form/get-all-form",{cache:"no-store"})}static async getForms(){return a.Z.get("/v1/api/form/get-forms",{cache:"no-store"})}static async getForm(t){let{form_id:e}=t;return a.Z.get("/v1/api/form/get-form-id?form_id=".concat(e),{cache:"no-store"})}static async getSearch(t){let{text:e}=t;return a.Z.get("/v1/api/form/search?text=".concat(e))}static async getFormPagination(t){let{page:e,limit:r}=t;return a.Z.get("/v1/api/form/get-form-pagination?page=".concat(e,"&limit=").concat(r))}static async getAllFormState(){return a.Z.get("/v1/api/form/get-all-form-state")}static async getFormBaseOnDate(t){let{date_begin:e,date_over:r}=t;return a.Z.get("/v1/api/form/get-form-base-on-date?date_begin=".concat(e,"&date_over=").concat(r))}static async deleteFormForever(t){let{form_id:e}=t;return a.Z.delete("/v1/api/form/delete-form-forever?form_id=".concat(e))}static async setTitleForm(t){let{form_id:e,value:r}=t;return await a.Z.post("/v1/api/form/set-title-form",{form_id:e,value:r})}static async getListFormDelete(){return a.Z.get("/v1/api/form/get-list-form-delete",{cache:"no-cache"})}static async addSubTitleItem(t){let{type:e,form_id:r}=t;return a.Z.post("/v1/api/form/add-sub-title-item",{type:e,form_id:r})}static async deleteTitleSubItem(t){let{title_sub_id:e,form_id:r}=t;return a.Z.delete("/v1/api/form/delete-sub-title-item?form_id=".concat(r,"&title_sub_id=").concat(e))}static async changeModeForm(t){let{mode:e,form_id:r}=t;return a.Z.post("/v1/api/form/change-form-mode",{mode:e,form_id:r})}static async changeModeDisplay(t){let{mode:e,form_id:r}=t;return a.Z.post("/v1/api/form/change-mode-display",{mode:e,form_id:r})}static async updateSubTitle(t){let{form_title_sub_id:e,form_title_sub_content:r,form_id:o}=t;return a.Z.post("/v1/api/form/update-sub-title-text",{form_title_sub_content:r,form_title_sub_id:e,form_id:o})}static async updateSubTitleDescription(t){let{header_value:e,value:r,title_sub_id:o,form_id:n}=t;return a.Z.post("/v1/api/form/update-sub-title-description",{header_value:e,value:r,title_sub_id:o,form_id:n})}static async setModeImageForm(t){let{form_id:e,mode:r}=t;return a.Z.post("/v1/api/form/update-form-title-mode-image",{form_id:e,mode:r})}static async uploadTitleImage(t){return a.Z.post("/v1/api/form/upload-sub-title-image",t)}static async deleteFormId(t){let{form_id:e}=t;return a.Z.delete("/v1/api/form/delete-form-id?form_id=".concat(e))}static async getFormGuess(t){let{form_id:e,options:r}=t;return a.Z.get("/v1/api/form/get-form-guess?form_id=".concat(e),r)}static async updateInputItemForm(t,e){return a.Z.post("/v1/api/form/update-form",{inputItem:t,form:e})}static async updateForm(t){return a.Z.post("/v1/api/form/update-form",{form:t})}static async uploadCover(t){return a.Z.post("/v1/api/form/upload-cover",t)}static async uploadAvatar(t){return a.Z.post("/v1/api/form/upload-avatar",t)}static async deleteAvatar(t,e){return a.Z.post("/v1/api/form/delete-avatar",{form_id:t,mode:e})}static async deleteCover(t){return a.Z.post("/v1/api/form/delete-cover",{form_id:t})}static async updateSettingInput(t,e,r){return a.Z.post("/v1/api/form/update-input-item-setting",{form:t,input_id:e,input_id_setting:r})}static async addBackground(t){return a.Z.post("/v1/api/form/add-background",{form:t})}static async addAvatar(t){return a.Z.post("/v1/api/form/add-avatar",{form:t})}static async getInfoFormNotification(t){let{form_id:e,notification_id:r}=t;return a.Z.get("/v1/api/form/info-form-notification?form_id=".concat(e,"&notification_id=").concat(r))}}e.Z=o},6067:function(t,e,r){"use strict";var a=r(2970);class o{static async addNewFormReport(t){return a.Z.post("/v1/api/form-answer/add-new-form-report",{formAnswer:t})}static async getFormAnswer(t){return a.Z.get("/v1/api/form-answer/get-form-answer?form_id=".concat(t))}static async getFormTotalView(){return a.Z.get("/v1/api/form-answer/get-form-view")}static async getTotalFormAnswer(){return a.Z.get("/v1/api/form-answer/get-total-form-answer")}static async uploadLoadFile(t){return a.Z.post("/v1/api/form-answer/upload-file-answers",t)}static async increaseViewFormAnswer(t){let{form_id:e}=t;return a.Z.post("/v1/api/form-answer/update-form-views",{form_id:e})}}e.Z=o}},function(t){t.O(0,[6990,9154,828,6176,8792,2325,9782,5992,2971,8069,1744],function(){return t(t.s=780)}),_N_E=t.O()}]);