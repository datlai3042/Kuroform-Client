(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8227],{1737:function(e,t,i){Promise.resolve().then(i.bind(i,1954))},8306:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,i(843).Z)("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]])},703:function(e,t,i){"use strict";i.d(t,{default:function(){return r.a}});var s=i(7447),r=i.n(s)},7447:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{getImageProps:function(){return l},default:function(){return o}});let s=i(6921),r=i(8630),a=i(1749),n=s._(i(536)),l=e=>{let{props:t}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}},o=a.Image},1954:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return A}});var s=i(7437),r=i(2265),a=i(7410),n=i(1488),l=i(6968),o=i(5612),c=class extends l.z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,o.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,o.Gm)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){let{state:i}=e,s=super.createResult(e,t),{isFetching:r,isRefetching:a,isError:n,isRefetchError:l}=s,c=i.fetchMeta?.fetchMore?.direction,u=n&&"forward"===c,m=r&&"forward"===c,d=n&&"backward"===c,h=r&&"backward"===c;return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,o.Qy)(t,i.data),hasPreviousPage:(0,o.ZF)(t,i.data),isFetchNextPageError:u,isFetchingNextPage:m,isFetchPreviousPageError:d,isFetchingPreviousPage:h,isRefetchError:l&&!u&&!d,isRefetching:a&&!m&&!h}}},u=i(2438),m=e=>(0,u.r)({queryKey:["get-notification-type",e],queryFn:t=>{let{pageParam:i=1}=t;return n.Z.getNotificationType({type:e,page:i,limit:5})},initialPageParam:1,getNextPageParam:(e,t,i)=>e.metadata.notification_user.notifications.length>0?i+1:void 0},c,void 0),d=e=>{let{notification_item:t}=e;return(0,s.jsx)("div",{children:"NotificationAccountItem"})},h=i(8203),f=i(9319),x=i(7082),g=i(2151),p=i.n(g),v=i(703),b=i(8792),j=e=>{let{children:t,callbackDelete:i}=e;return(0,s.jsxs)("div",{className:"relative h-max p-[2rem_1rem] xl:p-[2rem_1.8rem] flex flex-col xl:flex-row xl:items-center gap-[2rem] bg-color-section-theme hover:bg-color-main hover:text-[#fff] text-text-theme rounded-xl hover:cursor-pointer",children:[t,(0,s.jsx)("button",{onClick:i,className:"xl:ml-auto w-max flex items-center gap-[1rem] p-[.5rem_.7rem] hover:bg-[#ffffff] hover:text-red-600 rounded-lg",children:(0,s.jsx)("span",{className:"text-red-600 underline text-[1.4rem]",children:"X\xf3a th\xf4ng b\xe1o n\xe0y"})})]})},N=i(568),w=()=>{let e=(0,N.D)({mutationKey:["delete-notification-item"],mutationFn:e=>{let{notification_id:t}=e;return n.Z.deleteNotificationItem({notification_id:t})}});return(0,r.useEffect)(()=>{e.isSuccess},[e.isSuccess]),e},y=i(8411),_=i(828),P=e=>{var t,i,a,n,l,o,c;let{notification_item:u}=e,m=(0,x.NL)(),d=(0,_.I0)(),g=(0,f.Z)({form_id:u.core.form_id,active:!0,notification_id:u._id}),N=(null===(a=g.data)||void 0===a?void 0:null===(i=a.metadata.form)||void 0===i?void 0:null===(t=i.form_avatar)||void 0===t?void 0:t.form_avatar_url)||(null===(l=g.data)||void 0===l?void 0:null===(n=l.metadata.form)||void 0===n?void 0:n.form_setting_default.form_avatar_default_url),P=null===(c=g.data)||void 0===c?void 0:null===(o=c.metadata.form)||void 0===o?void 0:o.form_title.form_title_value,M=w();return(0,r.useEffect)(()=>{if(M.isSuccess){let{notifications:e}=M.data.metadata.notification_user;m.invalidateQueries({queryKey:["get-notification-type"]}),d((0,y.mt)({notification:e}))}},[M.isSuccess]),(0,s.jsxs)(j,{callbackDelete:()=>{M.mutate({notification_id:u._id})},children:[N?(0,s.jsx)(v.default,{src:N,width:50,height:50,alt:"avatar form",className:"min-w-[6rem] h-[6rem] rounded-full"}):(0,s.jsx)("div",{className:"w-[6rem] h-[6rem] rounded-full",children:(0,s.jsx)(h.Z,{})}),(0,s.jsxs)("div",{className:"w-[80%]  flex flex-col gap-[1rem] text-[1.4rem] leading-10 ",children:[(0,s.jsxs)("div",{className:"h-max flex flex-wrap gap-[1rem] text-left break-words max-w-full",children:[(0,s.jsx)("span",{className:"font-bold",children:"Tin nhắn: "}),P?(0,s.jsxs)("span",{children:[" Form [",P,"] của "]}):(0,s.jsx)("div",{className:"w-[3rem] h-[2rem]",children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)("span",{className:"h-max ",children:u.core.message})]}),(0,s.jsxs)("span",{className:"text-left",children:["Thời gian: ",p()(new Date(u.create_time)).format("hh:mm Do MMMM YYYY")]}),(0,s.jsx)(b.default,{href:"/form/".concat(u.core.form_id,"/summary#").concat(u.core.form_answer_id),className:"text-left bg-blue-600 text-[#fff] p-[.5rem] rounded-lg w-max",children:"Xem chi tiết"})]})]})},M=e=>{let t=(0,_.I0)(),i=(0,x.NL)(),{notification_item:a}=e,n=w();return(0,r.useEffect)(()=>{if(n.isSuccess){let{notifications:e}=n.data.metadata.notification_user;i.invalidateQueries({queryKey:["get-notification-type"]}),t((0,y.mt)({notification:e}))}},[n.isSuccess]),(0,s.jsxs)(j,{callbackDelete:()=>{n.mutate({notification_id:a._id})},children:[(0,s.jsx)(v.default,{src:"/assets/images/icon/system.png",width:50,height:50,alt:"avatar form",className:"min-w-[6rem] h-[6rem] rounded-full"}),(0,s.jsxs)("div",{className:"w-[80%]  flex flex-col gap-[1rem] text-[1.4rem] leading-10",children:[(0,s.jsx)("p",{className:"text-left",children:"Th\xf4ng b\xe1o hệ thống"}),(0,s.jsxs)("p",{className:"h-max text-left break-words max-w-full",children:[(0,s.jsx)("span",{className:"font-bold",children:"Tin nhắn: "}),(0,s.jsx)("span",{className:"h-max ",children:a.core.message})]}),(0,s.jsxs)("span",{className:"text-left",children:["Thời gian: ",p()(new Date(a.create_time)).format("hh:mm Do MMMM YYYY")]})]})]})},C=i(6128);let k=e=>e.map(e=>"Account"===e.type?(0,s.jsx)(d,{notification_item:e},e._id):"Form_Answers"===e.type?(0,s.jsx)(P,{notification_item:e},e._id):"System"===e.type?(0,s.jsx)(M,{notification_item:e},e._id):void 0);var O=e=>{let{notification_data:t,isNextPage:i,isLoading:a,nextPageCallback:n}=e,l=(0,r.useMemo)(()=>k(t),[t]);return(0,s.jsxs)("div",{className:"flex flex-col gap-[6rem]",children:[(0,s.jsx)("div",{className:"flex flex-col gap-[4rem]",children:l}),!a&&t.length>0&&(0,s.jsx)("div",{className:"flex xl:justify-center text-[1.4rem] ",children:(0,s.jsx)("button",{onClick:n,className:"bg-blue-500 rounded-xl p-[1rem] text-[#fff]",children:i?"Tải th\xeam th\xf4ng b\xe1o":"Đ\xe3 hết dữ liệu"})})," ",!a&&0===t.length&&(0,s.jsx)(C.Z,{}),a&&(0,s.jsx)("div",{className:"min-w-full h-[30rem]",children:(0,s.jsx)(h.Z,{})})]})},R=()=>{var e;let[t,i]=(0,r.useState)("All"),a=m(t),n={onActiveRequireWrapper:e=>e?"bg-blue-400":"bg-gray-100",onActiveRequireCircle:e=>e?"right-0":" left-0"};return(0,s.jsxs)("div",{className:"w-full flex flex-col gap-[4rem]",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-[2rem]",children:[(0,s.jsxs)("button",{onClick:()=>i("All"),className:"bg-stone-400 w-[46%] xl:w-[20%] min-h-[8rem] p-[1rem] flex flex-col justify-start gap-[1rem] text-[#fff] text-[1.4rem]",children:[(0,s.jsx)("span",{children:"Tất cả th\xf4ng b\xe1o"}),(0,s.jsx)("div",{className:"".concat(n.onActiveRequireWrapper("All"===t)," relative w-[5rem] h-[2rem] flex items-center rounded-2xl"),children:(0,s.jsx)("div",{className:"".concat(n.onActiveRequireCircle("All"===t)," absolute bg-blue-200 w-[2rem] h-[2rem] rounded-full  ")})})]}),(0,s.jsxs)("button",{onClick:()=>i("Form_Answers"),className:"bg-teal-700 w-[46%] xl:w-[20%] min-h-[8rem] p-[1rem] flex flex-col justify-start gap-[1rem] text-[#fff] text-[1.4rem]",children:[(0,s.jsx)("span",{children:"Th\xf4ng b\xe1o form"}),(0,s.jsx)("div",{className:"".concat(n.onActiveRequireWrapper("Form_Answers"===t)," relative w-[5rem] h-[2rem] flex items-center rounded-2xl"),children:(0,s.jsx)("div",{className:"".concat(n.onActiveRequireCircle("Form_Answers"===t)," absolute bg-blue-200 w-[2rem] h-[2rem] rounded-full  ")})})]}),(0,s.jsxs)("button",{onClick:()=>i("System"),className:"bg-green-400 w-[46%] xl:w-[20%] min-h-[8rem] p-[1rem] flex flex-col justify-start gap-[1rem] text-[#fff] text-[1.4rem]",children:[(0,s.jsx)("span",{children:"Th\xf4ng b\xe1o hệ thống"}),(0,s.jsx)("div",{className:"".concat(n.onActiveRequireWrapper("System"===t)," relative w-[5rem] h-[2rem] flex items-center rounded-2xl"),children:(0,s.jsx)("div",{className:"".concat(n.onActiveRequireCircle("System"===t)," absolute bg-blue-200 w-[2rem] h-[2rem] rounded-full  ")})})]}),(0,s.jsxs)("button",{onClick:()=>i("Account"),className:"bg-red-400  w-[46%] xl:w-[20%] min-h-[8rem] p-[1rem] flex flex-col justify-start gap-[1rem] text-[#fff] text-[1.4rem]",children:[(0,s.jsx)("span",{children:"Th\xf4ng b\xe1o t\xe0i khoản"}),(0,s.jsx)("div",{className:"".concat(n.onActiveRequireWrapper("Account"===t)," relative w-[5rem] h-[2rem] flex items-center rounded-2xl"),children:(0,s.jsx)("div",{className:"".concat(n.onActiveRequireCircle("Account"===t)," absolute bg-blue-200 w-[2rem] h-[2rem] rounded-full  ")})})]})]}),(0,s.jsx)(O,{isLoading:a.isLoading,isNextPage:a.hasNextPage,notification_data:(null===(e=a.data)||void 0===e?void 0:e.pages.flatMap(e=>e.metadata.notification_user.notifications))||[],nextPageCallback:()=>{a.fetchNextPage()}})]})},Z=i(1529),A=()=>(0,s.jsx)(a.Z,{children:(0,s.jsxs)("div",{className:" flex flex-col  bg-color-gap-empty text-text-theme ",children:[(0,s.jsx)(Z.Z,{}),(0,s.jsxs)("div",{className:"flex-1 min-h-[60rem] h-full text-text-theme bg-[var(--bg-space)] p-[0rem_2.6rem_2rem_2.6rem] rounded-[1.2rem_1.2rem_0_0]",children:[(0,s.jsx)("h3",{className:"my-[2.2rem] !text-[2.8rem]",children:"Quản l\xed c\xe1c th\xf4ng b\xe1o"}),(0,s.jsx)("div",{className:"w-full bg-[var(--color-section-theme)] p-[2.8rem] rounded-[1.2rem_1.2rem_0_0]",children:(0,s.jsx)("div",{className:"min-h-[40px] flex items-center justify-between pb-[1rem] border-b-[.1rem] border-slate-200 ",children:(0,s.jsx)(R,{})})})]})]})})},1529:function(e,t,i){"use strict";var s=i(7437),r=i(2265),a=i(8306),n=i(7805),l=i(8670),o=i(4431),c=i(7907),u=i(6992),m=i(4859),d=i(7956);t.Z=()=>{let{openSidebar:e,setOpenSidebar:t}=(0,r.useContext)(o.SidebarContext),i=(0,c.usePathname)();return(0,s.jsxs)("div",{className:"w-full h-[6rem] flex items-center justify-between gap-[1rem] text-[1.3rem]  text-text-theme  bg-color-section-theme",children:[(0,s.jsxs)("div",{className:"flex items-center gap-[.5rem] ",children:[!e&&(0,s.jsx)(u.Z,{Icon:(0,s.jsx)(a.Z,{}),onClick:()=>t(!0)}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(n.Z,{size:16}),(0,s.jsx)("span",{className:"first-letter:uppercase text-[1.4rem] font-medium",children:i.replace("/","")})]}),(0,s.jsxs)("div",{className:"flex gap-[20px] ",children:[(0,s.jsxs)("div",{className:"p-[.2rem_.8rem] flex items-center gap-[.8rem] hover:bg-slate-200 rounded-md",title:"T\xecm kiếm",children:[(0,s.jsx)(l.Z,{className:"w-[1.6rem]"}),(0,s.jsx)("span",{children:"Search"})]}),(0,s.jsx)(d.default,{})]})]})}},6128:function(e,t,i){"use strict";var s=i(7437),r=i(703);i(2265),t.Z=()=>(0,s.jsxs)("div",{className:"w-full min-h-[40rem] h-full flex flex-col items-center justify-center gap-[4rem]",children:[(0,s.jsx)(r.default,{src:"/assets/images/icon/notification_empty.png",width:200,height:200,alt:"logo",className:"w-[20rem] h-[20rem]"}),(0,s.jsx)("p",{className:"text-[2rem]",children:"Danh s\xe1ch th\xf4ng b\xe1o hiện đang trống"})]})},4859:function(e,t,i){"use strict";var s=i(7437),r=i(2265),a=i(8085),n=i(703),l=i(8792);t.Z=()=>{let{theme:e}=(0,r.useContext)(a.ThemeContext);return(0,s.jsx)(l.default,{href:"/dashboard",className:"  p-[.6rem] rounded-xl",children:(0,s.jsx)(n.default,{src:"/assets/images/icon/logo/logo_home.png",width:70,height:70,quality:100,alt:"logo",className:"w-[4rem] h-[4rem] object-contain",unoptimized:!0})})}},7956:function(e,t,i){"use strict";i.r(t);var s=i(7437),r=i(2265),a=i(8085),n=i(703);t.default=()=>{let{theme:e,setTheme:t}=(0,r.useContext)(a.ThemeContext);return(0,s.jsxs)("button",{onClick:()=>{t(e=>"dark"===e?"light":"dark")},className:"relative text-text-theme min-w-[4rem] bg-[#fff] w-[6rem] h-[3rem] rounded-full",children:[(0,s.jsx)("div",{className:"".concat("light"===e?"animate-rtl bg-[#fff]":" animate-ltr bg-[#fff]"," w-[2.2rem] h-[2.2rem] rounded-full absolute top-[50%] translate-y-[-50%]  ")}),"light"===e?(0,s.jsx)(n.default,{src:"/assets/images/icon/theme/bg_dark.jpg",width:18,height:18,alt:"icon",className:"w-full h-full rounded-full object-cover",unoptimized:!0}):(0,s.jsx)(n.default,{src:"/assets/images/icon/theme/bg_light.jpg",width:18,height:18,alt:"icon",className:"w-full h-full rounded-full",unoptimized:!0})]})}},1488:function(e,t,i){"use strict";var s=i(2970);class r{static async getAllNotification(){return s.Z.get("/v1/api/notification/get-all-notification",{cache:"no-store"})}static async getNotificationType(e){let{type:t,page:i,limit:r}=e;return s.Z.get("/v1/api/notification/get-notification-type?type=".concat(t,"&page=").concat(i,"&limit=").concat(r),{cache:"no-store"})}static async deleteNotificationItem(e){let{notification_id:t}=e;return s.Z.delete("/v1/api/notification/delete-notification-item?notification_id=".concat(t))}}t.Z=r},9319:function(e,t,i){"use strict";var s=i(5137),r=i(3667);t.Z=e=>{let{form_id:t,active:i,notification_id:a}=e;return(0,r.a)({queryKey:["info-form-notification",t],queryFn:()=>s.Z.getInfoFormNotification({form_id:t,notification_id:a}),enabled:i})}},5612:function(e,t,i){"use strict";i.d(t,{Gm:function(){return r},Qy:function(){return l},ZF:function(){return o}});var s=i(6063);function r(e){return{onFetch:(t,i)=>{let r=async()=>{let i;let r=t.options,l=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],c=t.state.data?.pageParams||[],u=!1,m=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},d=(0,s.cG)(t.options,t.fetchOptions),h=async(e,i,r)=>{if(u)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);let a={queryKey:t.queryKey,pageParam:i,direction:r?"backward":"forward",meta:t.options.meta};m(a);let n=await d(a),{maxPages:l}=t.options,o=r?s.Ht:s.VX;return{pages:o(e.pages,n,l),pageParams:o(e.pageParams,i,l)}};if(l&&o.length){let e="backward"===l,t={pages:o,pageParams:c},s=(e?n:a)(r,t);i=await h(t,s,e)}else{i=await h({pages:[],pageParams:[]},c[0]??r.initialPageParam);let t=e??o.length;for(let e=1;e<t;e++){let e=a(r,i);i=await h(i,e)}}return i};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i):t.fetchFn=r}}}function a(e,{pages:t,pageParams:i}){let s=t.length-1;return e.getNextPageParam(t[s],t,i[s],i)}function n(e,{pages:t,pageParams:i}){return e.getPreviousPageParam?.(t[0],t,i[0],i)}function l(e,t){return!!t&&null!=a(e,t)}function o(e,t){return!!t&&!!e.getPreviousPageParam&&null!=n(e,t)}},568:function(e,t,i){"use strict";i.d(t,{D:function(){return m}});var s=i(2265),r=i(1793),a=i(5139),n=i(4614),l=i(6063),o=class extends n.l{#e;#t=void 0;#i;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.Ym)(t.mutationKey)!==(0,l.Ym)(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#r(),this.#a()}mutate(e,t){return this.#s=t,this.#i?.removeObserver(this),this.#i=this.#e.getMutationCache().build(this.#e,this.options),this.#i.addObserver(this),this.#i.execute(e)}#r(){let e=this.#i?.state??(0,r.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.V.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,i=this.#t.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,i),this.#s.onSettled?.(e.data,null,t,i)):e?.type==="error"&&(this.#s.onError?.(e.error,t,i),this.#s.onSettled?.(void 0,e.error,t,i))}this.listeners.forEach(e=>{e(this.#t)})})}},c=i(7082),u=i(826);function m(e,t){let i=(0,c.NL)(t),[r]=s.useState(()=>new o(i,e));s.useEffect(()=>{r.setOptions(e)},[r,e]);let n=s.useSyncExternalStore(s.useCallback(e=>r.subscribe(a.V.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),l=s.useCallback((e,t)=>{r.mutate(e,t).catch(u.Z)},[r]);if(n.error&&(0,u.L)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}}},function(e){e.O(0,[6990,9154,1749,828,6176,8792,2325,3667,5992,7410,2971,8069,1744],function(){return e(e.s=1737)}),_N_E=e.O()}]);