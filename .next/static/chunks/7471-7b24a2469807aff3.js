"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7471],{5624:function(e,t,r){r.d(t,{Z:function(){return v}});var l=r(7437),i=r(2265),n=r(9564),a=e=>{let{dataRender:t,label:r,disable:a=!1,clear:o=!1,onChange:s,defaultValue:d}=e,[u,c]=(0,i.useState)(!1),[m,p]=(0,i.useState)(d||void 0),f=(0,i.useRef)(null),v=(0,i.useRef)(null);return(0,i.useEffect)(()=>{f.current&&v.current&&u&&(f.current.scrollTop=v.current.offsetTop)},[u]),(0,i.useEffect)(()=>{p(d)},[d]),(0,i.useEffect)(()=>{p(void 0)},[t]),(0,i.useEffect)(()=>{o&&p(void 0)},[o]),(0,l.jsxs)("button",{disabled:a,onClick:e=>{e.preventDefault(),e.stopPropagation(),c(e=>!e)},className:"relative min-w-[18rem] text-[1.4rem] border-[.1rem] border-[#ccc] w-max  max-h-[8rem] xl:h-[3rem] py-[.3rem] flex items-center justify-center gap-[1rem] rounded-lg disabled:cursor-not-allowed ",children:[(0,l.jsx)("span",{children:(null==m?void 0:m.label)||r}),u&&(0,l.jsx)("div",{className:"absolute bottom-0  w-full z-[3] top-[4rem] right-[0rem] left-0",children:(0,l.jsx)(n.Z,{setOpenModel:c,children:(0,l.jsx)("ul",{ref:f,className:"scroll-text-size text-[1.3rem]  w-full max-h-[16rem]  overflow-y-scroll bg-[#ffffff] text-[#000] border-[.1rem] border-gray-200 outline-none rounded-lg",children:t.map((e,t)=>e.label===(null==m?void 0:m.label)?(0,l.jsx)("li",{ref:v,className:"bg-blue-400 p-[1rem_2rem] hover:cursor-pointer flex items-center justify-center",children:m.label},m.label+t):(0,l.jsx)("li",{onClick:()=>{s&&s(e),p({...e})},className:"p-[1rem_2rem] hover:bg-blue-200 hover:cursor-pointer flex items-center justify-center",children:e.label},(null==e?void 0:e.label)+t))})})})]})},o=r(2970);class s{static async getAllProvinces(){return o.Z.get("/v1/api/common/address/get-all-provinces")}static async getDistrictWithPattern(e){let{province_code:t}=e;return o.Z.get("/v1/api/common/address/get-district-with-pattern?province_code=".concat(t))}static async getWardWithPattern(e){let{district_code:t}=e;return o.Z.get("/v1/api/common/address/get-ward-with-pattern?district_code=".concat(t))}}var d=r(3667),u=()=>(0,d.a)({queryKey:["get-all-provinces"],queryFn:()=>s.getAllProvinces()}),c=e=>{let{province_code:t}=e;return(0,d.a)({queryKey:["get-all-provinces",t],queryFn:()=>s.getDistrictWithPattern({province_code:t}),enabled:!!t})},m=e=>{let{district_code:t}=e;return(0,d.a)({queryKey:["get-all-provinces",t],queryFn:()=>s.getWardWithPattern({district_code:t}),enabled:!!t})},p=r(828),f=r(3311),v=e=>{var t,r,n,o,s,d,v,h,_;let{onChange:g,detail:x=!1,onCheckFullField:b,defaultValue:y}=e,[w,j]=(0,i.useState)(y?{code:+(null==y?void 0:y.province.value),name:null==y?void 0:null===(t=y.province)||void 0===t?void 0:t.label,name_with_type:(null===(r=y.province)||void 0===r?void 0:r.name_with_type)||"",path_with_type:(null===(n=y.province)||void 0===n?void 0:n.name_with_type)||""}:{code:void 0,name:"",name_with_type:"",path_with_type:""}),[N,Z]=(0,i.useState)(y?{code:+(null==y?void 0:y.district.value),name:null==y?void 0:null===(o=y.district)||void 0===o?void 0:o.label,name_with_type:(null===(s=y.district)||void 0===s?void 0:s.name_with_type)||"",path_with_type:(null===(d=y.district)||void 0===d?void 0:d.path_with_type)||""}:{code:void 0,name:"",name_with_type:"",path_with_type:""}),[I,C]=(0,i.useState)(y?{code:+(null==y?void 0:y.ward.value),name:null==y?void 0:null===(v=y.ward)||void 0===v?void 0:v.label,name_with_type:(null===(h=y.ward)||void 0===h?void 0:h.name_with_type)||"",path_with_type:(null===(_=y.ward)||void 0===_?void 0:_.path_with_type)||""}:{code:void 0,name:"",name_with_type:"",path_with_type:""}),[E,k]=(0,i.useState)((null==y?void 0:y.street)||""),S=(0,p.v9)(e=>e.address.provinces),A=(0,p.I0)(),F=u(),R=c({province_code:w.code}),T=m({district_code:N.code}),[q,M]=(0,i.useState)(!1),D=(0,i.useMemo)(()=>{let e=[];if(R.isSuccess){let{districts:t}=R.data.metadata;e=t.map(e=>({label:e.name,value:e.code,path_with_type:e.path_with_type,name_with_type:e.name_with_type}))}return e},[w.code,R.isSuccess]),P=(0,i.useMemo)(()=>{let e=[];if(T.isSuccess){let{wards:t}=T.data.metadata;e=t.map(e=>({label:e.name,value:e.code,path_with_type:e.path_with_type,name_with_type:e.name_with_type}))}return e},[S,N.code,T.isSuccess]);return(0,i.useEffect)(()=>{if(S.length>0)return;let e=[];if(F.isSuccess){var t;let{provinces:r}=null===(t=F.data)||void 0===t?void 0:t.metadata;e=r.map(e=>({label:e.name,value:e.code,name_with_type:e.name_with_type,path_with_type:e.name_with_type}))}A((0,f.tN)({provinces:e}))},[F.isSuccess]),(0,i.useEffect)(()=>{if(w.code||N.code||I.code||E){if(g){var e,t,r;let l="".concat(x?E:""," "),i="";!w.code||N.code||I.code?w.code&&N.code&&!I.code?i=N.path_with_type:w.code&&N.code&&I.code&&(i=I.path_with_type):i=w.path_with_type;let n="".concat(x?E:""," ").concat(i),a=i,o=[{type:"province",code:null==w?void 0:null===(e=w.code)||void 0===e?void 0:e.toString(),name_with_type:w.name_with_type,path_with_type:w.path_with_type},{type:"district",code:null==N?void 0:null===(t=N.code)||void 0===t?void 0:t.toString(),name_with_type:N.name_with_type,path_with_type:N.path_with_type},{type:"ward",code:null==I?void 0:null===(r=I.code)||void 0===r?void 0:r.toString(),name_with_type:I.name_with_type,path_with_type:I.path_with_type},{type:"street",code:"-1",name_with_type:w.code&&N.code&&I.code&&E?l:"",path_with_type:w.code&&N.code&&I.code&&E?l:""}];g({addressString:l,addressValidate:o,addressCore:a,address_full:n})}if(b)return x?b(!!w.name&&!!N.name&&!!I.name&&!!E):b(!!w.name&&!!N.name&&!!I.name)}},[w,N,I,E]),(0,l.jsxs)("div",{className:"p-[1rem_0rem] flex flex-col gap-[2rem]",children:[(0,l.jsxs)("div",{className:"flex flex-col xl:flex-row flex-wrap gap-[2rem]",children:[(0,l.jsx)(a,{defaultValue:null==y?void 0:y.province,dataRender:S,label:"Tỉnh / Th\xe0nh phố",onChange:e=>{w.code&&(M(!0),Z({code:void 0,name:"",name_with_type:"",path_with_type:""}),C({code:void 0,name:"",name_with_type:"",path_with_type:""}));let{label:t,value:r,name_with_type:l,path_with_type:i}=e;j(()=>({code:+r,name:t,name_with_type:l,path_with_type:i}))}}),(0,l.jsx)(a,{defaultValue:null==y?void 0:y.district,dataRender:D,label:"Quận / Huyện",onChange:e=>{q&&M(!1);let{label:t,value:r,name_with_type:l,path_with_type:i}=e;Z(()=>({code:+r,name:t,name_with_type:l,path_with_type:i}))},disable:void 0===w.code,clear:q}),(0,l.jsx)(a,{defaultValue:null==y?void 0:y.ward,dataRender:P,label:"Phường / X\xe3",onChange:e=>{q&&M(!1);let{label:t,value:r,name_with_type:l,path_with_type:i}=e;C(()=>({code:+r,name:t,name_with_type:l,path_with_type:i}))},disable:void 0===w.code||void 0===N.code,clear:q})]}),x&&(0,l.jsx)("input",{value:E,onChange:e=>k(e.target.value),placeholder:"Nhập địa chỉ chi tiết",className:"heading-answer group w-full h-[4rem] px-[.8rem] flex items-center  text-[1.4rem] break-words whitespace-pre-wrap  border-b-[.1rem] border-gray-300 rounded-lg outline-none resize-none text-[#000]"})]})}},7470:function(e,t,r){var l=r(7437),i=r(703),n=r(2265),a=r(9564),o=r(3050);t.Z=e=>{let{imageActive:t,imagesUrl:r,setOpenModel:s}=e,[d,u]=(0,n.useState)(t);return(0,n.useEffect)(()=>{let e=document.querySelector("body");return e&&(e.style.overflow="hidden"),()=>{e.style.overflow="scroll"}},[]),(0,l.jsx)(o.Z,{children:(0,l.jsx)("div",{className:"animate-modeScreen transition-[scale] duration-300 fixed inset-0 min-h-screen  flex items-center justify-center pt-[4rem] bg-[rgba(0,0,0,.87)] z-[1000] hover:cursor-pointer",children:(0,l.jsx)(a.Z,{setOpenModel:s,width:"w-max",height:"h-[60rem]",children:(0,l.jsxs)("div",{className:"w-full  xl:h-[60rem]  flex flex-col items-center gap-[5rem] ",children:[(0,l.jsx)("div",{className:"w-[35rem] h-[35rem] xl:w-[45rem] min-h-[70%] max-h-[70%]",children:(0,l.jsx)(i.default,{src:d,width:400,height:400,alt:"image form",className:"w-full h-full bg-[#ccc]",unoptimized:!1})}),(0,l.jsx)("div",{className:"  flex gap-[4rem] max-w-[30rem] xl:max-w-[80rem] pb-[2rem] mx-auto overflow-x-scroll scroll-images",children:r.map(e=>(0,l.jsxs)("div",{className:"group relative min-w-[8rem] min-h-[8rem] hover:cursor-pointer ",children:[(0,l.jsx)(i.default,{src:e,width:400,height:400,alt:"image form",className:"".concat(e===d?"z-[2] border-[.4rem] border-color-main":"border-[.4rem] border-[#ccc] group-hover:border-color-main"," group-hover:z-[2] absolute inset-0 w-full h-full transition-all duration-500 bg-[#ccc]"),onClick:()=>u(e)}),(0,l.jsx)("div",{className:"absolute inset-0 bg-[rgba(0,0,0,.6)]"})]},e))})]})})})})}},8119:function(e,t,r){var l=r(7437),i=r(7805),n=r(9108),a=r(703),o=r(2265),s=r(828),d=r(8194),u=r(7470);t.Z=e=>{let{images:t,type:r,page:c,colorMain:m}=e,[p,f]=(0,o.useState)(0),[v,h]=(0,o.useState)(!1),_=(0,o.useRef)(null),g=(0,o.useRef)(null),[x,b]=(0,o.useState)(0),y=(0,s.v9)(e=>e.form.formCoreOriginal),w=e=>{if(g.current&&_.current){var t;let r=-((null===(t=_.current)||void 0===t?void 0:t.getBoundingClientRect().width)*1);g.current.style.transform="translateX(".concat(r*e,"px)"),g.current.style.transition="all 0s",f(e)}};(0,o.useEffect)(()=>{if(g.current&&_.current){var e;let t=-((null===(e=_.current)||void 0===e?void 0:e.getBoundingClientRect().width)*1);g.current.style.transform="translateX(".concat(t*p,"px)"),g.current.style.transition="all 0s"}},[p]),(0,o.useEffect)(()=>{if(g.current&&_.current){var e;b(-((null===(e=_.current)||void 0===e?void 0:e.getBoundingClientRect().width)*1))}},[]);let j="Edit"===c?"w-[26rem] sm:w-[55rem] xl:w-[75rem] ":"w-[26rem] sm:w-[55rem] xl:w-[60rem]",N=y.form_title.form_title_sub.filter(e=>"Image"===e.type).length>4;return(0,l.jsx)("div",{className:"w-max min-w-full flex justify-center",children:(0,l.jsxs)("div",{ref:_,className:"".concat(j,"  relative h-[48rem] xl:h-[47rem] pb-[6rem]  overflow-y-hidden overflow-x-hidden"),children:[(0,l.jsxs)("div",{className:"w-full h-[30rem] relative",children:[(0,l.jsx)("button",{style:{backgroundColor:m},disabled:p+1>=t.length,onClick:()=>{p+1!==y.form_title.form_title_sub.length&&f(e=>e+=1)},className:"absolute top-[50%] translate-y-[-50%] right-0 z-[100] w-[3rem] h-[3rem] xl:w-[4rem] xl:h-[4rem] flex items-center justify-center    rounded-lg disabled:hover:cursor-not-allowed",children:(0,l.jsx)(i.Z,{color:"white"})}),(0,l.jsx)("div",{ref:g,className:"min-w-full max-h-[30rem] w-max  flex  items-center justify-center ",children:"Components"===r&&t.map(e=>(0,l.jsx)("div",{className:" max-h-[30rem] ".concat(j," flex  justify-center"),onClick:()=>h(!0),children:(0,l.jsx)(d.Z,{mode:"Slider",page:c,subTitleItem:e,className:"!h-[30rem] "})},e._id))}),(0,l.jsx)("button",{style:{backgroundColor:m},disabled:0===p,onClick:()=>{p+1!==1&&f(e=>e-=1)},className:"absolute top-[50%] translate-y-[-50%] left-0 w-[3rem] h-[3rem] xl:w-[4rem] xl:h-[4rem] flex items-center justify-center bg-[#ffffff] border-[.1rem]  rounded-lg disabled:hover:cursor-not-allowed",children:(0,l.jsx)(n.Z,{color:"white"})})]}),v&&(0,l.jsx)(u.Z,{imageActive:t[p].core.url,imagesUrl:t.map(e=>e.core.url),setOpenModel:h}),(0,l.jsx)("div",{className:"absolute bottom-[1rem]  left-[50%] translate-x-[-50%] flex gap-[2rem]",children:t.map((e,t)=>(0,l.jsx)("button",{className:"w-[1.6rem] h-[1.6rem] flex items-center justify-center rounded-full bg-slate-200 ",onClick:()=>f(t),children:t===p&&(0,l.jsx)("div",{className:"bg-color-main w-[60%] h-[60%] rounded-full "})},t))}),"Components"===r&&(0,l.jsx)("div",{className:"".concat(N?"":"justify-center"," absolute bottom-[4rem] w-full left-[50%] translate-x-[-50%] flex justify-center gap-[4rem] pb-[2rem]  scroll-images overflow-x-auto hover:cursor-pointer"),children:t.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>w(t),className:"".concat(t===p?"z-[3] border-[.4rem] border-color-main ":"border-[.4rem] border-transparent hover:border-color-main","  relative group min-w-[7rem] min-h-[7rem] rounded-lg "),children:[(0,l.jsx)(a.default,{src:e.core.url,width:70,height:70,alt:"image form",className:"group-hover:z-[3] transition-all duration-500 absolute inset-0 w-full h-full  flex items-center justify-center  bg-[#000000] opacity-75 "}),(0,l.jsx)("div",{className:" absolute inset-0 bg-[rgba(0,0,0,.6)] z-[2]"})]},e._id))})]})})}},3050:function(e,t,r){r(2265);var l=r(4887);t.Z=e=>{let{children:t}=e;return(0,l.createPortal)(t,document.querySelector("body"))}},9964:function(e,t,r){r.d(t,{H:function(){return a}});var l=r(7437),i=r(7159),n=r(2265);let a=(0,n.createContext)({formAnswer:{inputFormData:[],inputFormErrors:[],inputFormRequire:[],openModelError:!1,form_answer_id:"",submitState:"clear"},setFormAnswer:()=>{}});t.Z=e=>{let{formCore:t,children:r,form_answer_id:o}=e,[s,d]=(0,n.useState)(()=>({inputFormData:t.form_inputs.map(e=>"OPTION_MULTIPLE"===e.type?{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",value:[],type:e.type}:"OPTION"===e.type?{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",type:e.type,value:{option_value:"",option_id:""}}:"ADDRESS"===e.type?{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",value:{addressString:"",address_full:"",addressValidate:i.Oy,addressCore:""},type:e.type}:{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",value:"",type:e.type}),inputFormErrors:[],form_answer_id:o,inputFormRequire:t.form_inputs.reduce((e,t)=>(t.core.setting.require&&e.push({_id:t._id,title:t.input_title,checkRequire:!1}),e),[]),openModelError:!1,submitState:"clear"}));return(0,l.jsx)(a.Provider,{value:{formAnswer:s,setFormAnswer:d},children:r})}},4184:function(e,t,r){var l=r(7437);r(2265),t.Z=e=>{let{textContent:t,children:r,...i}=e;return(0,l.jsxs)("button",{...i,className:" ".concat(i.className),children:[t,r]})}},6715:function(e,t,r){var l=r(7437);r(2265),t.Z=e=>{let{children:t,...r}=e;return(0,l.jsx)("div",{...r,children:t})}},2250:function(e,t,r){var l=r(7437);let i=(0,r(2265).forwardRef)((e,t)=>{let{children:r,...i}=e;return(0,l.jsx)("div",{...i,ref:t,children:r})});t.Z=i},2200:function(e,t,r){var l=r(7437);r(2265),t.Z=e=>{let{color:t,width:r="min-w-[3rem]",height:i="min-h-[3rem]"}=e,n="".concat(r," ").concat(i);return(0,l.jsx)("div",{style:{borderTopColor:t||"",borderRightColor:t||""},className:"".concat(n," border-t-color-main border-r-color-main border-l-transparent border-b-transparent inline-block  animate-spin rounded-full border-[.4rem] border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white"),role:"status"})}},2156:function(e,t,r){var l=r(7437);r(2265),t.Z=()=>(0,l.jsx)("div",{className:" text-text-theme",children:(0,l.jsxs)("div",{className:"w-full h-[2rem] flex items-center gap-[1rem] ",children:[(0,l.jsx)("div",{className:"w-[1rem] h-[1rem] bg-[#ccc] rounded-full"}),(0,l.jsx)("span",{className:"text-[1.2rem] font-semibold",children:"Chưa upload"})]})})},4314:function(e,t,r){var l=r(7437);r(2265),t.Z=()=>(0,l.jsxs)("div",{className:"w-full h-[2rem] flex items-center gap-[1rem] text-green-400",children:[(0,l.jsx)("div",{className:"w-[1rem] h-[1rem] bg-green-400 rounded-full"}),(0,l.jsx)("span",{className:"text-[1.2rem] font-semibold",children:"Tải l\xean th\xe0nh c\xf4ng"})]})},8194:function(e,t,r){var l=r(7437),i=r(5292),n=r(2200),a=r(136),o=r(5137),s=r(525),d=r(4048),u=r(1216),c=r(568),m=r(489),p=r(703),f=r(2265),v=r(828),h=r(7470),_=r(5550),g=r(5984),x=r(1231);t.Z=e=>{var t,r;let{subTitleItem:b,className:y,page:w,mode:j}=e,N=(0,v.v9)(e=>e.form.formCoreOriginal),Z=(0,f.useRef)(null),I=(0,v.I0)(),[C,E]=(0,f.useState)(!1),{attributes:k,listeners:S,setNodeRef:A,transform:F,transition:R}=(0,d.nB)({id:b._id}),T={transition:R,transform:u.ux.Transform.toString(F)},q=(0,c.D)({mutationKey:["upload-title-image",b._id],mutationFn:e=>o.Z.uploadTitleImage(e),onSuccess:e=>{let{form:t}=e.metadata;I((0,i.ow)({form:t}))}}),M=(0,s.Z)(),D=()=>{let e=structuredClone(N);e.form_title.form_title_sub=e.form_title.form_title_sub.filter(e=>e._id!==b._id),M.mutate(e)},P=N.form_title.form_title_color||N.form_setting_default.form_title_color_default;if(!(null==b?void 0:null===(t=b.core)||void 0===t?void 0:t.url)&&"Edit"===w)return(0,l.jsxs)("div",{className:"flex flex-col gap-[1rem]",children:[(0,l.jsxs)("button",{className:"flex items-center gap-[.5rem] text-[1.4rem] font-bold text-textHeader hover:text-slate-800",onClick:D,disabled:M.isPending,children:[(0,l.jsx)(m.Z,{size:16}),a.R.title.optionImage.remove]}),(0,l.jsxs)("div",{className:"flex items-center gap-[2rem]",children:[(0,l.jsx)("button",{onClick:()=>{Z.current&&(Z.current.value="",Z.current.click())},className:"btn-primarily min-w-[7rem] w-max h-[4rem] text-[1.4rem] flex justify-center items-center gap-[1rem] p-[.1rem_.7rem] text-[#fff]  rounded-lg",children:a.R.title.optionImage.complete}),q.isPending&&(0,l.jsx)(n.Z,{color:P})]}),(0,l.jsx)("input",{type:"file",hidden:!0,ref:Z,onChange:e=>{if(e.target&&e.target.files){let t=e.target.files[0],{_check:r,message:l}=(0,_.s)({file:t,sizeAllowOptions:3});if(!r)return I((0,g.DT)({toast_item:{_id:(0,x.Z)(),type:"ERROR",core:{message:l},toast_title:"Lỗi File Upload"}}));let i=new FormData;i.append("file",e.target.files[0]),i.append("titleSubId",b._id),i.append("form_id",N._id),q.mutate(i)}}})]});let V="Normal"===N.form_title.form_title_mode_image?"!w-[30rem]":"w-full",O=N.form_title.form_title_sub.reduce((e,t)=>{var r,l;return"Image"===t.type&&(null==t?void 0:null===(r=t.core)||void 0===r?void 0:r.url)&&e.push(null==t?void 0:null===(l=t.core)||void 0===l?void 0:l.url),e},[]);return(0,l.jsxs)("div",{className:"".concat("Edit"===w?"w-[20rem] sm:w-[51rem] xl:w-[50rem] ":"w-full xl:w-[62rem]  items-center"," ").concat(V,"  flex flex-col   gap-[.5rem]   outline-none rounded-lg "),ref:A,...k,...S,style:T,children:["Edit"===w&&"Normal"===j&&(0,l.jsxs)("button",{className:"flex items-center gap-[.5rem] text-[1.4rem] font-bold text-textHeader hover:text-slate-800 ",onClick:D,disabled:M.isPending,children:[(0,l.jsx)(m.Z,{size:16}),a.R.title.optionImage.remove]}),(null==b?void 0:null===(r=b.core)||void 0===r?void 0:r.url)&&(0,l.jsx)("div",{className:"w-full h-[30rem] flex justify-center   ",children:(0,l.jsx)(p.default,{onClick:()=>E(!0),width:100,height:100,quality:100,unoptimized:!0,alt:"avatar title",src:b.core.url,className:"".concat(y," ").concat("Normal"===j?"Edit"===w?"max-h-[40rem] w-full":"  w-full":"","  ").concat("Slider"===j?"Edit"===w?"w-full xl:w-[70%] h-[30rem]":"h-[30rem] w-[70%]":""," 	  object-center rounded-lg")})}),C&&(0,l.jsx)(h.Z,{imageActive:b.core.url,imagesUrl:O,setOpenModel:E})]})}},2301:function(e,t,r){var l=r(7437);r(2265);var i=r(828);t.Z=e=>{var t;let{children:r,error:n,inputItemInArrayGlobal:a,input_id:o,write:s}=e;return(0,i.v9)(e=>e.form.colorCore),(0,l.jsx)("div",{id:"_inputid_".concat(o),className:"".concat(n&&n.error&&s||(null==a?void 0:null===(t=a.globalError)||void 0===t?void 0:t.state)?"input-answer-invalid":" border-[.3rem] border-transparent "," relative w-full min-h-[24rem] h-max p-[2rem_3rem] duration-300 transition-all flex flex-col justify-center gap-[1.8rem]  rounded-lg"),children:r})}},7243:function(e,t,r){r.d(t,{Z:function(){return o}});var l=r(7437);r(2265);var i=r(6715),n=r(2985),a=e=>{let{type:t,message:r}=e;return(0,l.jsxs)(i.Z,{className:"flex items-center gap-[1rem] ",children:[(0,l.jsx)(n.Z,{className:"text-red-800"}),(0,l.jsxs)("span",{className:"text-[1.4rem] text-red-800",children:["".concat(t?"Lỗi #"+t+": ":"")," ",r]})]})},o=e=>{var t,r;let{inputItem:i,inputItemInArrayGlobal:n}=e;return(0,l.jsx)(a,{message:i.core.setting.input_error_state?i.core.setting.input_error:null==n?void 0:null===(t=n.globalError)||void 0===t?void 0:t.message,type:null==n?void 0:null===(r=n.globalError)||void 0===r?void 0:r.type})}},9067:function(e,t,r){var l=r(7437),i=r(6369),n=r(703);r(2265),t.Z=e=>{var t,r,a,o,s,d,u,c,m;let{formCore:p}=e,f=(null==p?void 0:null===(t=p.form_title)||void 0===t?void 0:t.form_title_color)||p.form_setting_default.form_title_color_default,v=(null===(r=p.form_background)||void 0===r?void 0:r.form_background_iamge_url)||p.form_setting_default.form_background_default_url;null===(a=p.form_background)||void 0===a||a.position,null===(o=p.form_background)||void 0===o||o.mode_show;let h=(null===(s=p.form_background)||void 0===s?void 0:s.padding.x)||0,_=(null===(d=p.form_background)||void 0===d?void 0:d.padding.y)||0,g="".concat(_,"% ").concat(h,"%"),x=(0,i.G0)({formCore:p,mode:"answer"});return(0,l.jsxs)("div",{className:"relative w-full h-[32.5rem] rounded-2xl max-h-[32.5rem] ",children:[((null===(u=p.form_background)||void 0===u?void 0:u.form_background_iamge_url)||p.form_background_state)&&(0,l.jsx)("div",{style:{backgroundColor:(null===(c=p.form_background)||void 0===c?void 0:c.backgroundColor)||"#fff",padding:g},className:"w-full h-full rounded-2xl relative overflow-hidden",children:(0,l.jsx)(n.default,{style:x.style_background,src:v,width:800,height:160,quality:100,alt:"form background",className:"w-full h-full min-h-[32.5rem] max-h-[32.5rem]  rounded-lg absolute"})}),!(null===(m=p.form_background)||void 0===m?void 0:m.form_background_iamge_url)&&!p.form_background_state&&(0,l.jsx)("div",{style:{backgroundColor:f},className:"w-full  h-full rounded-lg opacity-90"})]})}},1625:function(e,t,r){var l=r(7437);r(2265),t.Z=e=>{let{formCore:t,inputItem:r}=e;return(0,l.jsxs)("p",{style:({styleTitle:()=>({fontSize:r.core.setting.input_size||t.form_setting_default.input_size,color:r.core.setting.input_color||t.form_setting_default.input_color,fontStyle:r.core.setting.input_style||t.form_setting_default.input_style})}).styleTitle(),className:"flex items-center gap-[.6rem] text-[2rem] font-medium",children:[r.input_title||"Kh\xf4ng c\xf3 ti\xeau đề",r.core.setting.require&&(0,l.jsx)("span",{className:"text-red-800",children:"*"})]})}},6366:function(e,t,r){var l=r(7437),i=r(6715);r(2265),t.Z=e=>{let{children:t}=e;return(0,l.jsx)(i.Z,{className:" w-full min-h-[18rem] h-max  bg-[#ffffff]  rounded-xl",children:t})}},2214:function(e,t,r){var l=r(7437),i=r(6715),n=r(2869),a=r(2265),o=r(9964),s=r(6366),d=r(1909),u=r(3609),c=r(1625),m=r(4433),p=r(2301),f=r(7243);t.Z=e=>{var t,r;let{inputItem:v,formCore:h}=e,{formAnswer:{inputFormErrors:_,inputFormData:g,submitState:x},setFormAnswer:b}=(0,a.useContext)(o.H),y=(0,a.useMemo)(()=>(0,u.cC)({inputFormErrors:_,inputItem:v,inputFormData:g}),[v,_,g]),[w,j]=(0,a.useState)((null===(t=y.input)||void 0===t?void 0:t.value)||""),[N,Z]=(0,a.useState)(!1);return(0,l.jsx)(s.Z,{children:(0,l.jsxs)(p.Z,{inputItemInArrayGlobal:y,input_id:v._id,write:N,children:[(0,l.jsx)(c.Z,{formCore:h,inputItem:v}),(0,l.jsx)(i.Z,{className:"flex flex-col gap-[.3rem]",children:(0,l.jsxs)(i.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:[(0,l.jsx)("input",{disabled:"pending"===x,defaultValue:w,className:"\n							)}  ".concat(m.Z.StyleTitle({formCore:h,inputItem:v})," w-[90%] h-full pb-[2rem] border-b-[.1rem] border-gray-300  outline-none text-[1.7rem] placeholder:text-[1.3rem]"),onChange:e=>j(e.target.value),onFocus:()=>{Z(!0),(0,u.EQ)({setFormAnswer:b,inputFormErrors:_,inputItem:v})},onBlur:()=>{N&&(0,u.qy)({inputItem:v,inputValue:w,setFormAnswer:b,validateCallback:d.q})},placeholder:v.core.setting.placeholder}),(0,l.jsx)(i.Z,{className:"absolute z-[2] right-[1rem]",title:"",children:(0,l.jsx)(n.Z,{className:" text-textMain opacity-50",size:18})})]})}),(null==y?void 0:null===(r=y.globalError)||void 0===r?void 0:r.state)&&(0,l.jsx)(f.Z,{inputItem:v,inputItemInArrayGlobal:y})]})})}},7183:function(e,t,r){r.d(t,{Z:function(){return h}});var l=r(7437),i=r(2265),n=r(6366),a=r(6715),o=r(2250),s=r(9964),d=r(4105),u=r(3609),c=e=>{let{inputItem:t,value:r}=e,i={checkMinLength:(e,t,r)=>{let l=e.length;return e.length&&l<t?"text-red-800 font-bold underline":""},checkMaxLength:(e,t,r)=>{let l=e.length;return e.length?l>t?"text-red-800 font-bold underline":l<=t?"":void 0:""}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"".concat(i.checkMinLength(r,t.core.setting.minLength,t.core.setting.require),"  font-bold "),children:t.core.setting.minLength}),(0,l.jsx)("span",{children:"/"}),(0,l.jsx)("span",{className:"".concat(i.checkMaxLength(r,t.core.setting.maxLength,t.core.setting.require),"  font-bold "),children:r.length<t.core.setting.maxLength?t.core.setting.maxLength:r.length})]})},m=r(4433),p=r(1625),f=r(2301),v=r(7243),h=e=>{var t,r,h;let{inputItem:_,formCore:g}=e,{formAnswer:{inputFormErrors:x,inputFormData:b,submitState:y},setFormAnswer:w}=(0,i.useContext)(s.H),[j,N]=(0,i.useState)(!1),Z=(0,i.useMemo)(()=>(0,u.cC)({inputFormErrors:x,inputItem:_,inputFormData:b}),[_,x,b]),I=(0,i.useRef)(null),C=e=>{if(j&&I.current){let e=I.current.textContent;(0,u.qy)({inputItem:_,inputValue:e,setFormAnswer:w,validateCallback:d.W})}};return(0,i.useEffect)(()=>{if(I.current){var e;I.current.textContent=null===(e=Z.input)||void 0===e?void 0:e.value}},[]),(0,l.jsx)(n.Z,{children:(0,l.jsxs)(f.Z,{inputItemInArrayGlobal:Z,input_id:_._id,write:j,children:[(0,l.jsx)(p.Z,{inputItem:_,formCore:g}),(0,l.jsxs)(a.Z,{className:"flex flex-col gap-[.3rem]",children:[(0,l.jsx)(a.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:(0,l.jsx)(o.Z,{ref:I,className:"".concat(m.Z.StyleTitle({formCore:g,inputItem:_})," heading-answer group w-full min-h-[2rem] pb-[2rem] text-[1.7rem] break-words whitespace-pre-wrap h-max border-b-[.1rem] border-gray-300 rounded-lg outline-none resize-none "),onClick:()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.focus()},onBlur:e=>C(e),onFocus:()=>{N(!0),(0,u.EQ)({setFormAnswer:w,inputFormErrors:x,inputItem:_})},spellCheck:!1,contentEditable:"pending"!==y,"data-text":"".concat((null===(t=_.core.setting)||void 0===t?void 0:t.placeholder)||"Typing your text"),suppressContentEditableWarning:!0,tabIndex:0})}),(0,l.jsx)("p",{className:"absolute bottom-[2.5rem] right-[2.5rem] text-[1.2rem]",children:(0,l.jsx)(c,{value:null===(r=Z.input)||void 0===r?void 0:r.value,inputItem:_})})]}),(null==Z?void 0:null===(h=Z.globalError)||void 0===h?void 0:h.state)&&(0,l.jsx)(v.Z,{inputItem:_,inputItemInArrayGlobal:Z})]})})}},3609:function(e,t,r){r.d(t,{EQ:function(){return y},VQ:function(){return h},Z:function(){return p},cC:function(){return b},l1:function(){return f},qy:function(){return w},wY:function(){return m}});var l=r(4105),i=r(1909),n=r(7159),a=r(9808),o=r(8252),s=r(1508),d=r(5580),u=r(2546);let c=(e,t,r,l,i)=>{e(e=>{let n=[],a=structuredClone(e);return e.inputFormErrors.some(e=>e._id===t)?(n=e.inputFormErrors.map(e=>(e._id===t&&(e.title=r,e.type=l,e.message=i),e)),{...a,inputFormErrors:n}):((n=[...a.inputFormErrors]).push({_id:t,title:r,type:l,message:i}),a.inputFormErrors=n,a)})},m=(e,t)=>{e(e=>{let r=structuredClone(e);return r.inputFormErrors=r.inputFormErrors.filter(e=>e._id!==t?e:null),r})},p=(e,t,r)=>{e(e=>{let l=structuredClone(e);return l.inputFormRequire=e.inputFormRequire.map(e=>(e._id===t&&(e.checkRequire=r),e)),l})},f=e=>{let{callback:t,input_id:r,input_value:l}=e;t(e=>{let t=structuredClone(e);return t.inputFormData=e.inputFormData.map(e=>(e._id===r&&"OPTION_MULTIPLE"===e.type||e._id===r&&"OPTION"===e.type?e.value=l:e._id===r&&(e.value=l||""),e)),t})},v=(e,t)=>e.type===t,h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return console.log(t),r.map(r=>{var c,m,p;let f=t.filter(e=>{var t;return e._id===r._id&&(null===(t=r.setting)||void 0===t?void 0:t.require)})[0];if(f){e.push(f);return}if(!f&&"TEXT"===r.type){let{_next:t,message:i,type:n}=(0,l.W)({inputValue:r.value,inputSetting:r.setting});if(t)return;let a={_id:r._id,title:r.title,type:n,message:i};e.push(a)}if(!f&&"EMAIL"===r.type){let{_next:t,message:l,type:n}=(0,i.q)({inputValue:r.value,inputSetting:r.setting});if(t)return;let a={_id:r._id,title:r.title,type:n,message:l};e.push(a)}if(!f&&"PHONE"===r.type){let{_next:t,message:l,type:i}=(0,a.f)({inputValue:r.value,inputSetting:r.setting});if(t)return;let n={_id:r._id,title:r.title,type:i,message:l};e.push(n)}if(!f&&"VOTE"===r.type){let{_next:t,message:l,type:i}=(0,o.m)({inputValue:r.value,inputSetting:r.setting});if(t)return;let n={_id:r._id,title:r.title,type:i,message:l};e.push(n)}if(!f&&"DATE"===r.type){let{_next:t,message:l,type:i}=(0,s.Z)({inputValue:r.value,inputSetting:r.setting});if(t)return;let n={_id:r._id,title:r.title,type:i,message:l};e.push(n)}if(f||"OPTION"!==r.type||!r.value){if(!f&&"OPTION"===r.type&&!r.value&&(null===(c=r.setting)||void 0===c?void 0:c.require)){let t={_id:r._id,title:r.title,type:"REQUIRE",message:n.uD};e.push(t)}if(f||"OPTION_MULTIPLE"!==r.type||!(r.value.length>0)){if(!f&&"OPTION_MULTIPLE"===r.type&&0===r.value.length&&(null===(m=r.setting)||void 0===m?void 0:m.require)){let t={_id:r._id,title:r.title,type:"REQUIRE",message:n.uD};e.push(t)}if(f||"FILE_IMAGE"!==r.type||!(r.value.length>0)){if(!f&&"FILE_IMAGE"===r.type&&0===r.value.length&&(null===(p=r.setting)||void 0===p?void 0:p.require)){let t={_id:r._id,title:r.title,type:"REQUIRE",message:n.uD};e.push(t)}if(!f&&"ADDRESS"===r.type&&r.setting&&v(r,"ADDRESS")){let{_next:t,message:l,type:i}=(0,d.Z)({inputValue:r.value,inputSetting:r.setting});if(!t){let t={_id:r._id,title:r.title,type:i,message:l};e.push(t)}}if(!f&&"ANCHOR"===r.type&&r.setting&&v(r,"ANCHOR")){let{_next:t,message:l,type:i}=(0,u.Z)({inputValue:r.value,inputSetting:r.setting});if(!t){let t={_id:r._id,title:r.title,type:i,message:l};e.push(t)}}}}}}),e},_=["TEXT","EMAIL","PHONE","VOTE","FILE_IMAGE","ANCHOR","DATE"],g=["OPTION","OPTION_MULTIPLE"],x=["ADDRESS"],b=e=>{var t,r,l,i,n,a;let{inputItem:o,inputFormErrors:s,inputFormData:d}=e,u={},c=s.filter(e=>{if(e._id===o._id)return e}),m=null==d?void 0:d.filter(e=>{if(e._id===o._id&&e.type===o.type)return e});return _.includes(o.type)&&(u={require:o.core.setting.require,globalError:{state:!!c[0],message:(null===(t=c[0])||void 0===t?void 0:t.message)||"",type:(null===(r=c[0])||void 0===r?void 0:r.type)||null},input:m[0]}),g.includes(o.type)&&(u={require:o.core.setting.require,globalError:{state:!!c[0],message:(null===(l=c[0])||void 0===l?void 0:l.message)||"",type:(null===(i=c[0])||void 0===i?void 0:i.type)||null},input:m[0]}),x.includes(o.type)&&(u={require:o.core.setting.require,globalError:{state:!!c[0],message:(null===(n=c[0])||void 0===n?void 0:n.message)||"",type:(null===(a=c[0])||void 0===a?void 0:a.type)||null},input:m[0]}),u},y=e=>{let{inputItem:t,inputFormErrors:r,setFormAnswer:l}=e;r.some(e=>e._id===t._id)&&m(l,t._id),t.core.setting.require&&p(l,t._id,!1)},w=e=>{let{inputValue:t,inputItem:r,setFormAnswer:l,validateCallback:i}=e,{setting:n}=r.core,{_next:a,message:o,type:s}=i({inputValue:t,inputSetting:n});return a?(r.core.setting.require&&p(l,r._id,!0),r.type,f({callback:l,input_id:r._id,input_value:t})):(f({callback:l,input_id:r._id,input_value:t}),c(l,r._id,r.input_title||"",s,o)),{_next:a,message:o,type:s}}},5580:function(e,t,r){let l=e=>{switch(e){case"province":return"Tỉnh - Th\xe0nh phố";case"district":return"Th\xe0nh phố - Huyện ";case"ward":return"Phường - X\xe3";case"street":return"T\xean Đường";default:return"Địa chỉ"}};t.Z=e=>{var t,r,i,n,a,o,s,d;let{inputValue:u,inputSetting:c}=e,m=!0,p="",{addressValidate:f,addressString:v}=u,h=null,{require:_}=c,g=f&&(null===(t=f[0])||void 0===t?void 0:t.path_with_type)&&(null===(r=f[1])||void 0===r?void 0:r.path_with_type)&&(null===(i=f[2])||void 0===i?void 0:i.path_with_type)&&(null===(n=f[3])||void 0===n?void 0:n.path_with_type);if(_){if(v&&g)return{_next:m,message:p,type:h};if(!v||!g){let e=[];return f.forEach(t=>{if(!t.path_with_type){if("street"==t.type){e.push(l("street"));return}e.push(l(t.type))}}),{_next:m=!1,message:p=e.join(", ")+"  bắt buộc nhập",type:h="INVAILD"}}}if(!_){if(g)return{_next:m,message:p,type:h};if(f&&((null===(a=f[0])||void 0===a?void 0:a.path_with_type)||(null===(o=f[1])||void 0===o?void 0:o.path_with_type)||(null===(s=f[2])||void 0===s?void 0:s.path_with_type)||(null===(d=f[3])||void 0===d?void 0:d.path_with_type)))return{_next:m=!1,message:p="Địa chỉ bạn cung cấp kh\xf4ng đầy đủ",type:h="INVAILD"}}return{_next:m,message:p,type:h}}},2546:function(e,t,r){var l=r(7159),i=r(6348);t.Z=e=>{let{inputValue:t,inputSetting:r}=e,n=!0,a="",o=null,{require:s}=r;if(!s&&!t)return{_next:n,message:a,type:o};if(s&&!t)return{_next:n=!1,message:a=l.uD,type:o="REQUIRE"};let d=new RegExp(i.hI,i.vm);return t.match(d)||(n=!1,a=(0,l.Af)("Địa chỉ đường dẫn kh\xf4ng hợp lệ"),o="INVAILD"),{_next:n,message:a,type:o}}},1508:function(e,t,r){r.d(t,{Z:function(){return a}});var l=r(7159),i=r(2151),n=r.n(i);let a=e=>{let{inputValue:t,inputSetting:r}=e,i=!0,a="",o=null,{require:s}=r;return s?s&&t&&!n()(t).isValid()?{_next:i=!1,message:a=l.uD,type:o="REQUIRE"}:(s&&!t&&(i=!1,a=l.uD,o="REQUIRE"),{_next:i,message:a,type:o}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},1909:function(e,t,r){r.d(t,{q:function(){return i}});var l=r(7159);let i=e=>{let{inputValue:t,inputSetting:r}=e,i=!0,n="",a=l.Ej,o=t.match(a),s=null,d=t.length,{require:u,minLength:c,maxLength:m}=r;return u||t?u&&(!t||0===d)?{_next:i=!1,message:n=l.uD,type:s="REQUIRE"}:o?d>m?{_next:i=!1,message:n=(0,l.RM)(m),type:s="MAX"}:(d<c&&(i=!1,n=(0,l.fP)(c),s="MIN"),{_next:i,message:n,type:s}):{_next:i=!1,message:n=(0,l.Af)("Địa chỉ email kh\xf4ng hợp lệ"),type:s="INVAILD"}:{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},5550:function(e,t,r){r.d(t,{s:function(){return i}});let l=["image/png","image/jpg","image/jpeg"],i=e=>{let{file:t,sizeAllowOptions:r}=e,i=!1,n="",{size:a,type:o}=t,s=l.includes(o),d=r||2,u=a/1024/1024<d;return s&&u?{_check:i=!0,message:n}:(s||u||(n="File kh\xf4ng đ\xfang định dạng về đu\xf4i file v\xe0 k\xedch th\xedch file"),!s&&u&&(n="File kh\xf4ng đ\xfang định dạng - "+l.join(" - ")),s&&!u&&(n="File phải nhỏ hơn ".concat(d,"mb")),{_check:i,message:n})}},9808:function(e,t,r){r.d(t,{f:function(){return n},r:function(){return i}});var l=r(7159);let i=/^(0?)(3[2-9]|5[6|8|9]|7[0|6-9]|8[0-6|8|9]|9[0-4|6-9])[0-9]{7}$/,n=e=>{let{inputValue:t,inputSetting:r}=e,n=!0,a="",o=t.match(i),s=null,{require:d}=r;return d||t?d&&0===t.length?{_next:n=!1,message:a=l.uD,type:s="REQUIRE"}:(o||(n=!1,a=(0,l.Af)("Số điện thoại kh\xf4ng hợp lệ"),s="INVAILD"),{_next:n,message:a,type:s}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},4105:function(e,t,r){r.d(t,{W:function(){return i}});var l=r(7159);let i=e=>{let{inputValue:t,inputSetting:r}=e,i=!0,n="",a=null,o=(null==t?void 0:t.length)||0,{require:s,minLength:d,maxLength:u}=r;return s||t?s&&(!t||0===o)?{_next:i=!1,message:n=l.uD,type:a="REQUIRE"}:o>u?{_next:i=!1,message:n=(0,l.RM)(u),type:a="MAX"}:(o<d&&(i=!1,n=(0,l.fP)(d),a="MIN"),{_next:i,message:n,type:a}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},8252:function(e,t,r){r.d(t,{m:function(){return i}});var l=r(7159);let i=e=>{let{inputValue:t,inputSetting:r}=e,i=!0,n="",a=null,{require:o}=r;return o||t?(o&&0==+t&&(i=!1,n=l.uD,a="REQUIRE"),{_next:i,message:n,type:a}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},4433:function(e,t){class r{static BorderWrapperError(e){let{error:t,inputItemInArrayGlobal:r}=e;return t.error||r.require?"border-red-600":" border-zinc-200"}static BorderInputError(e){let{error:t}=e;return t.error?"border-red-600":"border-gray-100"}static StyleTitle(e){let{inputItem:t,formCore:r}=e;return{fontSize:t.core.setting.input_size||r.form_setting_default.input_size,color:t.core.setting.input_color||r.form_setting_default.input_color,fontStyle:t.core.setting.input_style||r.form_setting_default.input_style}}}t.Z=r},7829:function(e,t,r){r.d(t,{Z:function(){return eu}});var l=r(7437),i=r(2265),n=r(9964),a=r(4184),o=r(3609),s=r(568),d=r(6067),u=r(2200),c=r(7907),m=e=>{let{formCore:t}=e,r=(0,c.usePathname)(),m=r.startsWith("/form")&&r.endsWith("/edit"),{formAnswer:{inputFormRequire:p,inputFormErrors:f,inputFormData:v,submitState:h,form_answer_id:_},setFormAnswer:g}=(0,i.useContext)(n.H),x=(0,s.D)({mutationKey:["add new report form"],mutationFn:e=>d.Z.addNewFormReport(e)});return(0,i.useEffect)(()=>{x.isSuccess&&g(e=>({...e,submitState:"success"}))},[x.isSuccess,g]),(0,l.jsxs)("div",{onClick:()=>{if(p.every(e=>e.checkRequire)&&0===f.length){let e=v.map(e=>{if(e.setting&&delete e.setting,"ADDRESS"===e.type){let{address_full:t}=e.value;e.value=t||""}return e}),r={form_id:t._id,form_owner:t.form_owner,answers:e,form_answer_id:_};return m?g(e=>({...e,submitState:"success"})):(console.log({"Dữ liệu submit cuối c\xf9ng":r}),x.mutate(r),void g(e=>({...e,submitState:"pending"})))}let e=[];console.log({"C\xe1c input lỗi":e=(0,o.VQ)(e,f,v)}),(e.length>0||p.length>0)&&g(t=>({...t,inputFormErrors:e,openModelError:!0}))},className:"min-w-[25%] w-max h-[5rem]  ml-auto flex items-center justify-center gap-[.5rem] rounded-lg hover:cursor-pointer bg-blue-600",children:[(0,l.jsx)(a.Z,{textContent:t.form_button_text,className:" text-white text-[1.6rem] text-center px-[1rem]  w-max"}),"pending"===h&&(0,l.jsx)(u.Z,{color:"#ffffff",width:"min-w-[2.4rem]",height:"min-h-[2.4rem]"})]})},p=r(8194),f=r(8119),v=r(703),h=e=>{var t,r,i;let{formCore:n}=e;return(0,l.jsx)("div",{className:"".concat(({onCheckModeAvatar:e=>"circle"===e?"rounded-full":"",onCheckPositionAvatar:e=>"left"===e?"left-[calc(25%-4rem)] ":"center"===e?"left-[50%] translate-x-[-50%]":"right-[calc(25%-4rem)]",onCheckPostionShowAvatar:e=>e?"bottom-0 translate-y-[50%] left-[20%]":"top-[50%] translate-x-[-50%] translate-y-[-50%] left-[50%]"}).onCheckPositionAvatar(null==n?void 0:null===(t=n.form_avatar)||void 0===t?void 0:t.position)," absolute top-0 translate-y-[-50%] w-[45%] sm:w-[20rem] xl:w-[22%] aspect-square  flex justify-center"),children:(0,l.jsx)(v.default,{src:(null===(r=n.form_avatar)||void 0===r?void 0:r.form_avatar_url)||n.form_setting_default.form_avatar_default_url,style:{borderRadius:(null==n?void 0:null===(i=n.form_avatar)||void 0===i?void 0:i.mode_shape)==="circle"?"999px":""},width:800,height:160,unoptimized:!0,alt:"form background",className:" w-[90%] h-[90%] aspect-square z-[2] shadow-xl"})})},_=e=>{var t,r,a;let{formCore:o}=e,{formAnswer:{inputFormRequire:s}}=(0,i.useContext)(n.H),d=o.form_title.form_title_color||o.form_setting_default.form_title_color_default,u=!1,c={fontSize:"".concat(o.form_title.form_title_size?o.form_title.form_title_size/10+"rem":o.form_setting_default.form_title_size_default/10+"rem"),color:"".concat(o.form_title.form_title_color?o.form_title.form_title_color:o.form_setting_default.form_title_color_default),fontStyle:"".concat(o.form_title.form_title_style?o.form_title.form_title_style:o.form_setting_default.form_title_style_default)},m=o.form_avatar_state||(null===(t=o.form_avatar)||void 0===t?void 0:t.form_avatar_url)?"mt-[8rem]":"mt-0";return(0,l.jsxs)("header",{style:{borderTopColor:d},className:"".concat((null===(r=o.form_avatar)||void 0===r?void 0:r.form_avatar_url)||o.form_avatar_state?"mt-[8rem]":"mt-[2rem]"," relative w-full min-h-[14rem] m h-max p-[1.8rem_3rem] flex flex-col gap-[2rem]   break-words	 border-t-[1rem]  bg-[#ffffff] rounded-2xl"),children:[((null===(a=o.form_avatar)||void 0===a?void 0:a.form_avatar_url)||o.form_avatar_state)&&(0,l.jsx)(h,{formCore:o}),(0,l.jsxs)("div",{className:"".concat(m," flex flex-col gap-[3rem]"),children:[(0,l.jsx)("h1",{style:c,className:" font-light ",children:o.form_title.form_title_value}),o.form_title.form_title_sub.length>0&&(0,l.jsxs)("div",{className:"pt-[2rem] border-t-[.1rem] border-gray-200 flex flex-wrap gap-[2rem]",children:[o.form_title.form_title_sub.map(e=>{var t;if("Text"===e.type&&(null==e?void 0:null===(t=e.core)||void 0===t?void 0:t.value))return(0,l.jsx)("span",{className:"text-[1.4rem] text-justify leading-10",children:e.core.value},e._id);if("Image"===e.type){if("Slider"!==o.form_title.form_title_mode_image)return(0,l.jsx)("div",{className:"w-full xl:w-[45%] flex gap-[2rem]",children:(0,l.jsx)(p.Z,{mode:"Normal",page:"Answer",subTitleItem:e},e._id)},e._id);if("Slider"===o.form_title.form_title_mode_image&&!u){u=!0;let t=o.form_title.form_title_sub.filter(e=>"Image"===e.type&&e.core.url);return(0,l.jsx)(f.Z,{colorMain:d,page:"Answer",type:"Components",images:t},e._id)}}if("FullDescription"===e.type)return(0,l.jsxs)("div",{className:"  text-[1.4rem] my-[1rem]  flex flex-col gap-[1.6rem] ",children:[(0,l.jsx)("span",{className:"font-bold",children:e.core.header_value}),(0,l.jsx)("span",{children:e.core.value})]},e._id)}),s.length>0&&(0,l.jsx)("span",{className:"text-red-600 text-[1.4rem] mt-[2rem]",children:"* Biểu thị c\xe2u hỏi bắt buộc"})]})]})]})},g=r(2235),x=r(8792),b=e=>{let{inputFormErrors:t,formCore:r,numberInputAPage:a,setPage:o}=e,s=r.form_title.form_title_color||r.form_setting_default.form_title_color_default,{setFormAnswer:d}=(0,i.useContext)(n.H);return(0,l.jsxs)("div",{className:"fixed z-[1000] top-[10rem] xl:top-[50%] xl:translate-y-[-50%] right-[2rem] sm:right-0 xl:right-[4rem] w-[32rem]  h-[24rem] max-h-[24rem] sm:h-[40rem] sm:max-h-[40rem]  border-[.1rem] border-gray-200 text-[1.2rem]",children:[(0,l.jsxs)("div",{className:"  w-full min-h-full max-h-full py-[3rem] flex flex-col gap-[2rem] bg-[#ffffff] shadow-lg",children:[(0,l.jsx)("span",{className:"text-[1.6rem] px-[1rem] text-center uppercase",children:"Một số dữ liệu kh\xf4ng hợp lệ"}),(0,l.jsx)("div",{className:"scroll-error-input overflow-y-scroll flex flex-col gap-[2rem] bg-[#ffffff] ",children:t.map(e=>{let t=r.form_inputs.findIndex(t=>t._id===e._id),i=Math.ceil((t+1)/a),n=r.form_inputs[t].input_title||"";return(0,l.jsxs)(x.default,{className:"group w-full p-[1rem_3rem] flex flex-col gap-[1rem] border-l-[.4rem] border-red-600 hover:bg-red-50 hover:text-red-600",href:"/form/".concat(r._id,"#_inputid_").concat(e._id),onClick:()=>o(i),children:[(0,l.jsxs)("p",{className:"w-max flex gap-[.6rem]",children:[(0,l.jsx)("span",{className:"min-w-[4rem] max-w-[15rem] truncate",children:"Ti\xeau đề: "}),(0,l.jsx)("span",{style:{color:s},className:"font-bold",children:n||"Trống"})]}),(0,l.jsxs)("div",{className:"w-full flex flex-col justify-between",children:[(0,l.jsxs)("p",{className:"flex gap-[.4rem]",children:[(0,l.jsx)("span",{className:"min-w-[4rem]",children:"M\xe3 lỗi:"}),(0,l.jsx)("span",{className:"text-red-600 group-hover:text-red-700 font-semibold",children:"[".concat(e.type,"]")})]}),(0,l.jsxs)("p",{className:"flex gap-[.6rem]",children:[(0,l.jsx)("span",{className:"min-w-[4rem]",children:"M\xf4 tả:"}),(0,l.jsx)("span",{className:"underline underline-offset-4",children:r.form_inputs[t].core.setting.input_error_state?r.form_inputs[t].core.setting.input_error:e.message})]})]})]},e._id)})})]}),(0,l.jsx)("button",{onClick:()=>d(e=>({...e,openModelError:!1})),className:"absolute right-[-2rem] top-[-2rem] w-[4rem] h-[4rem]  flex items-center justify-center rounded-full  bg-red-600 ",children:(0,l.jsx)(g.Z,{size:14,color:"white"})})]})},y=e=>{let{message:t="C\xe2u trả lời của bạn đ\xe3 được ghi lại",color:r}=e;return(0,l.jsx)("div",{style:{color:r},className:"w-full min-h-[14rem] h-max flex items-center justify-center text-[2rem] font-bold bg-[#ffffff] rounded-lg",children:t})},w=r(2214),j=r(7183),N=r(6366),Z=r(6715),I=r(9808),C=r(5904),E=r(4433),k=r(1625),S=r(2301),A=r(7243),F=e=>{var t,r;let{inputItem:a,formCore:s}=e,{formAnswer:{inputFormErrors:d,inputFormData:u,submitState:c},setFormAnswer:m}=(0,i.useContext)(n.H),[p,f]=(0,i.useState)(!1),v=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:d,inputItem:a,inputFormData:u}),[a,d,u]),[h,_]=(0,i.useState)((null===(t=v.input)||void 0===t?void 0:t.value)||"");return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:v,input_id:a._id,write:p,children:[(0,l.jsx)(k.Z,{inputItem:a,formCore:s}),(0,l.jsxs)(Z.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:[(0,l.jsx)("input",{onFocus:()=>{f(!0),(0,o.EQ)({setFormAnswer:m,inputFormErrors:d,inputItem:a})},onBlur:()=>{p&&(0,o.qy)({inputItem:a,inputValue:h,setFormAnswer:m,validateCallback:I.f})},value:h?+h:"",type:"number",className:" ".concat(E.Z.StyleTitle({formCore:s,inputItem:a})," w-[90%] h-full pb-[2rem] border-b-[.1rem] border-gray-300  outline-none text-[1.7rem] placeholder:text-[1.3rem]"),placeholder:"Nhập số điện thoại của bạn",onChange:e=>_(e.target.value)}),(0,l.jsx)(Z.Z,{className:"absolute z-[2] right-[1rem]",title:"",children:(0,l.jsx)(C.Z,{className:" text-textMain opacity-50",size:18})})]}),(null==v?void 0:null===(r=v.globalError)||void 0===r?void 0:r.state)&&(0,l.jsx)(A.Z,{inputItem:a,inputItemInArrayGlobal:v})]})})},R=r(6824),T=r(8252),q=e=>{var t,r;let{inputItem:a,formCore:s}=e,{formAnswer:{inputFormErrors:d,inputFormData:u,submitState:c},setFormAnswer:m}=(0,i.useContext)(n.H),p=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:d,inputItem:a,inputFormData:u}),[a,d,u]),[f,v]=(0,i.useState)((null===(t=p.input)||void 0===t?void 0:t.value)||""),[h,_]=(0,i.useState)(!1);return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:p,input_id:a._id,write:h,children:[(0,l.jsx)(k.Z,{inputItem:a,formCore:s}),(0,l.jsx)(Z.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:(0,l.jsxs)(Z.Z,{className:"flex flex-col gap-[1rem]",children:[(0,l.jsx)(Z.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:(0,l.jsx)(R.Z,{onFocus:()=>{_(!0),(0,o.EQ)({setFormAnswer:m,inputFormErrors:d,inputItem:a})},onBlur:()=>{h&&(0,o.qy)({inputItem:a,inputValue:f,setFormAnswer:m,validateCallback:T.m})},allowHalf:!0,value:+f,onChange:e=>v(e.toString())})}),(0,l.jsxs)("span",{className:"text-[1.4rem]",children:["Số đ\xe1nh gi\xe1 bạn chọn l\xe0: ",f]})]})}),(null==p?void 0:null===(r=p.globalError)||void 0===r?void 0:r.state)&&(0,l.jsx)(A.Z,{inputItem:a,inputItemInArrayGlobal:p})]})})},M=r(5570),D=r(5145),P=r(7874),V=r(9564),O=r(1508),z=e=>{var t,r;let a;let{inputItem:s,formCore:d}=e,{formAnswer:{inputFormErrors:u,inputFormData:c,submitState:m},setFormAnswer:p}=(0,i.useContext)(n.H),[f,v]=(0,i.useState)(!1),h=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:u,inputItem:s,inputFormData:c}),[s,u,c]),[_,g]=(0,i.useState)((null===(t=h.input)||void 0===t?void 0:t.value)||""),[x,b]=(0,i.useState)(!1),y=(a=_?new Date(_):new Date).getMonth()+1,w=a.getDate(),j=a.getFullYear(),[I,C]=(0,i.useState)({day:w,month:y,year:j,date_string:(0,P.DP)({day:w,month:y,year:j})}),E=(0,P.PK)({day:I.day,month:I.month,year:I.year});return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:h,input_id:s._id,write:f,children:[(0,l.jsx)(k.Z,{inputItem:s,formCore:d}),(0,l.jsxs)(Z.Z,{className:"relative flex flex-col items-start gap-[1rem] text-[#000] ",children:[(0,l.jsxs)("button",{onClick:()=>b(e=>!e),className:"bg-color-main text-[#fff] p-[.5rem_1rem] rounded-xl flex items-center gap-[1rem] text-[1.3rem]",children:[(0,l.jsx)("span",{children:E}),(0,l.jsx)(M.Z,{})]}),x&&(0,l.jsx)("div",{className:"absolute z-[3] top-[4.2rem] xl:top-[64%] right-[33%] sm:right-[67%] xl:right-[47%] ",onFocus:()=>{v(!0),(0,o.EQ)({setFormAnswer:p,inputFormErrors:u,inputItem:s})},children:(0,l.jsx)(V.Z,{setOpenModel:b,children:(0,l.jsx)(D.Z,{onChange:e=>{let{day:t,month:r,date_string:l,year:i}=e;C({day:t,month:r,year:i,date_string:l}),b(!1),f&&l&&(0,o.qy)({inputItem:s,inputValue:new Date(l).toISOString(),setFormAnswer:p,validateCallback:O.Z})},callbackCancel:()=>{b(!1),C({day:w,month:y,year:j,date_string:(0,P.DP)({day:w,month:y,year:j})})},initialDate:a})})}),(0,l.jsxs)("p",{className:"text-[1.3rem]",children:["Thời gian đang chọn l\xe0:",(0,l.jsxs)("span",{className:"text-color-main font-semibold",children:[" ",E]})]})]}),(null==h?void 0:null===(r=h.globalError)||void 0===r?void 0:r.state)&&(0,l.jsx)(A.Z,{inputItem:s,inputItemInArrayGlobal:h})]})})},L=r(5561),G=e=>{let{formCore:t,inputItem:r}=e;return(0,l.jsxs)("p",{style:({styleTitle:()=>({fontSize:r.core.setting.input_size||t.form_setting_default.input_size,color:r.core.setting.input_color||t.form_setting_default.input_color,fontStyle:r.core.setting.input_style||t.form_setting_default.input_style})}).styleTitle(),className:"flex items-center gap-[.6rem] text-[2rem] font-medium",children:[r.input_title||"Kh\xf4ng c\xf3 ti\xeau đề",r.core.setting.require&&(0,l.jsx)("span",{className:"text-red-800",children:"*"})]})},H=r(5550),U=r(5984),Q=r(828),X=r(1231),B=e=>{let{form_id:t,form_answer_id:r,mode:l,setFilePreviewCallback:i,setWriteCallback:n}=e,a=(0,Q.I0)(),o=(0,s.D)({mutationKey:["upload-file-form-answers"],mutationFn:e=>d.Z.uploadLoadFile(e)});return{uploadFileFormAnswerAPI:o,handleUpload:e=>{if(e.target.files&&e.target.files[0]){n(!0);let s=e.target.files[0],{_check:d,message:u}=(0,H.s)({file:s});if(!d)return a((0,U.DT)({toast_item:{_id:(0,X.Z)(),type:"ERROR",core:{message:u},toast_title:"Lỗi File Upload"}}));let c=new FormData;c.append("file",s),c.append("form_answers_id",r),c.append("form_id",t),i(URL.createObjectURL(s)),l||o.mutate(c)}}}},W=r(3898),K=r(2156),Y=()=>(0,l.jsxs)("div",{className:"w-full h-[2rem] flex items-center gap-[1rem] text-blue-400 animate-pulse",children:[(0,l.jsx)("div",{className:"w-[1rem] h-[1rem] bg-blue-400 rounded-full"}),(0,l.jsx)("span",{className:"text-[1.2rem] font-semibold",children:"Đang tải l\xean"})]}),J=r(4314),$=e=>{var t,r,a,s,d,m,p,f,h;let{inputItem:_,formCore:g}=e,x=(0,c.usePathname)(),b=x.startsWith("/form")&&x.endsWith("/edit"),{formAnswer:{inputFormErrors:y,inputFormData:w,submitState:j,form_answer_id:I},setFormAnswer:C}=(0,i.useContext)(n.H),[E,k]=(0,i.useState)(""),[F,R]=(0,i.useState)(!1),{uploadFileFormAnswerAPI:T,handleUpload:q}=B({form_id:g._id,form_answer_id:I,mode:b,setFilePreviewCallback:k,setWriteCallback:R}),M=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:y,inputItem:_,inputFormData:w}),[_,y,w]),D=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(T.isSuccess){let{url:e}=T.data.metadata;k(e),_.core.setting.require&&(0,o.Z)(C,_._id,!0),y.some(e=>e._id===_._id)&&(0,o.wY)(C,_._id),(0,o.l1)({callback:C,input_id:_._id,input_value:e})}},[T.isSuccess]),(0,i.useEffect)(()=>()=>{URL.revokeObjectURL(E)},[E]),(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:M,input_id:_._id,write:F,children:[(0,l.jsx)(G,{inputItem:_,formCore:g}),(0,l.jsxs)(Z.Z,{className:"relative flex  items-center justify-between gap-[1rem] text-text-theme ",children:[(0,l.jsxs)(Z.Z,{className:"h-[12rem] w-[20rem] xl:w-[24rem]   flex flex-col   justify-start  gap-[1.4rem]  ",children:[(null===(t=M.input)||void 0===t?void 0:t.value)&&(0,W.Rm)(null===(r=M.input)||void 0===r?void 0:r.value)&&(0,l.jsxs)("a",{href:null===(a=M.input)||void 0===a?void 0:a.value,target:"_blank",className:"text-[#000] text-[1.3rem] flex items-center gap-[1rem]",children:[(0,l.jsx)(L.Z,{}),"Xem Ảnh"]}),(0,l.jsx)("p",{className:"w-max text-[1.3rem] text-[#000]",children:"Vui l\xf2ng chọn c\xe1c file JPG, JPEG,PNG"}),(0,l.jsx)("button",{onClick:()=>{D.current&&D.current.click()},className:"p-[.6rem] border-[.1rem] w-[9rem] border-text-theme bg-slate-900 text-[#fff] text-[1.4rem] rounded-xl",children:(null===(s=M.input)||void 0===s?void 0:s.value)?"Tải lại":"Tải ảnh l\xean"}),(null===(d=M.input)||void 0===d?void 0:d.value)?(0,l.jsx)(J.Z,{}):T.isPending?(0,l.jsx)(Y,{}):(0,l.jsx)(K.Z,{}),(0,l.jsx)("input",{type:"file",hidden:!0,ref:D,onChange:q,accept:".jpg, .jpeg, .png"})]}),(0,l.jsxs)("div",{className:"w-[12rem] xl:w-[14rem] h-[12rem] flex items-center justify-center",children:[!(null===(m=M.input)||void 0===m?void 0:m.value)&&!T.isPending&&(0,l.jsx)(v.default,{width:32,height:32,alt:"upload h\xecnh ảnh",src:"/assets/images/icon/form_answer/photographer.png",unoptimized:!0,className:"w-[10rem] h-[10rem]"}),T.isPending?(0,l.jsx)(u.Z,{color:"blue"}):!b&&!!(null===(p=M.input)||void 0===p?void 0:p.value)&&(0,l.jsx)(v.default,{src:null===(f=M.input)||void 0===f?void 0:f.value,width:70,height:70,alt:"file hinh anh",className:"w-full h-full rounded-lg",unoptimized:!0}),b&&E&&(0,l.jsx)(v.default,{src:E,width:70,height:70,alt:"file hinh anh",className:"w-full h-full",unoptimized:!0})]})]}),(null==M?void 0:null===(h=M.globalError)||void 0===h?void 0:h.state)&&(0,l.jsx)(A.Z,{inputItem:_,inputItemInArrayGlobal:M})]})})},ee=r(5624),et=r(5580),er=e=>{var t,r,a,s,d,u,c,m,p,f,v,h,_,g,x,b,y,w,j,I,C,E,F,R,T,q,M,D,P,V,O,z,L,G,H,U,Q,X,B,W,K,Y,J,$,er,el,ei,en,ea,eo,es,ed,eu,ec,em,ep,ef,ev,eh,e_,eg,ex,eb;let{inputItem:ey,formCore:ew}=e,{formAnswer:{inputFormErrors:ej,inputFormData:eN},setFormAnswer:eZ}=(0,i.useContext)(n.H),eI=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:ej,inputItem:ey,inputFormData:eN}),[ey,ej,eN]),eC=e=>{let{_next:t,type:r}=(0,o.qy)({inputItem:ey,inputValue:e,setFormAnswer:eZ,validateCallback:et.Z});t&&ej.some(e=>e._id===ey._id)&&(0,o.wY)(eZ,ey._id)};return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:eI,input_id:ey._id,write:!0,children:[(0,l.jsx)(k.Z,{inputItem:ey,formCore:ew}),(0,l.jsx)(Z.Z,{className:"relative flex flex-col items-start gap-[1rem] text-[#000] ",children:(0,l.jsxs)("div",{className:"flex flex-col gap-[2rem]",children:[(0,l.jsx)(ee.Z,{detail:!0,onChange:eC,defaultValue:{province:{label:(null===(r=eI.input)||void 0===r?void 0:null===(t=r.value)||void 0===t?void 0:t.addressValidate)?null===(d=eI.input)||void 0===d?void 0:null===(s=d.value)||void 0===s?void 0:null===(a=s.addressValidate[0])||void 0===a?void 0:a.name_with_type:"",value:(null===(c=eI.input)||void 0===c?void 0:null===(u=c.value)||void 0===u?void 0:u.addressValidate)?null===(f=eI.input)||void 0===f?void 0:null===(p=f.value)||void 0===p?void 0:null===(m=p.addressValidate[0])||void 0===m?void 0:m.code:"",name_with_type:(null===(h=eI.input)||void 0===h?void 0:null===(v=h.value)||void 0===v?void 0:v.addressValidate)?null===(x=eI.input)||void 0===x?void 0:null===(g=x.value)||void 0===g?void 0:null===(_=g.addressValidate[0])||void 0===_?void 0:_.name_with_type:"",path_with_type:(null===(y=eI.input)||void 0===y?void 0:null===(b=y.value)||void 0===b?void 0:b.addressValidate)?null===(I=eI.input)||void 0===I?void 0:null===(j=I.value)||void 0===j?void 0:null===(w=j.addressValidate[0])||void 0===w?void 0:w.path_with_type:""},district:{label:(null===(E=eI.input)||void 0===E?void 0:null===(C=E.value)||void 0===C?void 0:C.addressValidate)?null===(T=eI.input)||void 0===T?void 0:null===(R=T.value)||void 0===R?void 0:null===(F=R.addressValidate[1])||void 0===F?void 0:F.name_with_type:"",value:(null===(M=eI.input)||void 0===M?void 0:null===(q=M.value)||void 0===q?void 0:q.addressValidate)?null===(V=eI.input)||void 0===V?void 0:null===(P=V.value)||void 0===P?void 0:null===(D=P.addressValidate[1])||void 0===D?void 0:D.code:"",name_with_type:(null===(z=eI.input)||void 0===z?void 0:null===(O=z.value)||void 0===O?void 0:O.addressValidate)?null===(H=eI.input)||void 0===H?void 0:null===(G=H.value)||void 0===G?void 0:null===(L=G.addressValidate[1])||void 0===L?void 0:L.name_with_type:"",path_with_type:(null===(Q=eI.input)||void 0===Q?void 0:null===(U=Q.value)||void 0===U?void 0:U.addressValidate)?null===(W=eI.input)||void 0===W?void 0:null===(B=W.value)||void 0===B?void 0:null===(X=B.addressValidate[1])||void 0===X?void 0:X.path_with_type:""},ward:{label:(null===(Y=eI.input)||void 0===Y?void 0:null===(K=Y.value)||void 0===K?void 0:K.addressValidate)?null===(er=eI.input)||void 0===er?void 0:null===($=er.value)||void 0===$?void 0:null===(J=$.addressValidate[2])||void 0===J?void 0:J.name_with_type:"",value:(null===(ei=eI.input)||void 0===ei?void 0:null===(el=ei.value)||void 0===el?void 0:el.addressValidate)?null===(eo=eI.input)||void 0===eo?void 0:null===(ea=eo.value)||void 0===ea?void 0:null===(en=ea.addressValidate[2])||void 0===en?void 0:en.code:"",name_with_type:(null===(ed=eI.input)||void 0===ed?void 0:null===(es=ed.value)||void 0===es?void 0:es.addressValidate)?null===(em=eI.input)||void 0===em?void 0:null===(ec=em.value)||void 0===ec?void 0:null===(eu=ec.addressValidate[2])||void 0===eu?void 0:eu.name_with_type:"",path_with_type:(null===(ef=eI.input)||void 0===ef?void 0:null===(ep=ef.value)||void 0===ep?void 0:ep.addressValidate)?null===(e_=eI.input)||void 0===e_?void 0:null===(eh=e_.value)||void 0===eh?void 0:null===(ev=eh.addressValidate[2])||void 0===ev?void 0:ev.path_with_type:""},street:null===(eg=eI.input)||void 0===eg?void 0:eg.value.addressString}}),(0,l.jsxs)("div",{className:"flex flex-col h-[8rem] gap-[1rem]   justify-center",children:[(!eI.globalError.state||(null===(ex=eI.input)||void 0===ex?void 0:ex.value.address_full))&&(0,l.jsx)("span",{className:"text-[1.4rem]",children:null===(eb=eI.input)||void 0===eb?void 0:eb.value.address_full}),(0,l.jsx)("button",{onClick:()=>{var e;return eC(null===(e=eI.input)||void 0===e?void 0:e.value)},className:" w-[9rem] flex items-center justify-center p-[.8rem] xl:p-[1rem] bg-blue-600 rounded-lg text-[1.2rem] xl:text-[1.4rem] text-[#ffffff]",children:"X\xe1c nhận"})]})]})}),eI.globalError.state&&(0,l.jsx)(A.Z,{inputItem:ey,inputItemInArrayGlobal:eI})]})})},el=r(5496),ei=r(2546),en=e=>{var t,r;let{inputItem:a,formCore:s}=e,{formAnswer:{inputFormErrors:d,inputFormData:u},setFormAnswer:c}=(0,i.useContext)(n.H),m=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:d,inputItem:a,inputFormData:u}),[a,d]),[p,f]=(0,i.useState)(!1),[v,h]=(0,i.useState)((null===(t=m.input)||void 0===t?void 0:t.value)||""),[_,g]=(0,i.useState)(!1),x=e=>{h(e)};return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:m,input_id:a._id,write:_,children:[(0,l.jsx)(k.Z,{formCore:s,inputItem:a}),(0,l.jsxs)(Z.Z,{className:"flex flex-col gap-[.3rem]",children:[(0,l.jsxs)(Z.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:[(0,l.jsx)("input",{onBlur:()=>{_&&(0,o.qy)({inputItem:a,inputValue:v,setFormAnswer:c,validateCallback:ei.Z})},onFocus:()=>{g(!0),(0,o.EQ)({setFormAnswer:c,inputFormErrors:d,inputItem:a})},value:v,onChange:e=>x(e.target.value),className:"w-full h-full p-[1rem] rounded-lg text-[1.6rem]   border-[.1rem] border-gray-400  outline-none focus:outline-blue-200 focus:border-transparent text-[#000]",placeholder:"Nhập đường dẫn li\xean kết của bạn"}),(0,l.jsx)("div",{className:"absolute z-[2] right-[1rem]  opacity-70",children:"www"})]}),(0,l.jsxs)("div",{className:"flex flex-col h-[8rem] gap-[1rem]   justify-center",children:[_&&p&&!m.globalError.state&&(0,l.jsx)(el.Z,{message:"Đường dẫn hợp lệ"}),(0,l.jsx)("button",{onClick:()=>{let{_next:e,message:t,type:r}=(0,o.qy)({inputItem:a,inputValue:v,setFormAnswer:c,validateCallback:ei.Z});f(e),e&&d.some(e=>e._id===a._id)&&(0,o.wY)(c,a._id)},className:" w-[9rem] flex items-center justify-center p-[.8rem] xl:p-[1rem] bg-blue-600 rounded-lg text-[1.2rem] xl:text-[1.4rem] text-[#ffffff]",children:"X\xe1c nhận"})]})]}),(null==m?void 0:null===(r=m.globalError)||void 0===r?void 0:r.state)&&(0,l.jsx)(A.Z,{inputItem:a,inputItemInArrayGlobal:m})]})})},ea=e=>{let{value:t,value_current:r,checked:i,callbackChecked:n,getStateCheck:a}=e;return(0,l.jsx)("div",{className:"p-[1rem] flex items-center gap-[2rem] rounded-lg hover:cursor-pointer hover:bg-formCoreBgColor",onClick:()=>{let e=r===t;a&&a(e),n&&n()},children:(0,l.jsxs)("div",{className:"min-w-[2rem] w-max h-[2.6rem] relative rounded-full flex items-center ",children:[(0,l.jsx)("div",{className:" absolute z-[2] w-[2rem] aspect-square rounded-full bg-[#fff] flex items-center justify-center ml-[.6rem] border-[.1rem] border-gray-400",children:i&&(0,l.jsx)("div",{className:" w-[50%] aspect-square rounded-full bg-blue-300"})}),r&&i?(0,l.jsx)("div",{className:"absolute min-w-[12rem] h-full bg-color-main rounded-full text-[#fff] flex items-center justify-center",children:(0,l.jsxs)("span",{className:"ml-[2rem] px-[2rem] text-[1.2rem] w-max",children:["[",t,"]"]})}):(0,l.jsx)("span",{className:"ml-[4rem]",children:t})]})})},eo=e=>{var t;let{inputItem:r,formCore:a}=e,{formAnswer:{inputFormErrors:s,inputFormData:d,submitState:u},setFormAnswer:c}=(0,i.useContext)(n.H),m=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:s,inputItem:r,inputFormData:d}),[r,s,d]),[p,f]=(0,i.useState)(()=>{var e,t;return{option_id:(null===(e=m.input)||void 0===e?void 0:e.value.option_id)||"",option_value:(null===(t=m.input)||void 0===t?void 0:t.value.option_value)||""}});(0,i.useEffect)(()=>{var e;let t=null===(e=m.input)||void 0===e?void 0:e.value;f({option_id:null==t?void 0:t.option_id,option_value:null==t?void 0:t.option_value})},[]);let v=e=>{if((0,o.wY)(c,r._id),r.core.setting.require&&(0,o.Z)(c,r._id,!0),e.option_value===p.option_value){f({option_id:e.option_id,option_value:""}),(0,o.l1)({callback:c,input_id:r._id,input_value:{option_id:"",option_value:""}});return}f({option_id:e.option_id,option_value:e.option_value}),(0,o.l1)({callback:c,input_id:r._id,input_value:e})};return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:m,input_id:r._id,write:!0,children:[(0,l.jsx)(k.Z,{formCore:a,inputItem:r}),(0,l.jsx)(Z.Z,{className:"flex flex-col gap-[.3rem] text-[1.4rem]",children:(0,l.jsx)(Z.Z,{className:" relative min-h-[5rem] h-max flex flex-col gap-[1.6rem]  ",children:r.core.options.map(e=>e.option_value?(0,l.jsx)(ea,{value:e.option_value,value_current:p.option_value,callbackChecked:()=>v(e),name_radio:r._id,checked:e.option_id===p.option_id},e.option_id):null)})}),(0,l.jsxs)("p",{className:"text-[1.4rem]",children:["Đ\xe3 chọn: ",(0,l.jsx)("span",{className:"ml-[.4rem] border-b-[.2rem] border-gray-400",children:p.option_value})]}),(null==m?void 0:null===(t=m.globalError)||void 0===t?void 0:t.state)&&(0,l.jsx)(A.Z,{inputItem:r,inputItemInArrayGlobal:m})]})})},es=e=>{var t;let{inputItem:r,formCore:a}=e,{formAnswer:{inputFormErrors:s,inputFormData:d,submitState:u,inputFormRequire:c},setFormAnswer:m}=(0,i.useContext)(n.H),p=(0,i.useMemo)(()=>(0,o.cC)({inputFormErrors:s,inputItem:r,inputFormData:d}),[r,s,d]),[f,v]=(0,i.useState)(()=>{var e;return{value:(null===(e=p.input)||void 0===e?void 0:e.value)||[]}}),h=e=>{if((0,o.wY)(m,r._id),r.core.setting.require&&(f.value.map(e=>e.option_id).includes(e.option_id)?(0,o.Z)(m,r._id,!1):(0,o.Z)(m,r._id,!0)),f.value.map(e=>e.option_id).includes(e.option_id)){let t=f.value.filter(t=>t.option_id===e.option_id?null:t);(0,o.l1)({callback:m,input_id:r._id,input_value:t}),v(e=>({value:t}))}else{let t=f.value.concat(e);(0,o.l1)({callback:m,input_id:r._id,input_value:t}),v(()=>({value:t}))}};return(0,l.jsx)(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:p,input_id:r._id,write:!0,children:[(0,l.jsx)(k.Z,{formCore:a,inputItem:r}),(0,l.jsx)(Z.Z,{className:"flex flex-col gap-[.3rem] text-[1.4rem]",children:(0,l.jsx)(Z.Z,{className:" relative min-h-[5rem] h-max flex flex-col gap-[1.6rem]  ",children:r.core.options.map(e=>{var t;return e.option_value?(0,l.jsx)(ea,{value:e.option_value,value_current:(null===(t=f.value.filter(e=>e.option_id==e.option_id)[0])||void 0===t?void 0:t.option_value)||"",callbackChecked:()=>h(e),name_radio:r._id,checked:f.value.map(e=>e.option_value).includes(e.option_value)},e.option_id):null})})}),(0,l.jsxs)("p",{className:"text-[1.4rem]",children:["Đ\xe3 chọn:"," ",(0,l.jsx)("span",{className:"ml-[.4rem] border-b-[.2rem] border-gray-400",children:f.value.map(e=>e.option_value).join(", ")})]}),(null==p?void 0:null===(t=p.globalError)||void 0===t?void 0:t.state)&&(0,l.jsx)(A.Z,{inputItem:r,inputItemInArrayGlobal:p})]})})};let ed=(e,t)=>e.map(e=>{switch(e.type){case"EMAIL":return(0,l.jsx)(w.Z,{inputItem:e,formCore:t},e._id);case"TEXT":return(0,l.jsx)(j.Z,{inputItem:e,formCore:t},e._id);case"PHONE":return(0,l.jsx)(F,{inputItem:e,formCore:t},e._id);case"VOTE":return(0,l.jsx)(q,{inputItem:e,formCore:t},e._id);case"DATE":return(0,l.jsx)(z,{inputItem:e,formCore:t},e._id);case"FILE_IMAGE":return(0,l.jsx)($,{inputItem:e,formCore:t},e._id);case"ADDRESS":return(0,l.jsx)(er,{inputItem:e,formCore:t},e._id);case"ANCHOR":return(0,l.jsx)(en,{inputItem:e,formCore:t},e._id);case"OPTION":return(0,l.jsx)(eo,{inputItem:e,formCore:t},e._id);case"OPTION_MULTIPLE":return(0,l.jsx)(es,{inputItem:e,formCore:t},e._id)}});var eu=e=>{let{formCore:t}=e,[r,a]=(0,i.useState)(1),{formAnswer:{inputFormErrors:o,openModelError:s,submitState:d}}=(0,i.useContext)(n.H),u=t.form_title.form_title_color||t.form_setting_default.form_title_color_default,c=(0,i.useRef)(1);console.log({message:"Quản l\xed v\xe0 validate dữ liệu"}),console.log({"Số lần render":c.current}),console.log({"Trang hiện tại":r}),"success"===d&&console.log("%cHẹn gặp lại bạn, th\xf4ng tin của bạn đ\xe3 được gửi th\xe0nh c\xf4ng","color:#fff;font-size:1.2rem;background: #3b36db;padding:0.3rem;border-radius:.4rem"),c.current+=1;let[p,f]=(0,i.useState)(!1),v=(0,i.useMemo)(()=>ed(t.form_inputs,t),[t]),h=Math.ceil(v.length/3),g={start:3*(r-1),end:3*r};return(0,i.useEffect)(()=>{f(!0)},[]),(0,l.jsxs)(l.Fragment,{children:["success"!==d&&(0,l.jsxs)(l.Fragment,{children:[1===r&&(0,l.jsx)(_,{formCore:t}),!p&&v,p&&v.slice(g.start,g.end),(0,l.jsxs)("div",{className:"flex  gap-[2rem] justify-end text-[1.5rem] text-black font-normal",children:[r===h&&h>1&&(0,l.jsx)("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>a(e=>e-=1),children:"Xem trang trước"}),r>1&&r!==h&&(0,l.jsx)("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>a(e=>e-=1),children:"Xem trang trước"}),t.form_inputs.length>0&&(0,l.jsxs)("p",{children:["Số trang:",r," / ",h]}),r<h&&1!==r&&(0,l.jsx)("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>a(e=>e+=1),children:"Xem trang tiếp theo"}),1===r&&h>1&&(0,l.jsx)("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>a(e=>e+=1),children:"Xem trang tiếp theo"})]}),o.length>0&&s&&(0,l.jsx)(b,{formCore:t,setPage:a,inputFormErrors:o,numberInputAPage:3}),t.form_inputs.length>0&&(0,l.jsx)(m,{formCore:t})]}),"success"===d&&(0,l.jsx)("div",{className:"mt-[2rem]",children:(0,l.jsx)(y,{color:u})})]})}},5496:function(e,t,r){var l=r(7437);r(2265),t.Z=e=>{let{message:t}=e;return(0,l.jsx)("span",{className:"text-[1.5rem] text-blue-500 font-bold max-w-[90%] break-all",children:t})}},136:function(e,t,r){r.d(t,{R:function(){return l}});let l={buttonDesign:{custom:"T\xf9y ch\xecnh giao diện",avatar:"Th\xeam ảnh đại diện",background:"Th\xeam h\xecnh nền"},title:{message:"Tạo ti\xeau đề",addOptionTitle:"Th\xeam c\xe1c mục phụ cho ti\xeau đề ch\xednh",optionText:{message:"Đoạn m\xf4 tả ngắn",complete:"M\xf4 tả ti\xeau đề",remove:"X\xf3a"},optionFullDescription:{message:"Đoạn m\xf4 tả nhiều th\xf4ng tin",complete:"M\xf4 tả ti\xeau đề",remove:"X\xf3a"},optionImage:{message:"H\xecnh Ảnh",complete:"Tải ảnh l\xean",remove:"X\xf3a"},optionImageMode:{label:"Chọn dạng hiển thị h\xecnh ảnh",mode_1:"B\xecnh thường",mode_2:"Slider"}}}},5137:function(e,t,r){var l=r(2970);class i{static async createForm(){return l.Z.post("/v1/api/form/create-form",{})}static async getAllForm(){return l.Z.get("/v1/api/form/get-all-form",{cache:"no-store"})}static async getForms(){return l.Z.get("/v1/api/form/get-forms",{cache:"no-store"})}static async getForm(e){let{form_id:t}=e;return l.Z.get("/v1/api/form/get-form-id?form_id=".concat(t),{cache:"no-store"})}static async getSearch(e){let{text:t}=e;return l.Z.get("/v1/api/form/search?text=".concat(t))}static async getFormPagination(e){let{page:t,limit:r}=e;return l.Z.get("/v1/api/form/get-form-pagination?page=".concat(t,"&limit=").concat(r))}static async getAllFormState(){return l.Z.get("/v1/api/form/get-all-form-state")}static async getFormBaseOnDate(e){let{date_begin:t,date_over:r}=e;return l.Z.get("/v1/api/form/get-form-base-on-date?date_begin=".concat(t,"&date_over=").concat(r))}static async deleteFormForever(e){let{form_id:t}=e;return l.Z.delete("/v1/api/form/delete-form-forever?form_id=".concat(t))}static async setTitleForm(e){let{form_id:t,value:r}=e;return await l.Z.post("/v1/api/form/set-title-form",{form_id:t,value:r})}static async getListFormDelete(){return l.Z.get("/v1/api/form/get-list-form-delete",{cache:"no-cache"})}static async addSubTitleItem(e){let{type:t,form_id:r}=e;return l.Z.post("/v1/api/form/add-sub-title-item",{type:t,form_id:r})}static async deleteTitleSubItem(e){let{title_sub_id:t,form_id:r}=e;return l.Z.delete("/v1/api/form/delete-sub-title-item?form_id=".concat(r,"&title_sub_id=").concat(t))}static async changeModeForm(e){let{mode:t,form_id:r}=e;return l.Z.post("/v1/api/form/change-form-mode",{mode:t,form_id:r})}static async changeModeDisplay(e){let{mode:t,form_id:r}=e;return l.Z.post("/v1/api/form/change-mode-display",{mode:t,form_id:r})}static async updateSubTitle(e){let{form_title_sub_id:t,form_title_sub_content:r,form_id:i}=e;return l.Z.post("/v1/api/form/update-sub-title-text",{form_title_sub_content:r,form_title_sub_id:t,form_id:i})}static async updateSubTitleDescription(e){let{header_value:t,value:r,title_sub_id:i,form_id:n}=e;return l.Z.post("/v1/api/form/update-sub-title-description",{header_value:t,value:r,title_sub_id:i,form_id:n})}static async setModeImageForm(e){let{form_id:t,mode:r}=e;return l.Z.post("/v1/api/form/update-form-title-mode-image",{form_id:t,mode:r})}static async uploadTitleImage(e){return l.Z.post("/v1/api/form/upload-sub-title-image",e)}static async deleteFormId(e){let{form_id:t}=e;return l.Z.delete("/v1/api/form/delete-form-id?form_id=".concat(t))}static async getFormGuess(e){let{form_id:t,options:r}=e;return l.Z.get("/v1/api/form/get-form-guess?form_id=".concat(t),r)}static async updateInputItemForm(e,t){return l.Z.post("/v1/api/form/update-form",{inputItem:e,form:t})}static async updateForm(e){return l.Z.post("/v1/api/form/update-form",{form:e})}static async uploadCover(e){return l.Z.post("/v1/api/form/upload-cover",e)}static async uploadAvatar(e){return l.Z.post("/v1/api/form/upload-avatar",e)}static async deleteAvatar(e,t){return l.Z.post("/v1/api/form/delete-avatar",{form_id:e,mode:t})}static async deleteCover(e){return l.Z.post("/v1/api/form/delete-cover",{form_id:e})}static async updateSettingInput(e,t,r){return l.Z.post("/v1/api/form/update-input-item-setting",{form:e,input_id:t,input_id_setting:r})}static async addBackground(e){return l.Z.post("/v1/api/form/add-background",{form:e})}static async addAvatar(e){return l.Z.post("/v1/api/form/add-avatar",{form:e})}static async getInfoFormNotification(e){let{form_id:t,notification_id:r}=e;return l.Z.get("/v1/api/form/info-form-notification?form_id=".concat(t,"&notification_id=").concat(r))}}t.Z=i},6067:function(e,t,r){var l=r(2970);class i{static async addNewFormReport(e){return l.Z.post("/v1/api/form-answer/add-new-form-report",{formAnswer:e})}static async getFormAnswer(e){return l.Z.get("/v1/api/form-answer/get-form-answer?form_id=".concat(e))}static async getFormTotalView(){return l.Z.get("/v1/api/form-answer/get-form-view")}static async getTotalFormAnswer(){return l.Z.get("/v1/api/form-answer/get-total-form-answer")}static async uploadLoadFile(e){return l.Z.post("/v1/api/form-answer/upload-file-answers",e)}static async increaseViewFormAnswer(e){let{form_id:t}=e;return l.Z.post("/v1/api/form-answer/update-form-views",{form_id:t})}}t.Z=i},525:function(e,t,r){var l=r(5292),i=r(5137),n=r(568),a=r(828);t.Z=()=>{let e=(0,a.I0)();return(0,n.D)({mutationKey:["update-form"],mutationFn:e=>i.Z.updateForm(e),onSuccess:t=>{let{form:r}=t.metadata;e((0,l.ow)({form:r}))}})}},6369:function(e,t,r){r.d(t,{G0:function(){return i},GR:function(){return a},Lw:function(){return n},uV:function(){return o}});var l=r(7874);let i=e=>{var t,r,l,i,n;let{formCore:a,mode:o}=e,s=null===(t=a.form_background)||void 0===t?void 0:t.object,d=null===(r=a.form_background)||void 0===r?void 0:r.position,u=null===(l=a.form_background)||void 0===l?void 0:l.size,c=null===(i=a.form_background)||void 0===i?void 0:i.mode_show,m=null===(n=a.form_avatar)||void 0===n?void 0:n.position;return{style_background:{objectFit:c,top:"".concat(null==d?void 0:d.top,"%"),left:"".concat(null==d?void 0:d.left,"%"),transform:"translate(".concat((null==d?void 0:d.left)||-0,"%, ").concat((null==d?void 0:d.top)||-0,"%)"),width:"".concat(null==u?void 0:u.width,"%")||0,height:"".concat((null==u?void 0:u.height)?(null==u?void 0:u.height)+"%":"100%"),objectPosition:" ".concat(null==s?void 0:s.x,"% ").concat(null==s?void 0:s.y,"%")},position_buttn:"left"===m?"right-[2rem] xl:right-[6rem]":"left-[2rem] xl:left-[6rem]"}},n=e=>{var t,r;let{formCore:l}=e,i=null===(t=l.form_avatar)||void 0===t?void 0:t.mode_shape,n=null===(r=l.form_avatar)||void 0===r?void 0:r.position,a="rounded-0",o="right-0";return"circle"===i&&(a="rounded-full"),"left"===n&&(o="left-0"),"center"===n&&(o="left-[50%] translate-x-[-50%]"),{shape:a,position:o}},a=e=>{let{dates_in_month:t,results:r}=e,i=[],n=Array(t).fill(0).map((e,t)=>t+1).map((e,t)=>{r.map(t=>{if((0,l.pP)(t.createdAt||"")===e){var r,n;if(!i.map(e=>e.date_createdAt).includes(e))return i.push({date_createdAt:e,forms:[t],match:!0,date_full:t.createdAt});let l=i.findIndex(t=>t.date_createdAt===e);if(-1!==l&&(null===(r=i[l].forms)||void 0===r?void 0:r.length)>0){null===(n=i[l].forms)||void 0===n||n.push(t);return}return i[l].forms=[t],i[l].match=!0,void(i[l].date_full=t.createdAt)}if(!i.map(e=>e.date_createdAt).includes(e))return i.push({date_createdAt:e,forms:null,match:!1})})});return{data_in_month:i,filter_form:n}},o=e=>{let{formAnswer:t,formView:r}=e,l=t/r*100;return isNaN(l)?0:l.toFixed(2)}}}]);