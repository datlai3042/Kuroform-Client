"use strict";exports.id=3934,exports.ids=[3934],exports.modules={31122:(e,t,r)=>{r.d(t,{Z:()=>h});var l=r(95344),i=r(3729),a=r(10142);let n=e=>{let{dataRender:t,label:r,disable:n=!1,clear:s=!1,onChange:o,defaultValue:m}=e,[u,d]=(0,i.useState)(!1),[c,p]=(0,i.useState)(m||void 0),f=(0,i.useRef)(null),h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{f.current&&h.current&&u&&(f.current.scrollTop=h.current.offsetTop)},[u]),(0,i.useEffect)(()=>{p(m)},[m]),(0,i.useEffect)(()=>{p(void 0)},[t]),(0,i.useEffect)(()=>{s&&p(void 0)},[s]),(0,l.jsxs)("button",{disabled:n,onClick:e=>{e.preventDefault(),e.stopPropagation(),d(e=>!e)},className:"relative min-w-[18rem] text-[1.4rem] border-[.1rem] border-[#ccc] w-max  max-h-[8rem] xl:h-[3rem] py-[.3rem] flex items-center justify-center gap-[1rem] rounded-lg disabled:cursor-not-allowed ",children:[l.jsx("span",{children:c?.label||r}),u&&l.jsx("div",{className:"absolute bottom-0  w-full z-[3] top-[4rem] right-[0rem] left-0",children:l.jsx(a.Z,{setOpenModel:d,children:l.jsx("ul",{ref:f,className:"scroll-text-size text-[1.3rem]  w-full max-h-[16rem]  overflow-y-scroll bg-[#ffffff] text-[#000] border-[.1rem] border-gray-200 outline-none rounded-lg",children:t.map((e,t)=>e.label===c?.label?l.jsx("li",{ref:h,className:"bg-blue-400 p-[1rem_2rem] hover:cursor-pointer flex items-center justify-center",children:c.label},c.label+t):l.jsx("li",{onClick:()=>{o&&o(e),p({...e})},className:"p-[1rem_2rem] hover:bg-blue-200 hover:cursor-pointer flex items-center justify-center",children:e.label},e?.label+t))})})})]})};var s=r(47612);class o{static async getAllProvinces(){return s.Z.get("/v1/api/common/address/get-all-provinces")}static async getDistrictWithPattern({province_code:e}){return s.Z.get(`/v1/api/common/address/get-district-with-pattern?province_code=${e}`)}static async getWardWithPattern({district_code:e}){return s.Z.get(`/v1/api/common/address/get-ward-with-pattern?district_code=${e}`)}}var m=r(65712);let u=()=>(0,m.a)({queryKey:["get-all-provinces"],queryFn:()=>o.getAllProvinces()}),d=e=>{let{province_code:t}=e;return(0,m.a)({queryKey:["get-all-provinces",t],queryFn:()=>o.getDistrictWithPattern({province_code:t}),enabled:!!t})},c=e=>{let{district_code:t}=e;return(0,m.a)({queryKey:["get-all-provinces",t],queryFn:()=>o.getWardWithPattern({district_code:t}),enabled:!!t})};var p=r(36013),f=r(49631);let h=e=>{let{onChange:t,detail:r=!1,onCheckFullField:a,defaultValue:s}=e,[o,m]=(0,i.useState)(s?{code:+s?.province.value,name:s?.province?.label,name_with_type:s.province?.name_with_type||"",path_with_type:s.province?.name_with_type||""}:{code:void 0,name:"",name_with_type:"",path_with_type:""}),[h,_]=(0,i.useState)(s?{code:+s?.district.value,name:s?.district?.label,name_with_type:s.district?.name_with_type||"",path_with_type:s.district?.path_with_type||""}:{code:void 0,name:"",name_with_type:"",path_with_type:""}),[x,g]=(0,i.useState)(s?{code:+s?.ward.value,name:s?.ward?.label,name_with_type:s.ward?.name_with_type||"",path_with_type:s.ward?.path_with_type||""}:{code:void 0,name:"",name_with_type:"",path_with_type:""}),[v,b]=(0,i.useState)(s?.street||""),y=(0,p.v9)(e=>e.address.provinces),j=(0,p.I0)(),w=u(),N=d({province_code:o.code}),I=c({district_code:h.code}),[C,Z]=(0,i.useState)(!1),E=(0,i.useMemo)(()=>{let e=[];if(N.isSuccess){let{districts:t}=N.data.metadata;e=t.map(e=>({label:e.name,value:e.code,path_with_type:e.path_with_type,name_with_type:e.name_with_type}))}return e},[o.code,N.isSuccess]),k=(0,i.useMemo)(()=>{let e=[];if(I.isSuccess){let{wards:t}=I.data.metadata;e=t.map(e=>({label:e.name,value:e.code,path_with_type:e.path_with_type,name_with_type:e.name_with_type}))}return e},[y,h.code,I.isSuccess]);return(0,i.useEffect)(()=>{if(y.length>0)return;let e=[];if(w.isSuccess){let{provinces:t}=w.data?.metadata;e=t.map(e=>({label:e.name,value:e.code,name_with_type:e.name_with_type,path_with_type:e.name_with_type}))}j((0,f.tN)({provinces:e}))},[w.isSuccess]),(0,i.useEffect)(()=>{if(o.code||h.code||x.code||v){if(t){let e=`${r?v:""} `,l="";!o.code||h.code||x.code?o.code&&h.code&&!x.code?l=h.path_with_type:o.code&&h.code&&x.code&&(l=x.path_with_type):l=o.path_with_type;let i=`${r?v:""} ${l}`,a=l,n=[{type:"province",code:o?.code?.toString(),name_with_type:o.name_with_type,path_with_type:o.path_with_type},{type:"district",code:h?.code?.toString(),name_with_type:h.name_with_type,path_with_type:h.path_with_type},{type:"ward",code:x?.code?.toString(),name_with_type:x.name_with_type,path_with_type:x.path_with_type},{type:"street",code:"-1",name_with_type:o.code&&h.code&&x.code&&v?e:"",path_with_type:o.code&&h.code&&x.code&&v?e:""}];t({addressString:e,addressValidate:n,addressCore:a,address_full:i})}if(a)return r?a(!!o.name&&!!h.name&&!!x.name&&!!v):a(!!o.name&&!!h.name&&!!x.name)}},[o,h,x,v]),(0,l.jsxs)("div",{className:"p-[1rem_0rem] flex flex-col gap-[2rem]",children:[(0,l.jsxs)("div",{className:"flex flex-col xl:flex-row flex-wrap gap-[2rem]",children:[l.jsx(n,{defaultValue:s?.province,dataRender:y,label:"Tỉnh / Th\xe0nh phố",onChange:e=>{o.code&&(Z(!0),_({code:void 0,name:"",name_with_type:"",path_with_type:""}),g({code:void 0,name:"",name_with_type:"",path_with_type:""}));let{label:t,value:r,name_with_type:l,path_with_type:i}=e;m(()=>({code:+r,name:t,name_with_type:l,path_with_type:i}))}}),l.jsx(n,{defaultValue:s?.district,dataRender:E,label:"Quận / Huyện",onChange:e=>{C&&Z(!1);let{label:t,value:r,name_with_type:l,path_with_type:i}=e;_(()=>({code:+r,name:t,name_with_type:l,path_with_type:i}))},disable:void 0===o.code,clear:C}),l.jsx(n,{defaultValue:s?.ward,dataRender:k,label:"Phường / X\xe3",onChange:e=>{C&&Z(!1);let{label:t,value:r,name_with_type:l,path_with_type:i}=e;g(()=>({code:+r,name:t,name_with_type:l,path_with_type:i}))},disable:void 0===o.code||void 0===h.code,clear:C})]}),r&&l.jsx("input",{value:v,onChange:e=>b(e.target.value),placeholder:"Nhập địa chỉ chi tiết",className:"heading-answer group w-full h-[4rem] px-[.8rem] flex items-center  text-[1.4rem] break-words whitespace-pre-wrap  border-b-[.1rem] border-gray-300 rounded-lg outline-none resize-none text-[#000]"})]})}},73602:(e,t,r)=>{r.d(t,{Z:()=>o});var l=r(95344),i=r(89410),a=r(3729),n=r(10142),s=r(53603);let o=e=>{let{imageActive:t,imagesUrl:r,setOpenModel:o}=e,[m,u]=(0,a.useState)(t);return(0,a.useEffect)(()=>{let e=document.querySelector("body");return e&&(e.style.overflow="hidden"),()=>{e.style.overflow="scroll"}},[]),l.jsx(s.Z,{children:l.jsx("div",{className:"animate-modeScreen transition-[scale] duration-300 fixed inset-0 min-h-screen  flex items-center justify-center pt-[4rem] bg-[rgba(0,0,0,.87)] z-[1000] hover:cursor-pointer",children:l.jsx(n.Z,{setOpenModel:o,width:"w-max",height:"h-[60rem]",children:(0,l.jsxs)("div",{className:"w-full  xl:h-[60rem]  flex flex-col items-center gap-[5rem] ",children:[l.jsx("div",{className:"w-[35rem] h-[35rem] xl:w-[45rem] min-h-[70%] max-h-[70%]",children:l.jsx(i.default,{src:m,width:400,height:400,alt:"image form",className:"w-full h-full bg-[#ccc]",unoptimized:!1})}),l.jsx("div",{className:"  flex gap-[4rem] max-w-[30rem] xl:max-w-[80rem] pb-[2rem] mx-auto overflow-x-scroll scroll-images",children:r.map(e=>(0,l.jsxs)("div",{className:"group relative min-w-[8rem] min-h-[8rem] hover:cursor-pointer ",children:[l.jsx(i.default,{src:e,width:400,height:400,alt:"image form",className:`${e===m?"z-[2] border-[.4rem] border-color-main":"border-[.4rem] border-[#ccc] group-hover:border-color-main"} group-hover:z-[2] absolute inset-0 w-full h-full transition-all duration-500 bg-[#ccc]`,onClick:()=>u(e)}),l.jsx("div",{className:"absolute inset-0 bg-[rgba(0,0,0,.6)]"})]},e))})]})})})})}},23855:(e,t,r)=>{r.d(t,{Z:()=>d});var l=r(95344),i=r(97751),a=r(71532),n=r(89410),s=r(3729),o=r(36013),m=r(23902),u=r(73602);let d=e=>{let{images:t,type:r,page:d,colorMain:c}=e,[p,f]=(0,s.useState)(0),[h,_]=(0,s.useState)(!1),x=(0,s.useRef)(null),g=(0,s.useRef)(null),[v,b]=(0,s.useState)(0),y=(0,o.v9)(e=>e.form.formCoreOriginal),j=e=>{if(g.current&&x.current){let t=-(x.current?.getBoundingClientRect().width*1);g.current.style.transform=`translateX(${t*e}px)`,g.current.style.transition="all 0s",f(e)}};(0,s.useEffect)(()=>{if(g.current&&x.current){let e=-(x.current?.getBoundingClientRect().width*1);g.current.style.transform=`translateX(${e*p}px)`,g.current.style.transition="all 0s"}},[p]),(0,s.useEffect)(()=>{g.current&&x.current&&b(-(x.current?.getBoundingClientRect().width*1))},[]);let w="Edit"===d?"w-[26rem] sm:w-[55rem] xl:w-[75rem] ":"w-[26rem] sm:w-[55rem] xl:w-[60rem]",N=y.form_title.form_title_sub.filter(e=>"Image"===e.type).length>4;return l.jsx("div",{className:"w-max min-w-full flex justify-center",children:(0,l.jsxs)("div",{ref:x,className:`${w}  relative h-[48rem] xl:h-[47rem] pb-[6rem]  overflow-y-hidden overflow-x-hidden`,children:[(0,l.jsxs)("div",{className:"w-full h-[30rem] relative",children:[l.jsx("button",{style:{backgroundColor:c},disabled:p+1>=t.length,onClick:()=>{p+1!==y.form_title.form_title_sub.length&&f(e=>e+=1)},className:"absolute top-[50%] translate-y-[-50%] right-0 z-[100] w-[3rem] h-[3rem] xl:w-[4rem] xl:h-[4rem] flex items-center justify-center    rounded-lg disabled:hover:cursor-not-allowed",children:l.jsx(i.Z,{color:"white"})}),l.jsx("div",{ref:g,className:"min-w-full max-h-[30rem] w-max  flex  items-center justify-center ",children:"Components"===r&&t.map(e=>l.jsx("div",{className:` max-h-[30rem] ${w} flex  justify-center`,onClick:()=>_(!0),children:l.jsx(m.Z,{mode:"Slider",page:d,subTitleItem:e,className:"!h-[30rem] "})},e._id))}),l.jsx("button",{style:{backgroundColor:c},disabled:0===p,onClick:()=>{p+1!==1&&f(e=>e-=1)},className:"absolute top-[50%] translate-y-[-50%] left-0 w-[3rem] h-[3rem] xl:w-[4rem] xl:h-[4rem] flex items-center justify-center bg-[#ffffff] border-[.1rem]  rounded-lg disabled:hover:cursor-not-allowed",children:l.jsx(a.Z,{color:"white"})})]}),h&&l.jsx(u.Z,{imageActive:t[p].core.url,imagesUrl:t.map(e=>e.core.url),setOpenModel:_}),l.jsx("div",{className:"absolute bottom-[1rem]  left-[50%] translate-x-[-50%] flex gap-[2rem]",children:t.map((e,t)=>l.jsx("button",{className:"w-[1.6rem] h-[1.6rem] flex items-center justify-center rounded-full bg-slate-200 ",onClick:()=>f(t),children:t===p&&l.jsx("div",{className:"bg-color-main w-[60%] h-[60%] rounded-full "})},t))}),"Components"===r&&l.jsx("div",{className:`${N?"":"justify-center"} absolute bottom-[4rem] w-full left-[50%] translate-x-[-50%] flex justify-center gap-[4rem] pb-[2rem]  scroll-images overflow-x-auto hover:cursor-pointer`,children:t.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>j(t),className:`${t===p?"z-[3] border-[.4rem] border-color-main ":"border-[.4rem] border-transparent hover:border-color-main"}  relative group min-w-[7rem] min-h-[7rem] rounded-lg `,children:[l.jsx(n.default,{src:e.core.url,width:70,height:70,alt:"image form",className:"group-hover:z-[3] transition-all duration-500 absolute inset-0 w-full h-full  flex items-center justify-center  bg-[#000000] opacity-75 "}),l.jsx("div",{className:" absolute inset-0 bg-[rgba(0,0,0,.6)] z-[2]"})]},e._id))})]})})}},53603:(e,t,r)=>{r.d(t,{Z:()=>l}),r(3729),r(81202);let l=e=>{let{children:t}=e;return null}},91905:(e,t,r)=>{r.d(t,{H:()=>n,Z:()=>s});var l=r(95344),i=r(63364),a=r(3729);let n=(0,a.createContext)({formAnswer:{inputFormData:[],inputFormErrors:[],inputFormRequire:[],openModelError:!1,form_answer_id:"",submitState:"clear"},setFormAnswer:()=>{}}),s=e=>{let{formCore:t,children:r,form_answer_id:s}=e,[o,m]=(0,a.useState)(()=>({inputFormData:t.form_inputs.map(e=>"OPTION_MULTIPLE"===e.type?{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",value:[],type:e.type}:"OPTION"===e.type?{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",type:e.type,value:{option_value:"",option_id:""}}:"ADDRESS"===e.type?{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",value:{addressString:"",address_full:"",addressValidate:i.Oy,addressCore:""},type:e.type}:{setting:e.core.setting,_id:e._id,title:e.input_title||"",mode:e.core.setting.require?"Require":"Optional",value:"",type:e.type}),inputFormErrors:[],form_answer_id:s,inputFormRequire:t.form_inputs.reduce((e,t)=>(t.core.setting.require&&e.push({_id:t._id,title:t.input_title,checkRequire:!1}),e),[]),openModelError:!1,submitState:"clear"}));return l.jsx(n.Provider,{value:{formAnswer:o,setFormAnswer:m},children:r})}},14899:(e,t,r)=>{r.d(t,{Z:()=>i});var l=r(95344);let i=(0,r(3729).forwardRef)((e,t)=>{let{children:r,...i}=e;return l.jsx("div",{...i,ref:t,children:r})})},77823:(e,t,r)=>{r.d(t,{Z:()=>i});var l=r(95344);r(3729);let i=()=>l.jsx("div",{className:" text-text-theme",children:(0,l.jsxs)("div",{className:"w-full h-[2rem] flex items-center gap-[1rem] ",children:[l.jsx("div",{className:"w-[1rem] h-[1rem] bg-[#ccc] rounded-full"}),l.jsx("span",{className:"text-[1.2rem] font-semibold",children:"Chưa upload"})]})})},95780:(e,t,r)=>{r.d(t,{Z:()=>i});var l=r(95344);r(3729);let i=()=>(0,l.jsxs)("div",{className:"w-full h-[2rem] flex items-center gap-[1rem] text-green-400",children:[l.jsx("div",{className:"w-[1rem] h-[1rem] bg-green-400 rounded-full"}),l.jsx("span",{className:"text-[1.2rem] font-semibold",children:"Tải l\xean th\xe0nh c\xf4ng"})]})},23902:(e,t,r)=>{r.d(t,{Z:()=>b});var l=r(95344),i=r(41197),a=r(44178),n=r(85473),s=r(87838),o=r(42843),m=r(24395),u=r(72043),d=r(31296),c=r(38271),p=r(89410),f=r(3729),h=r(36013),_=r(73602),x=r(25234),g=r(62020),v=r(7892);let b=e=>{let{subTitleItem:t,className:r,page:b,mode:y}=e,j=(0,h.v9)(e=>e.form.formCoreOriginal),w=(0,f.useRef)(null),N=(0,h.I0)(),[I,C]=(0,f.useState)(!1),{attributes:Z,listeners:E,setNodeRef:k,transform:S,transition:A}=(0,m.nB)({id:t._id}),R={transition:A,transform:u.ux.Transform.toString(S)},T=(0,d.D)({mutationKey:["upload-title-image",t._id],mutationFn:e=>s.Z.uploadTitleImage(e),onSuccess:e=>{let{form:t}=e.metadata;N((0,i.ow)({form:t}))}}),q=(0,o.Z)(),M=()=>{let e=structuredClone(j);e.form_title.form_title_sub=e.form_title.form_title_sub.filter(e=>e._id!==t._id),q.mutate(e)},D=j.form_title.form_title_color||j.form_setting_default.form_title_color_default;if(!t?.core?.url&&"Edit"===b)return(0,l.jsxs)("div",{className:"flex flex-col gap-[1rem]",children:[(0,l.jsxs)("button",{className:"flex items-center gap-[.5rem] text-[1.4rem] font-bold text-textHeader hover:text-slate-800",onClick:M,disabled:q.isPending,children:[l.jsx(c.Z,{size:16}),n.R.title.optionImage.remove]}),(0,l.jsxs)("div",{className:"flex items-center gap-[2rem]",children:[l.jsx("button",{onClick:()=>{w.current&&(w.current.value="",w.current.click())},className:"btn-primarily min-w-[7rem] w-max h-[4rem] text-[1.4rem] flex justify-center items-center gap-[1rem] p-[.1rem_.7rem] text-[#fff]  rounded-lg",children:n.R.title.optionImage.complete}),T.isPending&&l.jsx(a.Z,{color:D})]}),l.jsx("input",{type:"file",hidden:!0,ref:w,onChange:e=>{if(e.target&&e.target.files){let r=e.target.files[0],{_check:l,message:i}=(0,x.s)({file:r,sizeAllowOptions:3});if(!l)return N((0,g.DT)({toast_item:{_id:(0,v.Z)(),type:"ERROR",core:{message:i},toast_title:"Lỗi File Upload"}}));let a=new FormData;a.append("file",e.target.files[0]),a.append("titleSubId",t._id),a.append("form_id",j._id),T.mutate(a)}}})]});let F="Normal"===j.form_title.form_title_mode_image?"!w-[30rem]":"w-full",P=j.form_title.form_title_sub.reduce((e,t)=>("Image"===t.type&&t?.core?.url&&e.push(t?.core?.url),e),[]);return(0,l.jsxs)("div",{className:`${"Edit"===b?"w-[20rem] sm:w-[51rem] xl:w-[50rem] ":"w-full xl:w-[62rem]  items-center"} ${F}  flex flex-col   gap-[.5rem]   outline-none rounded-lg `,ref:k,...Z,...E,style:R,children:["Edit"===b&&"Normal"===y&&(0,l.jsxs)("button",{className:"flex items-center gap-[.5rem] text-[1.4rem] font-bold text-textHeader hover:text-slate-800 ",onClick:M,disabled:q.isPending,children:[l.jsx(c.Z,{size:16}),n.R.title.optionImage.remove]}),t?.core?.url&&l.jsx("div",{className:"w-full h-[30rem] flex justify-center   ",children:l.jsx(p.default,{onClick:()=>C(!0),width:100,height:100,quality:100,unoptimized:!0,alt:"avatar title",src:t.core.url,className:`${r} ${"Normal"===y?"Edit"===b?"max-h-[40rem] w-full":"  w-full":""}  ${"Slider"===y?"Edit"===b?"w-full xl:w-[70%] h-[30rem]":"h-[30rem] w-[70%]":""} 	  object-center rounded-lg`})}),I&&l.jsx(_.Z,{imageActive:t.core.url,imagesUrl:P,setOpenModel:C})]})}},90271:(e,t,r)=>{r.d(t,{Z:()=>a});var l=r(95344);r(3729);var i=r(36013);let a=e=>{let{children:t,error:r,inputItemInArrayGlobal:a,input_id:n,write:s}=e;return(0,i.v9)(e=>e.form.colorCore),l.jsx("div",{id:`_inputid_${n}`,className:`${r&&r.error&&s||a?.globalError?.state?"input-answer-invalid":" border-[.3rem] border-transparent "} relative w-full min-h-[24rem] h-max p-[2rem_3rem] duration-300 transition-all flex flex-col justify-center gap-[1.8rem]  rounded-lg`,children:t})}},6519:(e,t,r)=>{r.d(t,{Z:()=>s});var l=r(95344);r(3729);var i=r(23363),a=r(95269);let n=e=>{let{type:t,message:r}=e;return(0,l.jsxs)(i.Z,{className:"flex items-center gap-[1rem] ",children:[l.jsx(a.Z,{className:"text-red-800"}),(0,l.jsxs)("span",{className:"text-[1.4rem] text-red-800",children:[`${t?"Lỗi #"+t+": ":""}`," ",r]})]})},s=e=>{let{inputItem:t,inputItemInArrayGlobal:r}=e;return l.jsx(n,{message:t.core.setting.input_error_state?t.core.setting.input_error:r?.globalError?.message,type:r?.globalError?.type})}},18324:(e,t,r)=>{r.d(t,{Z:()=>n});var l=r(95344),i=r(63080),a=r(89410);r(3729);let n=e=>{let{formCore:t}=e,r=t?.form_title?.form_title_color||t.form_setting_default.form_title_color_default,n=t.form_background?.form_background_iamge_url||t.form_setting_default.form_background_default_url;t.form_background?.position,t.form_background?.mode_show;let s=t.form_background?.padding.x||0,o=t.form_background?.padding.y||0,m=`${o}% ${s}%`,u=(0,i.G0)({formCore:t,mode:"answer"});return(0,l.jsxs)("div",{className:"relative w-full h-[32.5rem] rounded-2xl max-h-[32.5rem] ",children:[(t.form_background?.form_background_iamge_url||t.form_background_state)&&l.jsx("div",{style:{backgroundColor:t.form_background?.backgroundColor||"#fff",padding:m},className:"w-full h-full rounded-2xl relative overflow-hidden",children:l.jsx(a.default,{style:u.style_background,src:n,width:800,height:160,quality:100,alt:"form background",className:"w-full h-full min-h-[32.5rem] max-h-[32.5rem]  rounded-lg absolute"})}),!t.form_background?.form_background_iamge_url&&!t.form_background_state&&l.jsx("div",{style:{backgroundColor:r},className:"w-full  h-full rounded-lg opacity-90"})]})}},24500:(e,t,r)=>{r.d(t,{Z:()=>i});var l=r(95344);r(3729);let i=e=>{let{formCore:t,inputItem:r}=e;return(0,l.jsxs)("p",{style:({styleTitle:()=>({fontSize:r.core.setting.input_size||t.form_setting_default.input_size,color:r.core.setting.input_color||t.form_setting_default.input_color,fontStyle:r.core.setting.input_style||t.form_setting_default.input_style})}).styleTitle(),className:"flex items-center gap-[.6rem] text-[2rem] font-medium",children:[r.input_title||"Kh\xf4ng c\xf3 ti\xeau đề",r.core.setting.require&&l.jsx("span",{className:"text-red-800",children:"*"})]})}},5325:(e,t,r)=>{r.d(t,{Z:()=>a});var l=r(95344),i=r(23363);r(3729);let a=e=>{let{children:t}=e;return l.jsx(i.Z,{className:" w-full min-h-[18rem] h-max  bg-[#ffffff]  rounded-xl",children:t})}},16083:(e,t,r)=>{r.d(t,{Z:()=>h});var l=r(95344),i=r(23363),a=r(39832),n=r(3729),s=r(91905),o=r(5325),m=r(87865),u=r(71055),d=r(24500),c=r(32883),p=r(90271),f=r(6519);let h=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:h,inputFormData:_,submitState:x},setFormAnswer:g}=(0,n.useContext)(s.H),v=(0,n.useMemo)(()=>(0,u.cC)({inputFormErrors:h,inputItem:t,inputFormData:_}),[t,h,_]),[b,y]=(0,n.useState)(v.input?.value||""),[j,w]=(0,n.useState)(!1);return l.jsx(o.Z,{children:(0,l.jsxs)(p.Z,{inputItemInArrayGlobal:v,input_id:t._id,write:j,children:[l.jsx(d.Z,{formCore:r,inputItem:t}),l.jsx(i.Z,{className:"flex flex-col gap-[.3rem]",children:(0,l.jsxs)(i.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:[l.jsx("input",{disabled:"pending"===x,defaultValue:b,className:`
							)}  ${c.Z.StyleTitle({formCore:r,inputItem:t})} w-[90%] h-full pb-[2rem] border-b-[.1rem] border-gray-300  outline-none text-[1.7rem] placeholder:text-[1.3rem]`,onChange:e=>y(e.target.value),onFocus:()=>{w(!0),(0,u.EQ)({setFormAnswer:g,inputFormErrors:h,inputItem:t})},onBlur:()=>{j&&(0,u.qy)({inputItem:t,inputValue:b,setFormAnswer:g,validateCallback:m.q})},placeholder:t.core.setting.placeholder}),l.jsx(i.Z,{className:"absolute z-[2] right-[1rem]",title:"",children:l.jsx(a.Z,{className:" text-textMain opacity-50",size:18})})]})}),v?.globalError?.state&&l.jsx(f.Z,{inputItem:t,inputItemInArrayGlobal:v})]})})}},32256:(e,t,r)=>{r.d(t,{Z:()=>_});var l=r(95344),i=r(3729),a=r(5325),n=r(23363),s=r(14899),o=r(91905),m=r(90170),u=r(71055);let d=e=>{let{inputItem:t,value:r}=e,i={checkMinLength:(e,t,r)=>{let l=e.length;return e.length&&l<t?"text-red-800 font-bold underline":""},checkMaxLength:(e,t,r)=>{let l=e.length;return e.length?l>t?"text-red-800 font-bold underline":l<=t?"":void 0:""}};return(0,l.jsxs)(l.Fragment,{children:[l.jsx("span",{className:`${i.checkMinLength(r,t.core.setting.minLength,t.core.setting.require)}  font-bold `,children:t.core.setting.minLength}),l.jsx("span",{children:"/"}),l.jsx("span",{className:`${i.checkMaxLength(r,t.core.setting.maxLength,t.core.setting.require)}  font-bold `,children:r.length<t.core.setting.maxLength?t.core.setting.maxLength:r.length})]})};var c=r(32883),p=r(24500),f=r(90271),h=r(6519);let _=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:_,inputFormData:x,submitState:g},setFormAnswer:v}=(0,i.useContext)(o.H),[b,y]=(0,i.useState)(!1),j=(0,i.useMemo)(()=>(0,u.cC)({inputFormErrors:_,inputItem:t,inputFormData:x}),[t,_,x]),w=(0,i.useRef)(null),N=e=>{if(b&&w.current){let e=w.current.textContent;(0,u.qy)({inputItem:t,inputValue:e,setFormAnswer:v,validateCallback:m.W})}};return(0,i.useEffect)(()=>{w.current&&(w.current.textContent=j.input?.value)},[]),l.jsx(a.Z,{children:(0,l.jsxs)(f.Z,{inputItemInArrayGlobal:j,input_id:t._id,write:b,children:[l.jsx(p.Z,{inputItem:t,formCore:r}),(0,l.jsxs)(n.Z,{className:"flex flex-col gap-[.3rem]",children:[l.jsx(n.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:l.jsx(s.Z,{ref:w,className:`${c.Z.StyleTitle({formCore:r,inputItem:t})} heading-answer group w-full min-h-[2rem] pb-[2rem] text-[1.7rem] break-words whitespace-pre-wrap h-max border-b-[.1rem] border-gray-300 rounded-lg outline-none resize-none `,onClick:()=>w.current?.focus(),onBlur:e=>N(e),onFocus:()=>{y(!0),(0,u.EQ)({setFormAnswer:v,inputFormErrors:_,inputItem:t})},spellCheck:!1,contentEditable:"pending"!==g,"data-text":`${t.core.setting?.placeholder||"Typing your text"}`,suppressContentEditableWarning:!0,tabIndex:0})}),l.jsx("p",{className:"absolute bottom-[2.5rem] right-[2.5rem] text-[1.2rem]",children:l.jsx(d,{value:j.input?.value,inputItem:t})})]}),j?.globalError?.state&&l.jsx(h.Z,{inputItem:t,inputItemInArrayGlobal:j})]})})}},71055:(e,t,r)=>{r.d(t,{EQ:()=>y,VQ:()=>_,Z:()=>p,cC:()=>b,l1:()=>f,qy:()=>j,wY:()=>c});var l=r(90170),i=r(87865),a=r(63364),n=r(5398),s=r(66751),o=r(21797),m=r(69573),u=r(28405);let d=(e,t,r,l,i)=>{e(e=>{let a=[],n=structuredClone(e);return e.inputFormErrors.some(e=>e._id===t)?(a=e.inputFormErrors.map(e=>(e._id===t&&(e.title=r,e.type=l,e.message=i),e)),{...n,inputFormErrors:a}):((a=[...n.inputFormErrors]).push({_id:t,title:r,type:l,message:i}),n.inputFormErrors=a,n)})},c=(e,t)=>{e(e=>{let r=structuredClone(e);return r.inputFormErrors=r.inputFormErrors.filter(e=>e._id!==t?e:null),r})},p=(e,t,r)=>{e(e=>{let l=structuredClone(e);return l.inputFormRequire=e.inputFormRequire.map(e=>(e._id===t&&(e.checkRequire=r),e)),l})},f=({callback:e,input_id:t,input_value:r})=>{e(e=>{let l=structuredClone(e);return l.inputFormData=e.inputFormData.map(e=>(e._id===t&&"OPTION_MULTIPLE"===e.type||e._id===t&&"OPTION"===e.type?e.value=r:e._id===t&&(e.value=r||""),e)),l})},h=(e,t)=>e.type===t,_=(e=[],t,r)=>(console.log(t),r.map(r=>{let d=t.filter(e=>e._id===r._id&&r.setting?.require)[0];if(d){e.push(d);return}if(!d&&"TEXT"===r.type){let{_next:t,message:i,type:a}=(0,l.W)({inputValue:r.value,inputSetting:r.setting});if(t)return;let n={_id:r._id,title:r.title,type:a,message:i};e.push(n)}if(!d&&"EMAIL"===r.type){let{_next:t,message:l,type:a}=(0,i.q)({inputValue:r.value,inputSetting:r.setting});if(t)return;let n={_id:r._id,title:r.title,type:a,message:l};e.push(n)}if(!d&&"PHONE"===r.type){let{_next:t,message:l,type:i}=(0,n.f)({inputValue:r.value,inputSetting:r.setting});if(t)return;let a={_id:r._id,title:r.title,type:i,message:l};e.push(a)}if(!d&&"VOTE"===r.type){let{_next:t,message:l,type:i}=(0,s.m)({inputValue:r.value,inputSetting:r.setting});if(t)return;let a={_id:r._id,title:r.title,type:i,message:l};e.push(a)}if(!d&&"DATE"===r.type){let{_next:t,message:l,type:i}=(0,o.Z)({inputValue:r.value,inputSetting:r.setting});if(t)return;let a={_id:r._id,title:r.title,type:i,message:l};e.push(a)}if(d||"OPTION"!==r.type||!r.value){if(!d&&"OPTION"===r.type&&!r.value&&r.setting?.require){let t={_id:r._id,title:r.title,type:"REQUIRE",message:a.uD};e.push(t)}if(d||"OPTION_MULTIPLE"!==r.type||!(r.value.length>0)){if(!d&&"OPTION_MULTIPLE"===r.type&&0===r.value.length&&r.setting?.require){let t={_id:r._id,title:r.title,type:"REQUIRE",message:a.uD};e.push(t)}if(d||"FILE_IMAGE"!==r.type||!(r.value.length>0)){if(!d&&"FILE_IMAGE"===r.type&&0===r.value.length&&r.setting?.require){let t={_id:r._id,title:r.title,type:"REQUIRE",message:a.uD};e.push(t)}if(!d&&"ADDRESS"===r.type&&r.setting&&h(r,"ADDRESS")){let{_next:t,message:l,type:i}=(0,m.Z)({inputValue:r.value,inputSetting:r.setting});if(!t){let t={_id:r._id,title:r.title,type:i,message:l};e.push(t)}}if(!d&&"ANCHOR"===r.type&&r.setting&&h(r,"ANCHOR")){let{_next:t,message:l,type:i}=(0,u.Z)({inputValue:r.value,inputSetting:r.setting});if(!t){let t={_id:r._id,title:r.title,type:i,message:l};e.push(t)}}}}}}),e),x=["TEXT","EMAIL","PHONE","VOTE","FILE_IMAGE","ANCHOR","DATE"],g=["OPTION","OPTION_MULTIPLE"],v=["ADDRESS"],b=({inputItem:e,inputFormErrors:t,inputFormData:r})=>{let l={},i=t.filter(t=>{if(t._id===e._id)return t}),a=r?.filter(t=>{if(t._id===e._id&&t.type===e.type)return t});return x.includes(e.type)&&(l={require:e.core.setting.require,globalError:{state:!!i[0],message:i[0]?.message||"",type:i[0]?.type||null},input:a[0]}),g.includes(e.type)&&(l={require:e.core.setting.require,globalError:{state:!!i[0],message:i[0]?.message||"",type:i[0]?.type||null},input:a[0]}),v.includes(e.type)&&(l={require:e.core.setting.require,globalError:{state:!!i[0],message:i[0]?.message||"",type:i[0]?.type||null},input:a[0]}),l},y=e=>{let{inputItem:t,inputFormErrors:r,setFormAnswer:l}=e;r.some(e=>e._id===t._id)&&c(l,t._id),t.core.setting.require&&p(l,t._id,!1)},j=e=>{let{inputValue:t,inputItem:r,setFormAnswer:l,validateCallback:i}=e,{setting:a}=r.core,{_next:n,message:s,type:o}=i({inputValue:t,inputSetting:a});return n?(r.core.setting.require&&p(l,r._id,!0),r.type,f({callback:l,input_id:r._id,input_value:t})):(f({callback:l,input_id:r._id,input_value:t}),d(l,r._id,r.input_title||"",o,s)),{_next:n,message:s,type:o}}},69573:(e,t,r)=>{r.d(t,{Z:()=>i});let l=e=>{switch(e){case"province":return"Tỉnh - Th\xe0nh phố";case"district":return"Th\xe0nh phố - Huyện ";case"ward":return"Phường - X\xe3";case"street":return"T\xean Đường";default:return"Địa chỉ"}},i=({inputValue:e,inputSetting:t})=>{let r=!0,i="",{addressValidate:a,addressString:n}=e,s=null,{require:o}=t,m=a&&a[0]?.path_with_type&&a[1]?.path_with_type&&a[2]?.path_with_type&&a[3]?.path_with_type;if(o){if(n&&m)return{_next:r,message:i,type:s};if(!n||!m){let e=[];return a.forEach(t=>{if(!t.path_with_type){if("street"==t.type){e.push(l("street"));return}e.push(l(t.type))}}),{_next:r=!1,message:i=e.join(", ")+"  bắt buộc nhập",type:s="INVAILD"}}}if(!o){if(m)return{_next:r,message:i,type:s};if(a&&(a[0]?.path_with_type||a[1]?.path_with_type||a[2]?.path_with_type||a[3]?.path_with_type))return{_next:r=!1,message:i="Địa chỉ bạn cung cấp kh\xf4ng đầy đủ",type:s="INVAILD"}}return{_next:r,message:i,type:s}}},28405:(e,t,r)=>{r.d(t,{Z:()=>a});var l=r(63364),i=r(46499);let a=({inputValue:e,inputSetting:t})=>{let r=!0,a="",n=null,{require:s}=t;if(!s&&!e)return{_next:r,message:a,type:n};if(s&&!e)return{_next:r=!1,message:a=l.uD,type:n="REQUIRE"};let o=new RegExp(i.hI,i.vm);return e.match(o)||(r=!1,a=(0,l.Af)("Địa chỉ đường dẫn kh\xf4ng hợp lệ"),n="INVAILD"),{_next:r,message:a,type:n}}},21797:(e,t,r)=>{r.d(t,{Z:()=>n});var l=r(63364),i=r(77030),a=r.n(i);let n=({inputValue:e,inputSetting:t})=>{let r=!0,i="",n=null,{require:s}=t;return s?s&&e&&!a()(e).isValid()?{_next:r=!1,message:i=l.uD,type:n="REQUIRE"}:(s&&!e&&(r=!1,i=l.uD,n="REQUIRE"),{_next:r,message:i,type:n}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},87865:(e,t,r)=>{r.d(t,{q:()=>i});var l=r(63364);let i=({inputValue:e,inputSetting:t})=>{let r=!0,i="",a=l.Ej,n=e.match(a),s=null,o=e.length,{require:m,minLength:u,maxLength:d}=t;return m||e?m&&(!e||0===o)?{_next:r=!1,message:i=l.uD,type:s="REQUIRE"}:n?o>d?{_next:r=!1,message:i=(0,l.RM)(d),type:s="MAX"}:(o<u&&(r=!1,i=(0,l.fP)(u),s="MIN"),{_next:r,message:i,type:s}):{_next:r=!1,message:i=(0,l.Af)("Địa chỉ email kh\xf4ng hợp lệ"),type:s="INVAILD"}:{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},25234:(e,t,r)=>{r.d(t,{s:()=>i});let l=["image/png","image/jpg","image/jpeg"],i=({file:e,sizeAllowOptions:t})=>{let r=!1,i="",{size:a,type:n}=e,s=l.includes(n),o=t||2,m=a/1024/1024<o;return s&&m?{_check:r=!0,message:i}:(s||m||(i="File kh\xf4ng đ\xfang định dạng về đu\xf4i file v\xe0 k\xedch th\xedch file"),!s&&m&&(i="File kh\xf4ng đ\xfang định dạng - "+l.join(" - ")),s&&!m&&(i=`File phải nhỏ hơn ${o}mb`),{_check:r,message:i})}},5398:(e,t,r)=>{r.d(t,{f:()=>a,r:()=>i});var l=r(63364);let i=/^(0?)(3[2-9]|5[6|8|9]|7[0|6-9]|8[0-6|8|9]|9[0-4|6-9])[0-9]{7}$/,a=({inputValue:e,inputSetting:t})=>{let r=!0,a="",n=e.match(i),s=null,{require:o}=t;return o||e?o&&0===e.length?{_next:r=!1,message:a=l.uD,type:s="REQUIRE"}:(n||(r=!1,a=(0,l.Af)("Số điện thoại kh\xf4ng hợp lệ"),s="INVAILD"),{_next:r,message:a,type:s}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},90170:(e,t,r)=>{r.d(t,{W:()=>i});var l=r(63364);let i=({inputValue:e,inputSetting:t})=>{let r=!0,i="",a=null,n=e?.length||0,{require:s,minLength:o,maxLength:m}=t;return s||e?s&&(!e||0===n)?{_next:r=!1,message:i=l.uD,type:a="REQUIRE"}:n>m?{_next:r=!1,message:i=(0,l.RM)(m),type:a="MAX"}:(n<o&&(r=!1,i=(0,l.fP)(o),a="MIN"),{_next:r,message:i,type:a}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},66751:(e,t,r)=>{r.d(t,{m:()=>i});var l=r(63364);let i=({inputValue:e,inputSetting:t})=>{let r=!0,i="",a=null,{require:n}=t;return n||e?(n&&0==+e&&(r=!1,i=l.uD,a="REQUIRE"),{_next:r,message:i,type:a}):{_next:!0,message:"Đ\xe2y l\xe0 trường kh\xf4ng bắt buộc",type:null}}},32883:(e,t,r)=>{r.d(t,{Z:()=>i});class l{static BorderWrapperError({error:e,inputItemInArrayGlobal:t}){return e.error||t.require?"border-red-600":" border-zinc-200"}static BorderInputError({error:e}){return e.error?"border-red-600":"border-gray-100"}static StyleTitle({inputItem:e,formCore:t}){return{fontSize:e.core.setting.input_size||t.form_setting_default.input_size,color:e.core.setting.input_color||t.form_setting_default.input_color,fontStyle:e.core.setting.input_style||t.form_setting_default.input_style}}}let i=l},18780:(e,t,r)=>{r.d(t,{Z:()=>eu});var l=r(95344),i=r(3729),a=r(91905),n=r(44147),s=r(71055),o=r(31296),m=r(42688),u=r(44178),d=r(8428);let c=e=>{let{formCore:t}=e,r=(0,d.usePathname)(),c=r.startsWith("/form")&&r.endsWith("/edit"),{formAnswer:{inputFormRequire:p,inputFormErrors:f,inputFormData:h,submitState:_,form_answer_id:x},setFormAnswer:g}=(0,i.useContext)(a.H),v=(0,o.D)({mutationKey:["add new report form"],mutationFn:e=>m.Z.addNewFormReport(e)});return(0,i.useEffect)(()=>{v.isSuccess&&g(e=>({...e,submitState:"success"}))},[v.isSuccess,g]),(0,l.jsxs)("div",{onClick:()=>{if(p.every(e=>e.checkRequire)&&0===f.length){let e=h.map(e=>{if(e.setting&&delete e.setting,"ADDRESS"===e.type){let{address_full:t}=e.value;e.value=t||""}return e}),r={form_id:t._id,form_owner:t.form_owner,answers:e,form_answer_id:x};return c?g(e=>({...e,submitState:"success"})):(console.log({"Dữ liệu submit cuối c\xf9ng":r}),v.mutate(r),void g(e=>({...e,submitState:"pending"})))}let e=[];console.log({"C\xe1c input lỗi":e=(0,s.VQ)(e,f,h)}),(e.length>0||p.length>0)&&g(t=>({...t,inputFormErrors:e,openModelError:!0}))},className:"min-w-[25%] w-max h-[5rem]  ml-auto flex items-center justify-center gap-[.5rem] rounded-lg hover:cursor-pointer bg-blue-600",children:[l.jsx(n.Z,{textContent:t.form_button_text,className:" text-white text-[1.6rem] text-center px-[1rem]  w-max"}),"pending"===_&&l.jsx(u.Z,{color:"#ffffff",width:"min-w-[2.4rem]",height:"min-h-[2.4rem]"})]})};var p=r(23902),f=r(23855),h=r(89410);let _=e=>{let{formCore:t}=e;return l.jsx("div",{className:`${({onCheckModeAvatar:e=>"circle"===e?"rounded-full":"",onCheckPositionAvatar:e=>"left"===e?"left-[calc(25%-4rem)] ":"center"===e?"left-[50%] translate-x-[-50%]":"right-[calc(25%-4rem)]",onCheckPostionShowAvatar:e=>e?"bottom-0 translate-y-[50%] left-[20%]":"top-[50%] translate-x-[-50%] translate-y-[-50%] left-[50%]"}).onCheckPositionAvatar(t?.form_avatar?.position)} absolute top-0 translate-y-[-50%] w-[45%] sm:w-[20rem] xl:w-[22%] aspect-square  flex justify-center`,children:l.jsx(h.default,{src:t.form_avatar?.form_avatar_url||t.form_setting_default.form_avatar_default_url,style:{borderRadius:t?.form_avatar?.mode_shape==="circle"?"999px":""},width:800,height:160,unoptimized:!0,alt:"form background",className:" w-[90%] h-[90%] aspect-square z-[2] shadow-xl"})})},x=e=>{let{formCore:t}=e,{formAnswer:{inputFormRequire:r}}=(0,i.useContext)(a.H),n=t.form_title.form_title_color||t.form_setting_default.form_title_color_default,s=!1,o={fontSize:`${t.form_title.form_title_size?t.form_title.form_title_size/10+"rem":t.form_setting_default.form_title_size_default/10+"rem"}`,color:`${t.form_title.form_title_color?t.form_title.form_title_color:t.form_setting_default.form_title_color_default}`,fontStyle:`${t.form_title.form_title_style?t.form_title.form_title_style:t.form_setting_default.form_title_style_default}`},m=t.form_avatar_state||t.form_avatar?.form_avatar_url?"mt-[8rem]":"mt-0";return(0,l.jsxs)("header",{style:{borderTopColor:n},className:`${t.form_avatar?.form_avatar_url||t.form_avatar_state?"mt-[8rem]":"mt-[2rem]"} relative w-full min-h-[14rem] m h-max p-[1.8rem_3rem] flex flex-col gap-[2rem]   break-words	 border-t-[1rem]  bg-[#ffffff] rounded-2xl`,children:[(t.form_avatar?.form_avatar_url||t.form_avatar_state)&&l.jsx(_,{formCore:t}),(0,l.jsxs)("div",{className:`${m} flex flex-col gap-[3rem]`,children:[l.jsx("h1",{style:o,className:" font-light ",children:t.form_title.form_title_value}),t.form_title.form_title_sub.length>0&&(0,l.jsxs)("div",{className:"pt-[2rem] border-t-[.1rem] border-gray-200 flex flex-wrap gap-[2rem]",children:[t.form_title.form_title_sub.map(e=>{if("Text"===e.type&&e?.core?.value)return l.jsx("span",{className:"text-[1.4rem] text-justify leading-10",children:e.core.value},e._id);if("Image"===e.type){if("Slider"!==t.form_title.form_title_mode_image)return l.jsx("div",{className:"w-full xl:w-[45%] flex gap-[2rem]",children:l.jsx(p.Z,{mode:"Normal",page:"Answer",subTitleItem:e},e._id)},e._id);if("Slider"===t.form_title.form_title_mode_image&&!s){s=!0;let r=t.form_title.form_title_sub.filter(e=>"Image"===e.type&&e.core.url);return l.jsx(f.Z,{colorMain:n,page:"Answer",type:"Components",images:r},e._id)}}if("FullDescription"===e.type)return(0,l.jsxs)("div",{className:"  text-[1.4rem] my-[1rem]  flex flex-col gap-[1.6rem] ",children:[l.jsx("span",{className:"font-bold",children:e.core.header_value}),l.jsx("span",{children:e.core.value})]},e._id)}),r.length>0&&l.jsx("span",{className:"text-red-600 text-[1.4rem] mt-[2rem]",children:"* Biểu thị c\xe2u hỏi bắt buộc"})]})]})]})};var g=r(14513),v=r(56506);let b=e=>{let{inputFormErrors:t,formCore:r,numberInputAPage:n,setPage:s}=e,o=r.form_title.form_title_color||r.form_setting_default.form_title_color_default,{setFormAnswer:m}=(0,i.useContext)(a.H);return(0,l.jsxs)("div",{className:"fixed z-[1000] top-[10rem] xl:top-[50%] xl:translate-y-[-50%] right-[2rem] sm:right-0 xl:right-[4rem] w-[32rem]  h-[24rem] max-h-[24rem] sm:h-[40rem] sm:max-h-[40rem]  border-[.1rem] border-gray-200 text-[1.2rem]",children:[(0,l.jsxs)("div",{className:"  w-full min-h-full max-h-full py-[3rem] flex flex-col gap-[2rem] bg-[#ffffff] shadow-lg",children:[l.jsx("span",{className:"text-[1.6rem] px-[1rem] text-center uppercase",children:"Một số dữ liệu kh\xf4ng hợp lệ"}),l.jsx("div",{className:"scroll-error-input overflow-y-scroll flex flex-col gap-[2rem] bg-[#ffffff] ",children:t.map(e=>{let t=r.form_inputs.findIndex(t=>t._id===e._id),i=Math.ceil((t+1)/n),a=r.form_inputs[t].input_title||"";return(0,l.jsxs)(v.default,{className:"group w-full p-[1rem_3rem] flex flex-col gap-[1rem] border-l-[.4rem] border-red-600 hover:bg-red-50 hover:text-red-600",href:`/form/${r._id}#_inputid_${e._id}`,onClick:()=>s(i),children:[(0,l.jsxs)("p",{className:"w-max flex gap-[.6rem]",children:[l.jsx("span",{className:"min-w-[4rem] max-w-[15rem] truncate",children:"Ti\xeau đề: "}),l.jsx("span",{style:{color:o},className:"font-bold",children:a||"Trống"})]}),(0,l.jsxs)("div",{className:"w-full flex flex-col justify-between",children:[(0,l.jsxs)("p",{className:"flex gap-[.4rem]",children:[l.jsx("span",{className:"min-w-[4rem]",children:"M\xe3 lỗi:"}),l.jsx("span",{className:"text-red-600 group-hover:text-red-700 font-semibold",children:`[${e.type}]`})]}),(0,l.jsxs)("p",{className:"flex gap-[.6rem]",children:[l.jsx("span",{className:"min-w-[4rem]",children:"M\xf4 tả:"}),l.jsx("span",{className:"underline underline-offset-4",children:r.form_inputs[t].core.setting.input_error_state?r.form_inputs[t].core.setting.input_error:e.message})]})]})]},e._id)})})]}),l.jsx("button",{onClick:()=>m(e=>({...e,openModelError:!1})),className:"absolute right-[-2rem] top-[-2rem] w-[4rem] h-[4rem]  flex items-center justify-center rounded-full  bg-red-600 ",children:l.jsx(g.Z,{size:14,color:"white"})})]})},y=e=>{let{message:t="C\xe2u trả lời của bạn đ\xe3 được ghi lại",color:r}=e;return l.jsx("div",{style:{color:r},className:"w-full min-h-[14rem] h-max flex items-center justify-center text-[2rem] font-bold bg-[#ffffff] rounded-lg",children:t})};var j=r(16083),w=r(32256),N=r(5325),I=r(23363),C=r(5398),Z=r(40626),E=r(32883),k=r(24500),S=r(90271),A=r(6519);let R=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:n,inputFormData:o,submitState:m},setFormAnswer:u}=(0,i.useContext)(a.H),[d,c]=(0,i.useState)(!1),p=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:n,inputItem:t,inputFormData:o}),[t,n,o]),[f,h]=(0,i.useState)(p.input?.value||"");return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:p,input_id:t._id,write:d,children:[l.jsx(k.Z,{inputItem:t,formCore:r}),(0,l.jsxs)(I.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:[l.jsx("input",{onFocus:()=>{c(!0),(0,s.EQ)({setFormAnswer:u,inputFormErrors:n,inputItem:t})},onBlur:()=>{d&&(0,s.qy)({inputItem:t,inputValue:f,setFormAnswer:u,validateCallback:C.f})},value:f?+f:"",type:"number",className:` ${E.Z.StyleTitle({formCore:r,inputItem:t})} w-[90%] h-full pb-[2rem] border-b-[.1rem] border-gray-300  outline-none text-[1.7rem] placeholder:text-[1.3rem]`,placeholder:"Nhập số điện thoại của bạn",onChange:e=>h(e.target.value)}),l.jsx(I.Z,{className:"absolute z-[2] right-[1rem]",title:"",children:l.jsx(Z.Z,{className:" text-textMain opacity-50",size:18})})]}),p?.globalError?.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:p})]})})};var T=r(35188),q=r(66751);let M=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:n,inputFormData:o,submitState:m},setFormAnswer:u}=(0,i.useContext)(a.H),d=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:n,inputItem:t,inputFormData:o}),[t,n,o]),[c,p]=(0,i.useState)(d.input?.value||""),[f,h]=(0,i.useState)(!1);return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:d,input_id:t._id,write:f,children:[l.jsx(k.Z,{inputItem:t,formCore:r}),l.jsx(I.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:(0,l.jsxs)(I.Z,{className:"flex flex-col gap-[1rem]",children:[l.jsx(I.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:l.jsx(T.Z,{onFocus:()=>{h(!0),(0,s.EQ)({setFormAnswer:u,inputFormErrors:n,inputItem:t})},onBlur:()=>{f&&(0,s.qy)({inputItem:t,inputValue:c,setFormAnswer:u,validateCallback:q.m})},allowHalf:!0,value:+c,onChange:e=>p(e.toString())})}),(0,l.jsxs)("span",{className:"text-[1.4rem]",children:["Số đ\xe1nh gi\xe1 bạn chọn l\xe0: ",c]})]})}),d?.globalError?.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:d})]})})};var D=r(80958),F=r(32882),P=r(60639),V=r(10142),O=r(21797);let $=e=>{let t;let{inputItem:r,formCore:n}=e,{formAnswer:{inputFormErrors:o,inputFormData:m,submitState:u},setFormAnswer:d}=(0,i.useContext)(a.H),[c,p]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:o,inputItem:r,inputFormData:m}),[r,o,m]),[h,_]=(0,i.useState)(f.input?.value||""),[x,g]=(0,i.useState)(!1),v=(t=h?new Date(h):new Date).getMonth()+1,b=t.getDate(),y=t.getFullYear(),[j,w]=(0,i.useState)({day:b,month:v,year:y,date_string:(0,P.DP)({day:b,month:v,year:y})}),C=(0,P.PK)({day:j.day,month:j.month,year:j.year});return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:f,input_id:r._id,write:c,children:[l.jsx(k.Z,{inputItem:r,formCore:n}),(0,l.jsxs)(I.Z,{className:"relative flex flex-col items-start gap-[1rem] text-[#000] ",children:[(0,l.jsxs)("button",{onClick:()=>g(e=>!e),className:"bg-color-main text-[#fff] p-[.5rem_1rem] rounded-xl flex items-center gap-[1rem] text-[1.3rem]",children:[l.jsx("span",{children:C}),l.jsx(D.Z,{})]}),x&&l.jsx("div",{className:"absolute z-[3] top-[4.2rem] xl:top-[64%] right-[33%] sm:right-[67%] xl:right-[47%] ",onFocus:()=>{p(!0),(0,s.EQ)({setFormAnswer:d,inputFormErrors:o,inputItem:r})},children:l.jsx(V.Z,{setOpenModel:g,children:l.jsx(F.Z,{onChange:e=>{let{day:t,month:l,date_string:i,year:a}=e;w({day:t,month:l,year:a,date_string:i}),g(!1),c&&i&&(0,s.qy)({inputItem:r,inputValue:new Date(i).toISOString(),setFormAnswer:d,validateCallback:O.Z})},callbackCancel:()=>{g(!1),w({day:b,month:v,year:y,date_string:(0,P.DP)({day:b,month:v,year:y})})},initialDate:t})})}),(0,l.jsxs)("p",{className:"text-[1.3rem]",children:["Thời gian đang chọn l\xe0:",(0,l.jsxs)("span",{className:"text-color-main font-semibold",children:[" ",C]})]})]}),f?.globalError?.state&&l.jsx(A.Z,{inputItem:r,inputItemInArrayGlobal:f})]})})};var z=r(20016);let L=e=>{let{formCore:t,inputItem:r}=e;return(0,l.jsxs)("p",{style:({styleTitle:()=>({fontSize:r.core.setting.input_size||t.form_setting_default.input_size,color:r.core.setting.input_color||t.form_setting_default.input_color,fontStyle:r.core.setting.input_style||t.form_setting_default.input_style})}).styleTitle(),className:"flex items-center gap-[.6rem] text-[2rem] font-medium",children:[r.input_title||"Kh\xf4ng c\xf3 ti\xeau đề",r.core.setting.require&&l.jsx("span",{className:"text-red-800",children:"*"})]})};var G=r(25234),H=r(62020),U=r(36013),Q=r(7892);let X=e=>{let{form_id:t,form_answer_id:r,mode:l,setFilePreviewCallback:i,setWriteCallback:a}=e,n=(0,U.I0)(),s=(0,o.D)({mutationKey:["upload-file-form-answers"],mutationFn:e=>m.Z.uploadLoadFile(e)});return{uploadFileFormAnswerAPI:s,handleUpload:e=>{if(e.target.files&&e.target.files[0]){a(!0);let o=e.target.files[0],{_check:m,message:u}=(0,G.s)({file:o});if(!m)return n((0,H.DT)({toast_item:{_id:(0,Q.Z)(),type:"ERROR",core:{message:u},toast_title:"Lỗi File Upload"}}));let d=new FormData;d.append("file",o),d.append("form_answers_id",r),d.append("form_id",t),i(URL.createObjectURL(o)),l||s.mutate(d)}}}};var W=r(86277),B=r(77823);let K=()=>(0,l.jsxs)("div",{className:"w-full h-[2rem] flex items-center gap-[1rem] text-blue-400 animate-pulse",children:[l.jsx("div",{className:"w-[1rem] h-[1rem] bg-blue-400 rounded-full"}),l.jsx("span",{className:"text-[1.2rem] font-semibold",children:"Đang tải l\xean"})]});var Y=r(95780);let J=e=>{let{inputItem:t,formCore:r}=e,n=(0,d.usePathname)(),o=n.startsWith("/form")&&n.endsWith("/edit"),{formAnswer:{inputFormErrors:m,inputFormData:c,submitState:p,form_answer_id:f},setFormAnswer:_}=(0,i.useContext)(a.H),[x,g]=(0,i.useState)(""),[v,b]=(0,i.useState)(!1),{uploadFileFormAnswerAPI:y,handleUpload:j}=X({form_id:r._id,form_answer_id:f,mode:o,setFilePreviewCallback:g,setWriteCallback:b}),w=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:m,inputItem:t,inputFormData:c}),[t,m,c]),C=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(y.isSuccess){let{url:e}=y.data.metadata;g(e),t.core.setting.require&&(0,s.Z)(_,t._id,!0),m.some(e=>e._id===t._id)&&(0,s.wY)(_,t._id),(0,s.l1)({callback:_,input_id:t._id,input_value:e})}},[y.isSuccess]),(0,i.useEffect)(()=>()=>{URL.revokeObjectURL(x)},[x]),l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:w,input_id:t._id,write:v,children:[l.jsx(L,{inputItem:t,formCore:r}),(0,l.jsxs)(I.Z,{className:"relative flex  items-center justify-between gap-[1rem] text-text-theme ",children:[(0,l.jsxs)(I.Z,{className:"h-[12rem] w-[20rem] xl:w-[24rem]   flex flex-col   justify-start  gap-[1.4rem]  ",children:[w.input?.value&&(0,W.Rm)(w.input?.value)&&(0,l.jsxs)("a",{href:w.input?.value,target:"_blank",className:"text-[#000] text-[1.3rem] flex items-center gap-[1rem]",children:[l.jsx(z.Z,{}),"Xem Ảnh"]}),l.jsx("p",{className:"w-max text-[1.3rem] text-[#000]",children:"Vui l\xf2ng chọn c\xe1c file JPG, JPEG,PNG"}),l.jsx("button",{onClick:()=>{C.current&&C.current.click()},className:"p-[.6rem] border-[.1rem] w-[9rem] border-text-theme bg-slate-900 text-[#fff] text-[1.4rem] rounded-xl",children:w.input?.value?"Tải lại":"Tải ảnh l\xean"}),w.input?.value?l.jsx(Y.Z,{}):y.isPending?l.jsx(K,{}):l.jsx(B.Z,{}),l.jsx("input",{type:"file",hidden:!0,ref:C,onChange:j,accept:".jpg, .jpeg, .png"})]}),(0,l.jsxs)("div",{className:"w-[12rem] xl:w-[14rem] h-[12rem] flex items-center justify-center",children:[!w.input?.value&&!y.isPending&&l.jsx(h.default,{width:32,height:32,alt:"upload h\xecnh ảnh",src:"/assets/images/icon/form_answer/photographer.png",unoptimized:!0,className:"w-[10rem] h-[10rem]"}),y.isPending?l.jsx(u.Z,{color:"blue"}):!o&&!!w.input?.value&&l.jsx(h.default,{src:w.input?.value,width:70,height:70,alt:"file hinh anh",className:"w-full h-full rounded-lg",unoptimized:!0}),o&&x&&l.jsx(h.default,{src:x,width:70,height:70,alt:"file hinh anh",className:"w-full h-full",unoptimized:!0})]})]}),w?.globalError?.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:w})]})})};var ee=r(31122),et=r(69573);let er=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:n,inputFormData:o},setFormAnswer:m}=(0,i.useContext)(a.H),u=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:n,inputItem:t,inputFormData:o}),[t,n,o]),d=e=>{let{_next:r,type:l}=(0,s.qy)({inputItem:t,inputValue:e,setFormAnswer:m,validateCallback:et.Z});r&&n.some(e=>e._id===t._id)&&(0,s.wY)(m,t._id)};return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:u,input_id:t._id,write:!0,children:[l.jsx(k.Z,{inputItem:t,formCore:r}),l.jsx(I.Z,{className:"relative flex flex-col items-start gap-[1rem] text-[#000] ",children:(0,l.jsxs)("div",{className:"flex flex-col gap-[2rem]",children:[l.jsx(ee.Z,{detail:!0,onChange:d,defaultValue:{province:{label:u.input?.value?.addressValidate?u.input?.value?.addressValidate[0]?.name_with_type:"",value:u.input?.value?.addressValidate?u.input?.value?.addressValidate[0]?.code:"",name_with_type:u.input?.value?.addressValidate?u.input?.value?.addressValidate[0]?.name_with_type:"",path_with_type:u.input?.value?.addressValidate?u.input?.value?.addressValidate[0]?.path_with_type:""},district:{label:u.input?.value?.addressValidate?u.input?.value?.addressValidate[1]?.name_with_type:"",value:u.input?.value?.addressValidate?u.input?.value?.addressValidate[1]?.code:"",name_with_type:u.input?.value?.addressValidate?u.input?.value?.addressValidate[1]?.name_with_type:"",path_with_type:u.input?.value?.addressValidate?u.input?.value?.addressValidate[1]?.path_with_type:""},ward:{label:u.input?.value?.addressValidate?u.input?.value?.addressValidate[2]?.name_with_type:"",value:u.input?.value?.addressValidate?u.input?.value?.addressValidate[2]?.code:"",name_with_type:u.input?.value?.addressValidate?u.input?.value?.addressValidate[2]?.name_with_type:"",path_with_type:u.input?.value?.addressValidate?u.input?.value?.addressValidate[2]?.path_with_type:""},street:u.input?.value.addressString}}),(0,l.jsxs)("div",{className:"flex flex-col h-[8rem] gap-[1rem]   justify-center",children:[(!u.globalError.state||u.input?.value.address_full)&&l.jsx("span",{className:"text-[1.4rem]",children:u.input?.value.address_full}),l.jsx("button",{onClick:()=>d(u.input?.value),className:" w-[9rem] flex items-center justify-center p-[.8rem] xl:p-[1rem] bg-blue-600 rounded-lg text-[1.2rem] xl:text-[1.4rem] text-[#ffffff]",children:"X\xe1c nhận"})]})]})}),u.globalError.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:u})]})})};var el=r(37693),ei=r(28405);let ea=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:n,inputFormData:o},setFormAnswer:m}=(0,i.useContext)(a.H),u=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:n,inputItem:t,inputFormData:o}),[t,n]),[d,c]=(0,i.useState)(!1),[p,f]=(0,i.useState)(u.input?.value||""),[h,_]=(0,i.useState)(!1),x=e=>{f(e)};return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:u,input_id:t._id,write:h,children:[l.jsx(k.Z,{formCore:r,inputItem:t}),(0,l.jsxs)(I.Z,{className:"flex flex-col gap-[.3rem]",children:[(0,l.jsxs)(I.Z,{className:" relative min-h-[5rem] h-max flex items-center gap-[.5rem] ",children:[l.jsx("input",{onBlur:()=>{h&&(0,s.qy)({inputItem:t,inputValue:p,setFormAnswer:m,validateCallback:ei.Z})},onFocus:()=>{_(!0),(0,s.EQ)({setFormAnswer:m,inputFormErrors:n,inputItem:t})},value:p,onChange:e=>x(e.target.value),className:"w-full h-full p-[1rem] rounded-lg text-[1.6rem]   border-[.1rem] border-gray-400  outline-none focus:outline-blue-200 focus:border-transparent text-[#000]",placeholder:"Nhập đường dẫn li\xean kết của bạn"}),l.jsx("div",{className:"absolute z-[2] right-[1rem]  opacity-70",children:"www"})]}),(0,l.jsxs)("div",{className:"flex flex-col h-[8rem] gap-[1rem]   justify-center",children:[h&&d&&!u.globalError.state&&l.jsx(el.Z,{message:"Đường dẫn hợp lệ"}),l.jsx("button",{onClick:()=>{let{_next:e,message:r,type:l}=(0,s.qy)({inputItem:t,inputValue:p,setFormAnswer:m,validateCallback:ei.Z});c(e),e&&n.some(e=>e._id===t._id)&&(0,s.wY)(m,t._id)},className:" w-[9rem] flex items-center justify-center p-[.8rem] xl:p-[1rem] bg-blue-600 rounded-lg text-[1.2rem] xl:text-[1.4rem] text-[#ffffff]",children:"X\xe1c nhận"})]})]}),u?.globalError?.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:u})]})})},en=e=>{let{value:t,value_current:r,checked:i,callbackChecked:a,getStateCheck:n}=e;return l.jsx("div",{className:"p-[1rem] flex items-center gap-[2rem] rounded-lg hover:cursor-pointer hover:bg-formCoreBgColor",onClick:()=>{let e=r===t;n&&n(e),a&&a()},children:(0,l.jsxs)("div",{className:"min-w-[2rem] w-max h-[2.6rem] relative rounded-full flex items-center ",children:[l.jsx("div",{className:" absolute z-[2] w-[2rem] aspect-square rounded-full bg-[#fff] flex items-center justify-center ml-[.6rem] border-[.1rem] border-gray-400",children:i&&l.jsx("div",{className:" w-[50%] aspect-square rounded-full bg-blue-300"})}),r&&i?l.jsx("div",{className:"absolute min-w-[12rem] h-full bg-color-main rounded-full text-[#fff] flex items-center justify-center",children:(0,l.jsxs)("span",{className:"ml-[2rem] px-[2rem] text-[1.2rem] w-max",children:["[",t,"]"]})}):l.jsx("span",{className:"ml-[4rem]",children:t})]})})},es=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:n,inputFormData:o,submitState:m},setFormAnswer:u}=(0,i.useContext)(a.H),d=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:n,inputItem:t,inputFormData:o}),[t,n,o]),[c,p]=(0,i.useState)(()=>({option_id:d.input?.value.option_id||"",option_value:d.input?.value.option_value||""}));(0,i.useEffect)(()=>{let e=d.input?.value;p({option_id:e?.option_id,option_value:e?.option_value})},[]);let f=e=>{if((0,s.wY)(u,t._id),t.core.setting.require&&(0,s.Z)(u,t._id,!0),e.option_value===c.option_value){p({option_id:e.option_id,option_value:""}),(0,s.l1)({callback:u,input_id:t._id,input_value:{option_id:"",option_value:""}});return}p({option_id:e.option_id,option_value:e.option_value}),(0,s.l1)({callback:u,input_id:t._id,input_value:e})};return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:d,input_id:t._id,write:!0,children:[l.jsx(k.Z,{formCore:r,inputItem:t}),l.jsx(I.Z,{className:"flex flex-col gap-[.3rem] text-[1.4rem]",children:l.jsx(I.Z,{className:" relative min-h-[5rem] h-max flex flex-col gap-[1.6rem]  ",children:t.core.options.map(e=>e.option_value?l.jsx(en,{value:e.option_value,value_current:c.option_value,callbackChecked:()=>f(e),name_radio:t._id,checked:e.option_id===c.option_id},e.option_id):null)})}),(0,l.jsxs)("p",{className:"text-[1.4rem]",children:["Đ\xe3 chọn: ",l.jsx("span",{className:"ml-[.4rem] border-b-[.2rem] border-gray-400",children:c.option_value})]}),d?.globalError?.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:d})]})})},eo=e=>{let{inputItem:t,formCore:r}=e,{formAnswer:{inputFormErrors:n,inputFormData:o,submitState:m,inputFormRequire:u},setFormAnswer:d}=(0,i.useContext)(a.H),c=(0,i.useMemo)(()=>(0,s.cC)({inputFormErrors:n,inputItem:t,inputFormData:o}),[t,n,o]),[p,f]=(0,i.useState)(()=>({value:c.input?.value||[]})),h=e=>{if((0,s.wY)(d,t._id),t.core.setting.require&&(p.value.map(e=>e.option_id).includes(e.option_id)?(0,s.Z)(d,t._id,!1):(0,s.Z)(d,t._id,!0)),p.value.map(e=>e.option_id).includes(e.option_id)){let r=p.value.filter(t=>t.option_id===e.option_id?null:t);(0,s.l1)({callback:d,input_id:t._id,input_value:r}),f(e=>({value:r}))}else{let r=p.value.concat(e);(0,s.l1)({callback:d,input_id:t._id,input_value:r}),f(()=>({value:r}))}};return l.jsx(N.Z,{children:(0,l.jsxs)(S.Z,{inputItemInArrayGlobal:c,input_id:t._id,write:!0,children:[l.jsx(k.Z,{formCore:r,inputItem:t}),l.jsx(I.Z,{className:"flex flex-col gap-[.3rem] text-[1.4rem]",children:l.jsx(I.Z,{className:" relative min-h-[5rem] h-max flex flex-col gap-[1.6rem]  ",children:t.core.options.map(e=>e.option_value?l.jsx(en,{value:e.option_value,value_current:p.value.filter(e=>e.option_id==e.option_id)[0]?.option_value||"",callbackChecked:()=>h(e),name_radio:t._id,checked:p.value.map(e=>e.option_value).includes(e.option_value)},e.option_id):null)})}),(0,l.jsxs)("p",{className:"text-[1.4rem]",children:["Đ\xe3 chọn:"," ",l.jsx("span",{className:"ml-[.4rem] border-b-[.2rem] border-gray-400",children:p.value.map(e=>e.option_value).join(", ")})]}),c?.globalError?.state&&l.jsx(A.Z,{inputItem:t,inputItemInArrayGlobal:c})]})})},em=(e,t)=>e.map(e=>{switch(e.type){case"EMAIL":return l.jsx(j.Z,{inputItem:e,formCore:t},e._id);case"TEXT":return l.jsx(w.Z,{inputItem:e,formCore:t},e._id);case"PHONE":return l.jsx(R,{inputItem:e,formCore:t},e._id);case"VOTE":return l.jsx(M,{inputItem:e,formCore:t},e._id);case"DATE":return l.jsx($,{inputItem:e,formCore:t},e._id);case"FILE_IMAGE":return l.jsx(J,{inputItem:e,formCore:t},e._id);case"ADDRESS":return l.jsx(er,{inputItem:e,formCore:t},e._id);case"ANCHOR":return l.jsx(ea,{inputItem:e,formCore:t},e._id);case"OPTION":return l.jsx(es,{inputItem:e,formCore:t},e._id);case"OPTION_MULTIPLE":return l.jsx(eo,{inputItem:e,formCore:t},e._id)}}),eu=e=>{let{formCore:t}=e,[r,n]=(0,i.useState)(1),{formAnswer:{inputFormErrors:s,openModelError:o,submitState:m}}=(0,i.useContext)(a.H),u=t.form_title.form_title_color||t.form_setting_default.form_title_color_default,d=(0,i.useRef)(1);console.log({message:"Quản l\xed v\xe0 validate dữ liệu"}),console.log({"Số lần render":d.current}),console.log({"Trang hiện tại":r}),"success"===m&&console.log("%cHẹn gặp lại bạn, th\xf4ng tin của bạn đ\xe3 được gửi th\xe0nh c\xf4ng","color:#fff;font-size:1.2rem;background: #3b36db;padding:0.3rem;border-radius:.4rem"),d.current+=1;let[p,f]=(0,i.useState)(!1),h=(0,i.useMemo)(()=>em(t.form_inputs,t),[t]),_=Math.ceil(h.length/3),g={start:3*(r-1),end:3*r};return(0,i.useEffect)(()=>{f(!0)},[]),(0,l.jsxs)(l.Fragment,{children:["success"!==m&&(0,l.jsxs)(l.Fragment,{children:[1===r&&l.jsx(x,{formCore:t}),!p&&h,p&&h.slice(g.start,g.end),(0,l.jsxs)("div",{className:"flex  gap-[2rem] justify-end text-[1.5rem] text-black font-normal",children:[r===_&&_>1&&l.jsx("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>n(e=>e-=1),children:"Xem trang trước"}),r>1&&r!==_&&l.jsx("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>n(e=>e-=1),children:"Xem trang trước"}),t.form_inputs.length>0&&(0,l.jsxs)("p",{children:["Số trang:",r," / ",_]}),r<_&&1!==r&&l.jsx("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>n(e=>e+=1),children:"Xem trang tiếp theo"}),1===r&&_>1&&l.jsx("button",{tabIndex:0,className:"pb-[.1rem] border-b-[.3rem] border-red-900",onClick:()=>n(e=>e+=1),children:"Xem trang tiếp theo"})]}),s.length>0&&o&&l.jsx(b,{formCore:t,setPage:n,inputFormErrors:s,numberInputAPage:3}),t.form_inputs.length>0&&l.jsx(c,{formCore:t})]}),"success"===m&&l.jsx("div",{className:"mt-[2rem]",children:l.jsx(y,{color:u})})]})}},37693:(e,t,r)=>{r.d(t,{Z:()=>i});var l=r(95344);r(3729);let i=e=>{let{message:t}=e;return l.jsx("span",{className:"text-[1.5rem] text-blue-500 font-bold max-w-[90%] break-all",children:t})}},85473:(e,t,r)=>{r.d(t,{R:()=>l});let l={buttonDesign:{custom:"T\xf9y ch\xecnh giao diện",avatar:"Th\xeam ảnh đại diện",background:"Th\xeam h\xecnh nền"},title:{message:"Tạo ti\xeau đề",addOptionTitle:"Th\xeam c\xe1c mục phụ cho ti\xeau đề ch\xednh",optionText:{message:"Đoạn m\xf4 tả ngắn",complete:"M\xf4 tả ti\xeau đề",remove:"X\xf3a"},optionFullDescription:{message:"Đoạn m\xf4 tả nhiều th\xf4ng tin",complete:"M\xf4 tả ti\xeau đề",remove:"X\xf3a"},optionImage:{message:"H\xecnh Ảnh",complete:"Tải ảnh l\xean",remove:"X\xf3a"},optionImageMode:{label:"Chọn dạng hiển thị h\xecnh ảnh",mode_1:"B\xecnh thường",mode_2:"Slider"}}}},42843:(e,t,r)=>{r.d(t,{Z:()=>s});var l=r(41197),i=r(87838),a=r(31296),n=r(36013);let s=()=>{let e=(0,n.I0)();return(0,a.D)({mutationKey:["update-form"],mutationFn:e=>i.Z.updateForm(e),onSuccess:t=>{let{form:r}=t.metadata;e((0,l.ow)({form:r}))}})}},63080:(e,t,r)=>{r.d(t,{G0:()=>i,GR:()=>n,Lw:()=>a,uV:()=>s});var l=r(60639);let i=({formCore:e,mode:t})=>{let r=e.form_background?.object,l=e.form_background?.position,i=e.form_background?.size,a=e.form_background?.mode_show,n=e.form_avatar?.position;return{style_background:{objectFit:a,top:`${l?.top}%`,left:`${l?.left}%`,transform:`translate(${l?.left||-0}%, ${l?.top||-0}%)`,width:`${i?.width}%`||"100%",height:`${i?.height?i?.height+"%":"100%"}`,objectPosition:` ${r?.x}% ${r?.y}%`},position_buttn:"left"===n?"right-[2rem] xl:right-[6rem]":"left-[2rem] xl:left-[6rem]"}},a=({formCore:e})=>{let t=e.form_avatar?.mode_shape,r=e.form_avatar?.position,l="rounded-0",i="right-0";return"circle"===t&&(l="rounded-full"),"left"===r&&(i="left-0"),"center"===r&&(i="left-[50%] translate-x-[-50%]"),{shape:l,position:i}},n=({dates_in_month:e,results:t})=>{let r=[],i=Array(e).fill(0).map((e,t)=>t+1).map((e,i)=>{t.map(t=>{if((0,l.pP)(t.createdAt||"")===e){if(!r.map(e=>e.date_createdAt).includes(e))return r.push({date_createdAt:e,forms:[t],match:!0,date_full:t.createdAt});let l=r.findIndex(t=>t.date_createdAt===e);if(-1!==l&&r[l].forms?.length>0){r[l].forms?.push(t);return}return r[l].forms=[t],r[l].match=!0,void(r[l].date_full=t.createdAt)}if(!r.map(e=>e.date_createdAt).includes(e))return r.push({date_createdAt:e,forms:null,match:!1})})});return{data_in_month:r,filter_form:i}},s=({formAnswer:e,formView:t})=>{let r=e/t*100;return isNaN(r)?0:r.toFixed(2)}}};