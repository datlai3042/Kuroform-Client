"use strict";exports.id=8420,exports.ids=[8420],exports.modules={63364:(t,e,a)=>{a.d(e,{Af:()=>u,Ej:()=>s,Oh:()=>r,Oy:()=>o,RM:()=>c,fP:()=>l,uD:()=>n});let i={require:!1,input_error:"Nội dung kh\xf4ng hợp lệ",input_error_state:!1,input_color:"#000000",input_size:16,input_style:"normal"},r={maxLength:100,placeholder:"Nhập nội dung của bạn",minLength:8,...i};({...i});let o=[{type:"province",code:"",name_with_type:"",path_with_type:""},{type:"district",code:"",name_with_type:"",path_with_type:""},{type:"ward",code:"",name_with_type:"",path_with_type:""},{type:"street",code:"",name_with_type:"",path_with_type:""}],s=/[^\s@]+@[^\s@]+\.[^\s@]+/gi,n="Đ\xe2y l\xe0 một c\xe2u trả lời bắt buộc",l=t=>`Độ d\xe0i tối thiếu: ${t}`,c=t=>`Độ d\xe0i tối đa: ${t}`,u=t=>t},46499:(t,e,a)=>{a.d(e,{NO:()=>s,hI:()=>i,ss:()=>o,vm:()=>r});let i="^(http|https)://",r="i",o="\xe0\xe1\xe3ảạăằắẳẵặ\xe2ầấẩẫậ\xe8\xe9ẻẽẹ\xeaềếểễệđ\xf9\xfaủũụưừứửữự\xf2\xf3ỏ\xf5ọ\xf4ồốổỗộơờớởỡợ\xec\xedỉĩị\xe4\xeb\xef\xee\xf6\xfc\xfb\xf1\xe7\xfdỳỹỵỷ",s="aaaaaaaaaaaaaaaaaeeeeeeeeeeeduuuuuuuuuuuoooooooooooooooooiiiiiaeiiouuncyyyyy"},47612:(t,e,a)=>{a.d(e,{Z:()=>d});var i=a(86277),r=a(6092),o=a(8428),s=a(87221);a(62020),a(87687),a(24386);let n=async(t,e)=>{switch(t){case s.Du:return await l(e);case s.Yu:return await c(e);default:(0,o.redirect)("/errors/internal-server-error")}},l=async t=>r.Z.tokenExpireRedrict(t),c=async t=>await r.Z.logoutNextServer(t),u=async(t,e,a)=>{let{body:s,baseHeader:l,fullUrl:c}=(0,i.u1)(e,a),u={...a,headers:{...l,...a?.headers},body:s,method:t,credentials:"include"},p=await fetch(c,u).then(t=>t).catch(t=>{(0,o.redirect)("/errors/internal-server-error")});if(!p.ok)return await n(+p.status,a);let d=await p.json();if("v1/api/auth/set-token".includes((0,i.AH)(e))){let{expireToken:t,code_verify_token:e,expireCookie:a}=d;(0,i.uK)("expireToken",t),(0,i.uK)("expireCookie",a),(0,i.uK)("code_verify_token",e)}if(["v1/api/auth/login","v1/api/auth/register"].some(t=>t===(0,i.AH)(e))){let{metadata:t}=d,{client_id:e,expireToken:a,token:{access_token:i,code_verify_token:o,refresh_token:s},expireCookie:n}=t;await r.Z.syncNextToken({access_token:i,code_verify_token:o,refresh_token:s,client_id:e,expireToken:a,expireCookie:n})}return["v1/api/auth/logout"].includes((0,i.AH)(e)),d};class p{static get(t,e={}){return u("GET",t,e)}static post(t,e,a={}){return u("POST",t,{...a,body:e})}static put(t,e,a){return u("PUT",t,{...a,body:e})}static delete(t){return u("DELETE",t)}}let d=p},87221:(t,e,a)=>{a.d(e,{Du:()=>i,Yu:()=>r,ox:()=>s});let i=401,r=403;class o extends Error{constructor({status:t=500,payload:e={message:"INTERNAL SERVER ERROR",detail:""}}){super(`Http Error with ${t}: ${e.message} /  ${e.detail}`),this.status=t,this.payload=e}}class s extends o{constructor({status:t=r,payload:e}){super({status:t,payload:e}),this.status=r,this.payload=e}}},86277:(t,e,a)=>{a.d(e,{AH:()=>c,Bs:()=>y,Fi:()=>u,Rm:()=>_,hs:()=>h,nt:()=>g,oH:()=>l,p_:()=>v,u1:()=>d,uK:()=>p}),a(63364),a(47612);var i=a(24386),r=a(58705),o=a(77030),s=a.n(o),n=a(46499);let l=t=>t.match(/[^\s@]+@[^\s@]+\.[^\s@]+/gi),c=t=>t.startsWith("/")?t.slice(1):t,u=(t,e)=>{let a=e?.split(";"),i={};return a.forEach(t=>{let[e,a]=t.split("=").map(t=>t.trim());i[e]=a}),i[t]},p=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},d=(t,e)=>{let a;let i=e?.body?e.body instanceof FormData?e.body:JSON.stringify(e.body):void 0,r=e?.body instanceof FormData?{}:{"Content-Type":"application/json"};a=e?.baseUrl===void 0?"http://localhost:4000":"http://localhost:3000";let o=t.startsWith("/")?`${a}${t}`:`${a}/${t}`;return{body:i,baseHeader:r,baseUrl:a,fullUrl:o}},h=t=>{let e=n.ss,a=n.NO;for(let i=0,r=e.length;i<r;i++)t=t.replace(RegExp(e[i],"gi"),a[i]);return t=t.toLowerCase().trim().replace(/[^a-z0-9\-]/g,"-").replace(/-+/g,"-")},_=t=>{let e=new RegExp(n.hI,n.vm);return t?.match(e)||!1},y=(t,e)=>{let a=[],o={};return t.map(t=>{let e={};t.answers.map(a=>{let i=a.title||`${a.type}_${a._id}`,r=a.title||`Kh\xf4ng c\xf3 ti\xeau đề`,n=g(a);if(e={...e,"Thời gian gửi":s()(new Date(t.createdAt)).format("hh:mm - Do MMMM YYYY"),[i]:n},o[a._id+"_#_"+a.type])o[a._id+"_#_"+a.type]=o[a._id+"_#_"+a.type].concat({_id:a._id,title:r,value:n,time:t.createdAt,form_answer_id:t._id});else{o[a._id+"_#_"+a.type]=[];let e={_id:a._id,title:r,value:n,time:t.createdAt,form_answer_id:t._id};o[a._id+"_#_"+a.type].push(e)}}),a=a.concat(e)}),i.Z.dispatch((0,r.lq)({dataGroupFilter:o,dataExcel:a,form_id:e,form_answer_total:t.length})),!0},g=t=>{let e="";return"OPTION_MULTIPLE"===t.type?e=t.value.map(t=>t.option_value).join(", "):"OPTION"===t.type?e=t.value.option_value:"DATE"===t.type?"Invalid date"===(e=s()(new Date(t.value)).format(" Do MMMM YYYY"))?"":e:e=t.value},v=t=>"/dashboard"===t?"Trang chủ":"/settings"===t?"C\xe0i đặt":t.startsWith("/profile")?"Trang c\xe1 nh\xe2n":t.endsWith("/edit")?"Trang chỉnh sửa":"/notifications"===t?"Trang th\xf4ng b\xe1o":"/trash"===t?"Trang ":void 0},6092:(t,e,a)=>{a.d(e,{Z:()=>c});var i=a(47612),r=a(86277),o=a(8428),s=a(87221),n=a(29709);class l{static async register(t){return i.Z.post("/v1/api/auth/register",t,{})}static async login(t){return i.Z.post("/v1/api/auth/login",t)}static async logoutNextClient(){let t="v1/api/auth/next-logout",e={baseUrl:""};try{await i.Z.post("v1/api/auth/logout",{force:!0},{}),await i.Z.post(t,n.Ry,e)}catch(a){await i.Z.post(t,n.Ry,e)}return null}static async logoutNextServer(t){let e=(t?.headers).Cookie,a=(0,r.Fi)("code_verify_token",e),i=(0,r.Fi)("force",e);return(0,o.redirect)(`/logout?code_verify_token=${a}&force=${i}`)}static async refreshTokenServer(t){let e=await i.Z.get("/v1/api/auth/refresh-token",{credentials:"include",signal:t}),{access_token:a,refresh_token:r,code_verify_token:o}=e.metadata.token,{client_id:s,expireToken:n,expireCookie:l}=e.metadata;return await i.Z.post("/v1/api/auth/set-token",{access_token:a,refresh_token:r,client_id:s,expireToken:n,code_verify_token:o,expireCookie:l},{baseUrl:"",signal:t})}static async refreshTokenClient(t){return console.log("mai"),await i.Z.get("/v1/api/auth/refresh-token",void 0)}static async syncNextToken({access_token:t,refresh_token:e,code_verify_token:a,client_id:i,expireToken:o,expireCookie:s}){await fetch("http://localhost:3000/v1/api/auth/set-token",{body:JSON.stringify({access_token:t,refresh_token:e,client_id:i,code_verify_token:a,expireToken:o,expireCookie:s}),method:"POST"}),(0,r.uK)("expireToken",o),(0,r.uK)("code_verify_token",a),(0,r.uK)("expireCookie",s)}static async tokenExpireRedrict(t){let e=t?.pathName,a=(t?.headers).Cookie,i=(0,r.Fi)("code_verify_token",a);return(0,o.redirect)(`/v1/api/token/refresh-token?code_verify_token=${i}&pathName=${e}`)}static async tokenPermission(t,e){throw new s.ox({status:+t,payload:e})}}let c=l}};